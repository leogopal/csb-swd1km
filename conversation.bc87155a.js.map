{"version":3,"sources":["node_modules/conversational-form/dist/conversational-form.js","conversation.js"],"names":["answerSubmittedHandler","dto","success","error","conversation","input","cfReference","tag","name","text","toLowerCase","indexOf","console","log","getFormData","conversationFinishedHandler","formData","addRobotChatResponse","JSON","stringify","ConversationalForm","formEl","document","getElementById","flowStepCallback","submitCallback","theme","showProgressBar"],"mappings":"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","file":"conversation.bc87155a.js","sourceRoot":"..","sourcesContent":["(function (root) {\n\n  // Store setTimeout reference so promise-polyfill will be unaffected by\n  // other code modifying setTimeout (like sinon.useFakeTimers())\n  var setTimeoutFunc = setTimeout;\n\n  function noop() {}\n  \n  // Polyfill for Function.prototype.bind\n  function bind(fn, thisArg) {\n    return function () {\n      fn.apply(thisArg, arguments);\n    };\n  }\n\n  function Promise(fn) {\n    if (typeof this !== 'object') throw new TypeError('Promises must be constructed via new');\n    if (typeof fn !== 'function') throw new TypeError('not a function');\n    this._state = 0;\n    this._handled = false;\n    this._value = undefined;\n    this._deferreds = [];\n\n    doResolve(fn, this);\n  }\n\n  function handle(self, deferred) {\n    while (self._state === 3) {\n      self = self._value;\n    }\n    if (self._state === 0) {\n      self._deferreds.push(deferred);\n      return;\n    }\n    self._handled = true;\n    Promise._immediateFn(function () {\n      var cb = self._state === 1 ? deferred.onFulfilled : deferred.onRejected;\n      if (cb === null) {\n        (self._state === 1 ? resolve : reject)(deferred.promise, self._value);\n        return;\n      }\n      var ret;\n      try {\n        ret = cb(self._value);\n      } catch (e) {\n        reject(deferred.promise, e);\n        return;\n      }\n      resolve(deferred.promise, ret);\n    });\n  }\n\n  function resolve(self, newValue) {\n    try {\n      // Promise Resolution Procedure: https://github.com/promises-aplus/promises-spec#the-promise-resolution-procedure\n      if (newValue === self) throw new TypeError('A promise cannot be resolved with itself.');\n      if (newValue && (typeof newValue === 'object' || typeof newValue === 'function')) {\n        var then = newValue.then;\n        if (newValue instanceof Promise) {\n          self._state = 3;\n          self._value = newValue;\n          finale(self);\n          return;\n        } else if (typeof then === 'function') {\n          doResolve(bind(then, newValue), self);\n          return;\n        }\n      }\n      self._state = 1;\n      self._value = newValue;\n      finale(self);\n    } catch (e) {\n      reject(self, e);\n    }\n  }\n\n  function reject(self, newValue) {\n    self._state = 2;\n    self._value = newValue;\n    finale(self);\n  }\n\n  function finale(self) {\n    if (self._state === 2 && self._deferreds.length === 0) {\n      Promise._immediateFn(function() {\n        if (!self._handled) {\n          Promise._unhandledRejectionFn(self._value);\n        }\n      });\n    }\n\n    for (var i = 0, len = self._deferreds.length; i < len; i++) {\n      handle(self, self._deferreds[i]);\n    }\n    self._deferreds = null;\n  }\n\n  function Handler(onFulfilled, onRejected, promise) {\n    this.onFulfilled = typeof onFulfilled === 'function' ? onFulfilled : null;\n    this.onRejected = typeof onRejected === 'function' ? onRejected : null;\n    this.promise = promise;\n  }\n\n  /**\n   * Take a potentially misbehaving resolver function and make sure\n   * onFulfilled and onRejected are only called once.\n   *\n   * Makes no guarantees about asynchrony.\n   */\n  function doResolve(fn, self) {\n    var done = false;\n    try {\n      fn(function (value) {\n        if (done) return;\n        done = true;\n        resolve(self, value);\n      }, function (reason) {\n        if (done) return;\n        done = true;\n        reject(self, reason);\n      });\n    } catch (ex) {\n      if (done) return;\n      done = true;\n      reject(self, ex);\n    }\n  }\n\n  Promise.prototype['catch'] = function (onRejected) {\n    return this.then(null, onRejected);\n  };\n\n  Promise.prototype.then = function (onFulfilled, onRejected) {\n    var prom = new (this.constructor)(noop);\n\n    handle(this, new Handler(onFulfilled, onRejected, prom));\n    return prom;\n  };\n\n  Promise.all = function (arr) {\n    var args = Array.prototype.slice.call(arr);\n\n    return new Promise(function (resolve, reject) {\n      if (args.length === 0) return resolve([]);\n      var remaining = args.length;\n\n      function res(i, val) {\n        try {\n          if (val && (typeof val === 'object' || typeof val === 'function')) {\n            var then = val.then;\n            if (typeof then === 'function') {\n              then.call(val, function (val) {\n                res(i, val);\n              }, reject);\n              return;\n            }\n          }\n          args[i] = val;\n          if (--remaining === 0) {\n            resolve(args);\n          }\n        } catch (ex) {\n          reject(ex);\n        }\n      }\n\n      for (var i = 0; i < args.length; i++) {\n        res(i, args[i]);\n      }\n    });\n  };\n\n  Promise.resolve = function (value) {\n    if (value && typeof value === 'object' && value.constructor === Promise) {\n      return value;\n    }\n\n    return new Promise(function (resolve) {\n      resolve(value);\n    });\n  };\n\n  Promise.reject = function (value) {\n    return new Promise(function (resolve, reject) {\n      reject(value);\n    });\n  };\n\n  Promise.race = function (values) {\n    return new Promise(function (resolve, reject) {\n      for (var i = 0, len = values.length; i < len; i++) {\n        values[i].then(resolve, reject);\n      }\n    });\n  };\n\n  // Use polyfill for setImmediate for performance gains\n  Promise._immediateFn = (typeof setImmediate === 'function' && function (fn) { setImmediate(fn); }) ||\n    function (fn) {\n      setTimeoutFunc(fn, 0);\n    };\n\n  Promise._unhandledRejectionFn = function _unhandledRejectionFn(err) {\n    if (typeof console !== 'undefined' && console) {\n      console.warn('Possible Unhandled Promise Rejection:', err); // eslint-disable-line no-console\n    }\n  };\n\n  /**\n   * Set the immediate function to execute callbacks\n   * @param fn {function} Function to execute\n   * @deprecated\n   */\n  Promise._setImmediateFn = function _setImmediateFn(fn) {\n    Promise._immediateFn = fn;\n  };\n\n  /**\n   * Change the function to execute on unhandled rejection\n   * @param {function} fn Function to execute on unhandled rejection\n   * @deprecated\n   */\n  Promise._setUnhandledRejectionFn = function _setUnhandledRejectionFn(fn) {\n    Promise._unhandledRejectionFn = fn;\n  };\n  \n  if (typeof module !== 'undefined' && module.exports) {\n    module.exports = Promise;\n  } else if (!root.Promise) {\n    root.Promise = Promise;\n  }\n\n})(this);\n\n// Polyfill for creating CustomEvents on IE9/10/11\n\n// code pulled from:\n// https://github.com/d4tocchini/customevent-polyfill\n// https://developer.mozilla.org/en-US/docs/Web/API/CustomEvent#Polyfill\n\ntry {\n    var ce = new window.CustomEvent('test');\n    ce.preventDefault();\n    if (ce.defaultPrevented !== true) {\n        // IE has problems with .preventDefault() on custom events\n        // http://stackoverflow.com/questions/23349191\n        throw new Error('Could not prevent default');\n    }\n} catch(e) {\n  var CustomEvent = function(event, params) {\n    var evt, origPrevent;\n    params = params || {\n      bubbles: false,\n      cancelable: false,\n      detail: undefined\n    };\n\n    evt = document.createEvent(\"CustomEvent\");\n    evt.initCustomEvent(event, params.bubbles, params.cancelable, params.detail);\n    origPrevent = evt.preventDefault;\n    evt.preventDefault = function () {\n      origPrevent.call(this);\n      try {\n        Object.defineProperty(this, 'defaultPrevented', {\n          get: function () {\n            return true;\n          }\n        });\n      } catch(e) {\n        this.defaultPrevented = true;\n      }\n    };\n    return evt;\n  };\n\n  CustomEvent.prototype = window.Event.prototype;\n  window.CustomEvent = CustomEvent; // expose definition to window\n}\n\n// namespace\nvar cf;\n(function (cf) {\n    // interface\n    // class\n    var Helpers = /** @class */ (function () {\n        function Helpers() {\n        }\n        Helpers.lerp = function (norm, min, max) {\n            return (max - min) * norm + min;\n        };\n        Helpers.norm = function (value, min, max) {\n            return (value - min) / (max - min);\n        };\n        Helpers.getXYFromMouseTouchEvent = function (event) {\n            var touches = null;\n            if (event.originalEvent)\n                touches = event.originalEvent.touches || event.originalEvent.changedTouches;\n            else if (event.changedTouches)\n                touches = event.changedTouches;\n            if (touches) {\n                return { x: touches[0].pageX, y: touches[0].pageY, touches: touches[0] };\n            }\n            else {\n                return { x: event.pageX, y: event.pageY, touches: null };\n            }\n        };\n        Helpers.getInnerTextOfElement = function (element) {\n            var tmp = document.createElement(\"DIV\");\n            tmp.innerHTML = element.innerHTML;\n            // return \n            var text = tmp.textContent || tmp.innerText || \"\";\n            // text = String(text).replace('\\t','');\n            text = String(text).replace(/^\\s+|\\s+$/g, '');\n            return text;\n        };\n        Helpers.getMouseEvent = function (eventString) {\n            var mappings = [];\n            mappings[\"click\"] = \"ontouchstart\" in window ? \"touchstart\" : \"click\";\n            mappings[\"mousedown\"] = \"ontouchstart\" in window ? \"touchstart\" : \"mousedown\";\n            mappings[\"mouseup\"] = \"ontouchstart\" in window ? \"touchend\" : \"mouseup\";\n            mappings[\"mousemove\"] = \"ontouchstart\" in window ? \"touchmove\" : \"mousemove\";\n            return mappings[eventString];\n        };\n        Helpers.isInternetExlorer = function () {\n            var ua = window.navigator.userAgent;\n            var msie = ua.indexOf(\"MSIE \");\n            return msie > 0 || !!navigator.userAgent.match(/Trident.*rv\\:11\\./);\n        };\n        Helpers.getValuesOfBars = function (str) {\n            var strs = str.split(\"||\");\n            // TODO: remove single |\n            // fallback to the standard\n            if (strs.length <= 1)\n                strs = str.split(\"|\");\n            return strs;\n        };\n        Helpers.setTransform = function (el, transformString) {\n            el.style[\"-webkit-transform\"] = transformString;\n            el.style[\"-moz-transform\"] = transformString;\n            el.style[\"-ms-transform\"] = transformString;\n            el.style[\"transform\"] = transformString;\n        };\n        // deep extends and object, from: https://andrewdupont.net/2009/08/28/deep-extending-objects-in-javascript/\n        Helpers.extendObject = function (destination, source) {\n            for (var property in source) {\n                if (source[property] && source[property].constructor &&\n                    source[property].constructor === Object) {\n                    destination[property] = destination[property] || {};\n                    arguments.callee(destination[property], source[property]);\n                }\n                else {\n                    destination[property] = source[property];\n                }\n            }\n            return destination;\n        };\n        ;\n        Helpers.caniuse = {\n            fileReader: function () {\n                if (window.File && window.FileReader && window.FileList && window.Blob)\n                    return true;\n                return false;\n            }\n        };\n        return Helpers;\n    }());\n    cf.Helpers = Helpers;\n})(cf || (cf = {}));\n\n/// <reference path=\"../ConversationalForm.ts\"/>\nvar cf;\n(function (cf) {\n    // interface\n    var EventDispatcher = /** @class */ (function () {\n        function EventDispatcher(cfRef) {\n            if (cfRef === void 0) { cfRef = null; }\n            this._cf = cfRef;\n            this.target = document.createDocumentFragment();\n        }\n        Object.defineProperty(EventDispatcher.prototype, \"cf\", {\n            get: function () {\n                return this._cf;\n            },\n            set: function (value) {\n                this._cf = value;\n            },\n            enumerable: true,\n            configurable: true\n        });\n        EventDispatcher.prototype.addEventListener = function (type, listener, useCapture) {\n            return this.target.addEventListener(type, listener, useCapture);\n        };\n        EventDispatcher.prototype.dispatchEvent = function (event) {\n            return this.target.dispatchEvent(event);\n        };\n        EventDispatcher.prototype.removeEventListener = function (type, listener, useCapture) {\n            this.target.removeEventListener(type, listener, useCapture);\n        };\n        return EventDispatcher;\n    }());\n    cf.EventDispatcher = EventDispatcher;\n})(cf || (cf = {}));\n\n// namespace\nvar cf;\n(function (cf) {\n    // interface\n    var TagsParser = /** @class */ (function () {\n        function TagsParser() {\n        }\n        TagsParser.parseTag = function (element) {\n            var tag = document.createElement(element.tag);\n            tag.setAttribute(\"cf-formless\", \"\");\n            // TODO: ES6 mapping??\n            for (var k in element) {\n                if (k !== \"tag\" && k !== \"children\") {\n                    tag.setAttribute(k, element[k]);\n                }\n            }\n            return tag;\n        };\n        TagsParser.parseGroupTag = function (groupTag) {\n            var groupEl = TagsParser.parseTag(groupTag);\n            var groupChildren = groupTag.children;\n            for (var j = 0; j < groupChildren.length; j++) {\n                var fieldSetTagData = groupChildren[j];\n                var tag = TagsParser.parseTag(fieldSetTagData);\n                groupEl.appendChild(tag);\n            }\n            return groupEl;\n        };\n        TagsParser.parseJSONIntoElements = function (data) {\n            var formEl = document.createElement(\"form\");\n            for (var i = 0; i < data.length; i++) {\n                var element = data[i];\n                var tag = TagsParser.parseTag(element);\n                // add sub children to tag, ex. option, checkbox, etc.\n                if (element.children && element.children.length > 0) {\n                    for (var j = 0; j < element.children.length; j++) {\n                        var subElement = TagsParser.parseTag(element.children[j]);\n                        tag.appendChild(subElement);\n                    }\n                }\n                formEl.appendChild(tag);\n            }\n            return formEl;\n        };\n        TagsParser.isElementFormless = function (element) {\n            if (element.hasAttribute(\"cf-formless\"))\n                return true;\n            return false;\n        };\n        return TagsParser;\n    }());\n    cf.TagsParser = TagsParser;\n})(cf || (cf = {}));\n\n// namespace\nvar cf;\n(function (cf) {\n    // default options interface for optional parameters for the UI of Conversational Form\n    cf.UserInterfaceDefaultOptions = {\n        controlElementsInAnimationDelay: 250,\n        robot: {\n            robotResponseTime: 0,\n            chainedResponseTime: 500\n        },\n        user: {\n            showThinking: false,\n            showThumb: false\n        }\n    };\n})(cf || (cf = {}));\n\n/// <reference path=\"../logic/EventDispatcher.ts\"/>\n// namespace\nvar cf;\n(function (cf) {\n    // class\n    var BasicElement = /** @class */ (function () {\n        function BasicElement(options) {\n            this.eventTarget = options.eventTarget;\n            this.cfReference = options.cfReference;\n            if (options.customTemplate)\n                this.customTemplate = options.customTemplate;\n            // TODO: remove\n            if (!this.eventTarget)\n                throw new Error(\"this.eventTarget not set!! : \" + this.constructor.name);\n            this.setData(options);\n            this.createElement();\n            this.onElementCreated();\n        }\n        BasicElement.prototype.setData = function (options) {\n        };\n        BasicElement.prototype.onElementCreated = function () {\n        };\n        BasicElement.prototype.createElement = function () {\n            var template = document.createElement('template');\n            template.innerHTML = this.getTemplate();\n            this.el = template.firstChild || template.content.firstChild;\n            return this.el;\n        };\n        // template, should be overwritten ...\n        BasicElement.prototype.getTemplate = function () { return this.customTemplate || \"should be overwritten...\"; };\n        ;\n        BasicElement.prototype.dealloc = function () {\n            this.el.parentNode.removeChild(this.el);\n        };\n        return BasicElement;\n    }());\n    cf.BasicElement = BasicElement;\n})(cf || (cf = {}));\n\n/// <reference path=\"../../ConversationalForm.ts\"/>\n/// <reference path=\"../BasicElement.ts\"/>\n/// <reference path=\"../../form-tags/Tag.ts\"/>\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    }\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n// namespace\nvar cf;\n(function (cf) {\n    cf.ControlElementEvents = {\n        SUBMIT_VALUE: \"cf-basic-element-submit\",\n        PROGRESS_CHANGE: \"cf-basic-element-progress\",\n        ON_FOCUS: \"cf-basic-element-on-focus\",\n        ON_LOADED: \"cf-basic-element-on-loaded\",\n    };\n    cf.ControlElementProgressStates = {\n        BUSY: \"cf-control-element-progress-BUSY\",\n        READY: \"cf-control-element-progress-READY\",\n    };\n    // class\n    var ControlElement = /** @class */ (function (_super) {\n        __extends(ControlElement, _super);\n        function ControlElement(options) {\n            var _this = _super.call(this, options) || this;\n            _this.animateInTimer = 0;\n            _this._partOfSeveralChoices = false;\n            _this._focus = false;\n            _this.onFocusCallback = _this.onFocus.bind(_this);\n            _this.el.addEventListener('focus', _this.onFocusCallback, false);\n            _this.onBlurCallback = _this.onBlur.bind(_this);\n            _this.el.addEventListener('blur', _this.onBlurCallback, false);\n            if (_this.referenceTag.disabled) {\n                _this.el.setAttribute(\"disabled\", \"disabled\");\n            }\n            return _this;\n        }\n        Object.defineProperty(ControlElement.prototype, \"type\", {\n            get: function () {\n                return \"ControlElement\";\n            },\n            enumerable: true,\n            configurable: true\n        });\n        Object.defineProperty(ControlElement.prototype, \"partOfSeveralChoices\", {\n            get: function () {\n                return this._partOfSeveralChoices;\n            },\n            set: function (value) {\n                this._partOfSeveralChoices = value;\n            },\n            enumerable: true,\n            configurable: true\n        });\n        Object.defineProperty(ControlElement.prototype, \"value\", {\n            get: function () {\n                // value is for the chat response -->\n                var hasTagImage = this.referenceTag.hasImage;\n                var str;\n                if (hasTagImage && !this.partOfSeveralChoices) {\n                    // const image: string = hasTagImage ? \"<img src='\" + this.referenceTag.domElement.getAttribute(\"cf-image\") + \"'/>\" : \"\";\n                    var image = hasTagImage ? \"<img src=\\\"\" + this.referenceTag.domElement.getAttribute(\"cf-image\") + \"\\\"/>\" : \"\";\n                    // str = \"<div class='contains-image'>\"\n                    // str += image;\n                    // str += \"<span>\" + Helpers.getInnerTextOfElement(this.el) + \"</span>\";\n                    // str += \"</div>\";\n                    str = image + cf.Helpers.getInnerTextOfElement(this.el);\n                }\n                else {\n                    // str = \"<div><span>\" + Helpers.getInnerTextOfElement(this.el) + \"</span></div>\";\n                    str = cf.Helpers.getInnerTextOfElement(this.el);\n                }\n                return str;\n            },\n            enumerable: true,\n            configurable: true\n        });\n        Object.defineProperty(ControlElement.prototype, \"positionVector\", {\n            get: function () {\n                return this._positionVector;\n            },\n            enumerable: true,\n            configurable: true\n        });\n        Object.defineProperty(ControlElement.prototype, \"tabIndex\", {\n            set: function (value) {\n                this.el.tabIndex = value;\n            },\n            enumerable: true,\n            configurable: true\n        });\n        Object.defineProperty(ControlElement.prototype, \"highlight\", {\n            get: function () {\n                return this.el.classList.contains(\"highlight\");\n            },\n            set: function (value) {\n                if (value)\n                    this.el.classList.add(\"highlight\");\n                else\n                    this.el.classList.remove(\"highlight\");\n            },\n            enumerable: true,\n            configurable: true\n        });\n        Object.defineProperty(ControlElement.prototype, \"focus\", {\n            get: function () {\n                return this._focus;\n            },\n            set: function (value) {\n                this._focus = value;\n                if (this._focus)\n                    this.el.focus();\n                else\n                    this.el.blur();\n            },\n            enumerable: true,\n            configurable: true\n        });\n        Object.defineProperty(ControlElement.prototype, \"visible\", {\n            get: function () {\n                return !this.el.classList.contains(\"hide\");\n            },\n            set: function (value) {\n                if (value) {\n                    this.el.classList.remove(\"hide\");\n                }\n                else {\n                    this.el.classList.add(\"hide\");\n                    this.tabIndex = -1;\n                    this.highlight = false;\n                }\n            },\n            enumerable: true,\n            configurable: true\n        });\n        ControlElement.prototype.onBlur = function (event) {\n            this._focus = false;\n        };\n        ControlElement.prototype.onFocus = function (event) {\n            this._focus = true;\n            cf.ConversationalForm.illustrateFlow(this, \"dispatch\", cf.ControlElementEvents.ON_FOCUS, this.referenceTag);\n            this.eventTarget.dispatchEvent(new CustomEvent(cf.ControlElementEvents.ON_FOCUS, {\n                detail: this.positionVector\n            }));\n        };\n        /**\n        * @name hasImage\n        * if control element contains an image element\n        */\n        ControlElement.prototype.hasImage = function () {\n            return false;\n        };\n        ControlElement.prototype.calcPosition = function () {\n            var mr = parseInt(window.getComputedStyle(this.el).getPropertyValue(\"margin-right\"), 10);\n            // try not to do this to often, re-paint whammy!\n            this._positionVector = {\n                height: this.el.offsetHeight,\n                width: this.el.offsetWidth + mr,\n                x: this.el.offsetLeft,\n                y: this.el.offsetTop,\n                el: this,\n            };\n            this._positionVector.centerX = this._positionVector.x + (this._positionVector.width * 0.5);\n            this._positionVector.centerY = this._positionVector.y + (this._positionVector.height * 0.5);\n        };\n        ControlElement.prototype.setData = function (options) {\n            this.referenceTag = options.referenceTag;\n            _super.prototype.setData.call(this, options);\n        };\n        ControlElement.prototype.animateIn = function () {\n            clearTimeout(this.animateInTimer);\n            this.el.classList.add(\"animate-in\");\n        };\n        ControlElement.prototype.animateOut = function () {\n            this.el.classList.add(\"animate-out\");\n        };\n        ControlElement.prototype.onChoose = function () {\n            cf.ConversationalForm.illustrateFlow(this, \"dispatch\", cf.ControlElementEvents.SUBMIT_VALUE, this.referenceTag);\n            this.eventTarget.dispatchEvent(new CustomEvent(cf.ControlElementEvents.SUBMIT_VALUE, {\n                detail: this\n            }));\n        };\n        ControlElement.prototype.dealloc = function () {\n            this.el.removeEventListener('blur', this.onBlurCallback, false);\n            this.onBlurCallback = null;\n            this.el.removeEventListener('focus', this.onFocusCallback, false);\n            this.onFocusCallback = null;\n            _super.prototype.dealloc.call(this);\n        };\n        return ControlElement;\n    }(cf.BasicElement));\n    cf.ControlElement = ControlElement;\n})(cf || (cf = {}));\n\n/// <reference path=\"Button.ts\"/>\n/// <reference path=\"ControlElement.ts\"/>\n/// <reference path=\"RadioButton.ts\"/>\n/// <reference path=\"CheckboxButton.ts\"/>\n/// <reference path=\"OptionsList.ts\"/>\n/// <reference path=\"UploadFileUI.ts\"/>\n/// <reference path=\"../../logic/EventDispatcher.ts\"/>\n/// <reference path=\"../ScrollController.ts\"/>\n/// <reference path=\"../chat/ChatResponse.ts\"/>\n/// <reference path=\"../../../typings/globals/es6-promise/index.d.ts\"/>\n// namespace\nvar cf;\n(function (cf) {\n    cf.ControlElementsEvents = {\n        ON_RESIZE: \"cf-on-control-elements-resize\",\n        CHANGED: \"cf-on-control-elements-changed\"\n    };\n    var ControlElements = /** @class */ (function () {\n        function ControlElements(options) {\n            this.ignoreKeyboardInput = false;\n            this.rowIndex = -1;\n            this.columnIndex = 0;\n            this.elementWidth = 0;\n            this.filterListNumberOfVisible = 0;\n            this.listWidth = 0;\n            this.el = options.el;\n            this.eventTarget = options.eventTarget;\n            this.cfReference = options.cfReference;\n            this.list = this.el.getElementsByTagName(\"cf-list\")[0];\n            this.infoElement = options.infoEl;\n            this.onScrollCallback = this.onScroll.bind(this);\n            this.el.addEventListener('scroll', this.onScrollCallback, false);\n            this.onResizeCallback = this.onResize.bind(this);\n            window.addEventListener('resize', this.onResizeCallback, false);\n            this.onElementFocusCallback = this.onElementFocus.bind(this);\n            this.eventTarget.addEventListener(cf.ControlElementEvents.ON_FOCUS, this.onElementFocusCallback, false);\n            this.onElementLoadedCallback = this.onElementLoaded.bind(this);\n            this.eventTarget.addEventListener(cf.ControlElementEvents.ON_LOADED, this.onElementLoadedCallback, false);\n            this.onChatReponsesUpdatedCallback = this.onChatReponsesUpdated.bind(this);\n            this.eventTarget.addEventListener(cf.ChatListEvents.CHATLIST_UPDATED, this.onChatReponsesUpdatedCallback, false);\n            this.onUserInputKeyChangeCallback = this.onUserInputKeyChange.bind(this);\n            this.eventTarget.addEventListener(cf.UserInputEvents.KEY_CHANGE, this.onUserInputKeyChangeCallback, false);\n            // user input update\n            this.userInputUpdateCallback = this.onUserInputUpdate.bind(this);\n            this.eventTarget.addEventListener(cf.FlowEvents.USER_INPUT_UPDATE, this.userInputUpdateCallback, false);\n            this.listScrollController = new cf.ScrollController({\n                interactionListener: this.el,\n                listToScroll: this.list,\n                eventTarget: this.eventTarget,\n                listNavButtons: this.el.getElementsByTagName(\"cf-list-button\"),\n            });\n        }\n        Object.defineProperty(ControlElements.prototype, \"active\", {\n            get: function () {\n                return this.elements && this.elements.length > 0;\n            },\n            enumerable: true,\n            configurable: true\n        });\n        Object.defineProperty(ControlElements.prototype, \"focus\", {\n            get: function () {\n                if (!this.elements)\n                    return false;\n                var elements = this.getElements();\n                for (var i = 0; i < elements.length; i++) {\n                    var element = elements[i];\n                    if (element.focus) {\n                        return true;\n                    }\n                }\n                return false;\n            },\n            enumerable: true,\n            configurable: true\n        });\n        Object.defineProperty(ControlElements.prototype, \"highlighted\", {\n            get: function () {\n                if (!this.elements)\n                    return false;\n                var elements = this.getElements();\n                for (var i = 0; i < elements.length; i++) {\n                    var element = elements[i];\n                    if (element.highlight) {\n                        return true;\n                    }\n                }\n                return false;\n            },\n            enumerable: true,\n            configurable: true\n        });\n        Object.defineProperty(ControlElements.prototype, \"disabled\", {\n            set: function (value) {\n                if (value)\n                    this.list.classList.add(\"disabled\");\n                else\n                    this.list.classList.remove(\"disabled\");\n            },\n            enumerable: true,\n            configurable: true\n        });\n        Object.defineProperty(ControlElements.prototype, \"length\", {\n            get: function () {\n                var elements = this.getElements();\n                return elements.length;\n            },\n            enumerable: true,\n            configurable: true\n        });\n        ControlElements.prototype.onScroll = function (event) {\n            // some times the tabbing will result in el scroll, reset this.\n            this.el.scrollLeft = 0;\n        };\n        /**\n        * @name onElementLoaded\n        * when element is loaded, usally image loaded.\n        */\n        ControlElements.prototype.onElementLoaded = function (event) {\n            this.onResize(null);\n        };\n        ControlElements.prototype.onElementFocus = function (event) {\n            var vector = event.detail;\n            var x = (vector.x + vector.width < this.elementWidth ? 0 : vector.x - vector.width);\n            x *= -1;\n            this.updateRowColIndexFromVector(vector);\n            this.listScrollController.setScroll(x, 0);\n        };\n        ControlElements.prototype.updateRowColIndexFromVector = function (vector) {\n            for (var i = 0; i < this.tableableRows.length; i++) {\n                var items = this.tableableRows[i];\n                for (var j = 0; j < items.length; j++) {\n                    var item = items[j];\n                    if (item == vector.el) {\n                        this.rowIndex = i;\n                        this.columnIndex = j;\n                        break;\n                    }\n                }\n            }\n        };\n        ControlElements.prototype.onChatReponsesUpdated = function (event) {\n            var _this = this;\n            clearTimeout(this.animateInFromResponseTimer);\n            // only show when user response\n            if (!event.detail.currentResponse.isRobotResponse) {\n                this.animateInFromResponseTimer = setTimeout(function () {\n                    _this.animateElementsIn();\n                }, this.cfReference.uiOptions.controlElementsInAnimationDelay);\n            }\n        };\n        ControlElements.prototype.onListChanged = function () {\n            var _this = this;\n            // reflow\n            this.list.offsetHeight;\n            requestAnimationFrame(function () {\n                cf.ConversationalForm.illustrateFlow(_this, \"dispatch\", cf.ControlElementsEvents.CHANGED);\n                _this.eventTarget.dispatchEvent(new CustomEvent(cf.ControlElementsEvents.CHANGED));\n            });\n        };\n        ControlElements.prototype.onUserInputKeyChange = function (event) {\n            if (this.ignoreKeyboardInput) {\n                this.ignoreKeyboardInput = false;\n                return;\n            }\n            var dto = event.detail;\n            var userInput = dto.dto.input;\n            if (this.active) {\n                var isNavKey = [cf.Dictionary.keyCodes[\"left\"], cf.Dictionary.keyCodes[\"right\"], cf.Dictionary.keyCodes[\"down\"], cf.Dictionary.keyCodes[\"up\"]].indexOf(dto.keyCode) != -1;\n                var shouldFilter = dto.inputFieldActive && !isNavKey;\n                if (shouldFilter) {\n                    // input field is active, so we should filter..\n                    var dto_1 = event.detail.dto;\n                    var inputValue = dto_1.input.getInputValue();\n                    this.filterElementsFrom(inputValue);\n                }\n                else {\n                    if (dto.keyCode == cf.Dictionary.keyCodes[\"left\"]) {\n                        this.columnIndex--;\n                    }\n                    else if (dto.keyCode == cf.Dictionary.keyCodes[\"right\"]) {\n                        this.columnIndex++;\n                    }\n                    else if (dto.keyCode == cf.Dictionary.keyCodes[\"down\"]) {\n                        this.updateRowIndex(1);\n                    }\n                    else if (dto.keyCode == cf.Dictionary.keyCodes[\"up\"]) {\n                        this.updateRowIndex(-1);\n                    }\n                    else if (dto.keyCode == cf.Dictionary.keyCodes[\"enter\"] || dto.keyCode == cf.Dictionary.keyCodes[\"space\"]) {\n                        if (this.tableableRows[this.rowIndex] && this.tableableRows[this.rowIndex][this.columnIndex]) {\n                            this.tableableRows[this.rowIndex][this.columnIndex].el.click();\n                        }\n                        else if (this.tableableRows[0] && this.tableableRows[0].length == 1) {\n                            // this is when only one element in a filter, then we click it!\n                            this.tableableRows[0][0].el.click();\n                        }\n                    }\n                    if (!this.validateRowColIndexes()) {\n                        userInput.setFocusOnInput();\n                    }\n                }\n            }\n            if (!userInput.active && this.validateRowColIndexes() && this.tableableRows && (this.rowIndex == 0 || this.rowIndex == 1)) {\n                this.tableableRows[this.rowIndex][this.columnIndex].focus = true;\n            }\n            else if (!userInput.active) {\n                userInput.setFocusOnInput();\n            }\n        };\n        ControlElements.prototype.validateRowColIndexes = function () {\n            var maxRowIndex = (this.el.classList.contains(\"two-row\") ? 1 : 0);\n            if (this.rowIndex != -1 && this.tableableRows[this.rowIndex]) {\n                // columnIndex is only valid if rowIndex is valid\n                if (this.columnIndex < 0) {\n                    this.columnIndex = this.tableableRows[this.rowIndex].length - 1;\n                }\n                if (this.columnIndex > this.tableableRows[this.rowIndex].length - 1) {\n                    this.columnIndex = 0;\n                }\n                return true;\n            }\n            else {\n                this.resetTabList();\n                return false;\n            }\n        };\n        ControlElements.prototype.updateRowIndex = function (direction) {\n            var oldRowIndex = this.rowIndex;\n            this.rowIndex += direction;\n            if (this.tableableRows[this.rowIndex]) {\n                // when row index is changed we need to find the closest column element, we cannot expect them to be indexly aligned\n                var centerX = this.tableableRows[oldRowIndex] ? this.tableableRows[oldRowIndex][this.columnIndex].positionVector.centerX : 0;\n                var items = this.tableableRows[this.rowIndex];\n                var currentDistance = 10000000000000;\n                for (var i = 0; i < items.length; i++) {\n                    var element = items[i];\n                    if (currentDistance > Math.abs(centerX - element.positionVector.centerX)) {\n                        currentDistance = Math.abs(centerX - element.positionVector.centerX);\n                        this.columnIndex = i;\n                    }\n                }\n            }\n        };\n        ControlElements.prototype.resetTabList = function () {\n            this.rowIndex = -1;\n            this.columnIndex = -1;\n        };\n        ControlElements.prototype.onUserInputUpdate = function (event) {\n            this.el.classList.remove(\"animate-in\");\n            this.infoElement.classList.remove(\"show\");\n            if (this.elements) {\n                var elements = this.getElements();\n                for (var i = 0; i < elements.length; i++) {\n                    var element = elements[i];\n                    element.animateOut();\n                }\n            }\n        };\n        ControlElements.prototype.filterElementsFrom = function (value) {\n            var inputValuesLowerCase = value.toLowerCase().split(\" \");\n            if (inputValuesLowerCase.indexOf(\"\") != -1)\n                inputValuesLowerCase.splice(inputValuesLowerCase.indexOf(\"\"), 1);\n            var elements = this.getElements();\n            if (elements.length > 1) {\n                // the type is not strong with this one..\n                var itemsVisible = [];\n                for (var i = 0; i < elements.length; i++) {\n                    var element = elements[i];\n                    element.highlight = false;\n                    var elementVisibility = true;\n                    // check for all words of input\n                    for (var i_1 = 0; i_1 < inputValuesLowerCase.length; i_1++) {\n                        var inputWord = inputValuesLowerCase[i_1];\n                        if (elementVisibility) {\n                            elementVisibility = element.value.toLowerCase().indexOf(inputWord) != -1;\n                        }\n                    }\n                    // set element visibility.\n                    element.visible = elementVisibility;\n                    if (elementVisibility && element.visible)\n                        itemsVisible.push(element);\n                }\n                // set feedback text for filter..\n                this.infoElement.innerHTML = itemsVisible.length == 0 ? cf.Dictionary.get(\"input-no-filter\").split(\"{input-value}\").join(value) : \"\";\n                if (itemsVisible.length == 0) {\n                    this.infoElement.classList.add(\"show\");\n                }\n                else {\n                    this.infoElement.classList.remove(\"show\");\n                }\n                // crude way of checking if list has changed...\n                var hasListChanged = this.filterListNumberOfVisible != itemsVisible.length;\n                if (hasListChanged) {\n                    this.animateElementsIn();\n                }\n                this.filterListNumberOfVisible = itemsVisible.length;\n                // highlight first item\n                if (value != \"\" && this.filterListNumberOfVisible > 0)\n                    itemsVisible[0].highlight = true;\n            }\n        };\n        ControlElements.prototype.clickOnHighlighted = function () {\n            var elements = this.getElements();\n            for (var i = 0; i < elements.length; i++) {\n                var element = elements[i];\n                if (element.highlight) {\n                    element.el.click();\n                    break;\n                }\n            }\n        };\n        ControlElements.prototype.animateElementsIn = function () {\n            var _this = this;\n            if (this.elements.length > 0) {\n                this.resize();\n                // this.el.style.transition = 'height 0.35s ease-out 0.2s';\n                this.list.style.height = '0px';\n                setTimeout(function () {\n                    _this.list.style.height = _this.list.scrollHeight + 'px';\n                    var elements = _this.getElements();\n                    setTimeout(function () {\n                        if (elements.length > 0) {\n                            if (!_this.el.classList.contains(\"animate-in\"))\n                                _this.el.classList.add(\"animate-in\");\n                            for (var i = 0; i < elements.length; i++) {\n                                var element = elements[i];\n                                element.animateIn();\n                            }\n                        }\n                        document.querySelector('.scrollableInner').classList.remove('scroll');\n                        // Check if chatlist is scrolled to the bottom - if not we need to do it manually (pertains to Chrome)\n                        var scrollContainer = document.querySelector('scrollable');\n                        if (scrollContainer.scrollTop < scrollContainer.scrollHeight) {\n                            scrollContainer.scrollTop = scrollContainer.scrollHeight;\n                        }\n                    }, 300);\n                }, 200);\n            }\n        };\n        ControlElements.prototype.getElements = function () {\n            if (this.elements && this.elements.length > 0 && this.elements[0].type == \"OptionsList\")\n                return this.elements[0].elements;\n            return this.elements;\n        };\n        /**\n        * @name buildTabableRows\n        * build the tabable array index\n        */\n        ControlElements.prototype.buildTabableRows = function () {\n            this.tableableRows = [];\n            this.resetTabList();\n            var elements = this.getElements();\n            if (this.el.classList.contains(\"two-row\")) {\n                // two rows\n                this.tableableRows[0] = [];\n                this.tableableRows[1] = [];\n                for (var i = 0; i < elements.length; i++) {\n                    var element = elements[i];\n                    if (element.visible) {\n                        // crude way of checking if element is top row or bottom row..\n                        if (element.positionVector.y < 30)\n                            this.tableableRows[0].push(element);\n                        else\n                            this.tableableRows[1].push(element);\n                    }\n                }\n            }\n            else {\n                // single row\n                this.tableableRows[0] = [];\n                for (var i = 0; i < elements.length; i++) {\n                    var element = elements[i];\n                    if (element.visible)\n                        this.tableableRows[0].push(element);\n                }\n            }\n        };\n        ControlElements.prototype.resetAfterErrorMessage = function () {\n            this.currentControlElement = null;\n            this.disabled = false;\n        };\n        ControlElements.prototype.focusFrom = function (angle) {\n            if (!this.tableableRows)\n                return;\n            this.columnIndex = 0;\n            if (angle == \"bottom\") {\n                this.rowIndex = this.el.classList.contains(\"two-row\") ? 1 : 0;\n            }\n            else if (angle == \"top\") {\n                this.rowIndex = 0;\n            }\n            if (this.tableableRows[this.rowIndex] && this.tableableRows[this.rowIndex][this.columnIndex]) {\n                this.ignoreKeyboardInput = true;\n                if (!this.cfReference.options.preventAutoFocus) {\n                    this.tableableRows[this.rowIndex][this.columnIndex].focus = true;\n                }\n            }\n            else {\n                this.resetTabList();\n            }\n        };\n        ControlElements.prototype.updateStateOnElementsFromTag = function (tag) {\n            for (var index = 0; index < this.elements.length; index++) {\n                var element = this.elements[index];\n                if (element.referenceTag == tag) {\n                    this.updateStateOnElements(element);\n                    break;\n                }\n            }\n        };\n        ControlElements.prototype.updateStateOnElements = function (controlElement) {\n            this.currentControlElement = controlElement;\n            if (this.currentControlElement.type == \"RadioButton\") {\n                // uncheck other radio buttons...\n                var elements = this.getElements();\n                for (var i = 0; i < elements.length; i++) {\n                    var element = elements[i];\n                    if (element != controlElement) {\n                        element.checked = false;\n                    }\n                    else {\n                        element.checked = true;\n                    }\n                }\n            }\n            else if (this.currentControlElement.type == \"CheckboxButton\") {\n                // change only the changed input\n                var elements = this.getElements();\n                for (var i = 0; i < elements.length; i++) {\n                    var element = elements[i];\n                    if (element == controlElement) {\n                        var isChecked = element.referenceTag.domElement.checked;\n                        element.checked = isChecked;\n                    }\n                }\n            }\n        };\n        ControlElements.prototype.reset = function () {\n            this.infoElement.classList.remove(\"show\");\n            this.el.classList.remove(\"one-row\");\n            this.el.classList.remove(\"two-row\");\n            // this.el.style.transition = 'height 0.35s ease-out 0.2s';\n            this.list.style.height = '0px';\n        };\n        ControlElements.prototype.getElement = function (index) {\n            return this.elements[index];\n        };\n        ControlElements.prototype.getDTO = function () {\n            var dto = {\n                text: undefined,\n                controlElements: [],\n            };\n            // generate text value for ChatReponse\n            if (this.elements && this.elements.length > 0) {\n                switch (this.elements[0].type) {\n                    case \"CheckboxButton\":\n                        var numChecked = 0; // check if more than 1 is checked.\n                        var values = [];\n                        for (var i = 0; i < this.elements.length; i++) {\n                            var element_1 = this.elements[i];\n                            if (element_1.checked) {\n                                if (numChecked++ > 1)\n                                    break;\n                            }\n                        }\n                        for (var i = 0; i < this.elements.length; i++) {\n                            var element_2 = this.elements[i];\n                            if (element_2.checked) {\n                                if (numChecked > 1)\n                                    element_2.partOfSeveralChoices = true;\n                                values.push(element_2.value);\n                            }\n                            dto.controlElements.push(element_2);\n                        }\n                        dto.text = cf.Dictionary.parseAndGetMultiValueString(values);\n                        break;\n                    case \"RadioButton\":\n                        for (var i = 0; i < this.elements.length; i++) {\n                            var element_3 = this.elements[i];\n                            if (element_3.checked) {\n                                dto.text = element_3.value;\n                            }\n                            dto.controlElements.push(element_3);\n                        }\n                        break;\n                    case \"OptionsList\":\n                        var element = this.elements[0];\n                        dto.controlElements = element.getValue();\n                        var values = [];\n                        if (dto.controlElements && dto.controlElements[0]) {\n                            for (var i_2 = 0; i_2 < dto.controlElements.length; i_2++) {\n                                var element_4 = dto.controlElements[i_2];\n                                values.push(dto.controlElements[i_2].value);\n                            }\n                        }\n                        // after value is created then set to all elements\n                        dto.controlElements = element.elements;\n                        dto.text = cf.Dictionary.parseAndGetMultiValueString(values);\n                        break;\n                    case \"UploadFileUI\":\n                        dto.text = this.elements[0].getFilesAsString(); //Dictionary.parseAndGetMultiValueString(values);\n                        dto.controlElements.push(this.elements[0]);\n                        break;\n                }\n            }\n            return dto;\n        };\n        ControlElements.prototype.clearTagsAndReset = function () {\n            this.reset();\n            if (this.elements) {\n                while (this.elements.length > 0) {\n                    this.elements.pop().dealloc();\n                }\n            }\n            this.list.innerHTML = \"\";\n            this.onListChanged();\n        };\n        ControlElements.prototype.buildTags = function (tags) {\n            var _this = this;\n            this.disabled = false;\n            var topList = this.el.parentNode.getElementsByTagName(\"ul\")[0];\n            var bottomList = this.el.parentNode.getElementsByTagName(\"ul\")[1];\n            // remove old elements\n            this.clearTagsAndReset();\n            this.elements = [];\n            for (var i = 0; i < tags.length; i++) {\n                var tag = tags[i];\n                switch (tag.type) {\n                    case \"radio\":\n                        this.elements.push(new cf.RadioButton({\n                            referenceTag: tag,\n                            eventTarget: this.eventTarget\n                        }));\n                        break;\n                    case \"checkbox\":\n                        this.elements.push(new cf.CheckboxButton({\n                            referenceTag: tag,\n                            eventTarget: this.eventTarget\n                        }));\n                        break;\n                    case \"select\":\n                        this.elements.push(new cf.OptionsList({\n                            referenceTag: tag,\n                            context: this.list,\n                            eventTarget: this.eventTarget\n                        }));\n                        break;\n                    case \"input\":\n                    default:\n                        if (tag.type == \"file\") {\n                            this.elements.push(new cf.UploadFileUI({\n                                referenceTag: tag,\n                                eventTarget: this.eventTarget\n                            }));\n                        }\n                        // nothing to add.\n                        break;\n                }\n                if (tag.type != \"select\" && this.elements.length > 0) {\n                    var element = this.elements[this.elements.length - 1];\n                    this.list.appendChild(element.el);\n                }\n            }\n            var isElementsOptionsList = this.elements[0] && this.elements[0].type == \"OptionsList\";\n            if (isElementsOptionsList) {\n                this.filterListNumberOfVisible = this.elements[0].elements.length;\n            }\n            else {\n                this.filterListNumberOfVisible = tags.length;\n            }\n            new Promise(function (resolve, reject) { return _this.resize(resolve, reject); }).then(function () {\n                var h = _this.list.offsetHeight; //this.el.classList.contains(\"one-row\") ? 52 : this.el.classList.contains(\"two-row\") ? 102 : 0;\n                var controlElementsAddedDTO = {\n                    height: h,\n                };\n                _this.onListChanged();\n                cf.ConversationalForm.illustrateFlow(_this, \"dispatch\", cf.UserInputEvents.CONTROL_ELEMENTS_ADDED, controlElementsAddedDTO);\n                _this.eventTarget.dispatchEvent(new CustomEvent(cf.UserInputEvents.CONTROL_ELEMENTS_ADDED, {\n                    detail: controlElementsAddedDTO\n                }));\n            });\n        };\n        ControlElements.prototype.onResize = function (event) {\n            this.resize();\n        };\n        ControlElements.prototype.resize = function (resolve, reject) {\n            // scrollbar things\n            // Element.offsetWidth - Element.clientWidth\n            this.list.style.width = \"100%\";\n            this.el.classList.remove(\"resized\");\n            this.el.classList.remove(\"one-row\");\n            this.el.classList.remove(\"two-row\");\n            this.elementWidth = 0;\n            this.listWidth = 0;\n            var elements = this.getElements();\n            if (elements && elements.length > 0) {\n                var listWidthValues = [];\n                var listWidthValues2 = [];\n                var containsElementWithImage = false;\n                for (var i = 0; i < elements.length; i++) {\n                    var element = elements[i];\n                    if (element.visible) {\n                        element.calcPosition();\n                        this.listWidth += element.positionVector.width;\n                        listWidthValues.push(element.positionVector.x + element.positionVector.width);\n                        listWidthValues2.push(element);\n                    }\n                    if (element.hasImage())\n                        containsElementWithImage = true;\n                }\n                var elOffsetWidth = this.el.offsetWidth;\n                var isListWidthOverElementWidth = this.listWidth > elOffsetWidth;\n                if (isListWidthOverElementWidth && !containsElementWithImage) {\n                    this.el.classList.add(\"two-row\");\n                    this.listWidth = Math.max(elOffsetWidth, Math.round((listWidthValues[Math.floor(listWidthValues.length / 2)]) + 50));\n                    this.list.style.width = this.listWidth + \"px\";\n                }\n                else {\n                    this.el.classList.add(\"one-row\");\n                }\n                // recalc after LIST classes has been added\n                for (var i = 0; i < elements.length; i++) {\n                    var element = elements[i];\n                    if (element.visible) {\n                        element.calcPosition();\n                    }\n                }\n                // check again after classes are set.\n                elOffsetWidth = this.el.offsetWidth;\n                isListWidthOverElementWidth = this.listWidth > elOffsetWidth;\n                // sort the list so we can set tabIndex properly\n                var elementsCopyForSorting = elements.slice();\n                var tabIndexFilteredElements = elementsCopyForSorting.sort(function (a, b) {\n                    var aOverB = a.positionVector.y > b.positionVector.y;\n                    return a.positionVector.x == b.positionVector.x ? (aOverB ? 1 : -1) : a.positionVector.x < b.positionVector.x ? -1 : 1;\n                });\n                var tabIndex = 0;\n                for (var i = 0; i < tabIndexFilteredElements.length; i++) {\n                    var element = tabIndexFilteredElements[i];\n                    if (element.visible) {\n                        //tabindex 1 are the UserTextInput element\n                        element.tabIndex = 2 + (tabIndex++);\n                    }\n                    else {\n                        element.tabIndex = -1;\n                    }\n                }\n                // toggle nav button visiblity\n                if (isListWidthOverElementWidth) {\n                    this.el.classList.remove(\"hide-nav-buttons\");\n                }\n                else {\n                    this.el.classList.add(\"hide-nav-buttons\");\n                }\n                this.elementWidth = elOffsetWidth;\n                // resize scroll\n                this.listScrollController.resize(this.listWidth, this.elementWidth);\n                this.el.classList.add(\"resized\");\n                this.eventTarget.dispatchEvent(new CustomEvent(cf.ControlElementsEvents.ON_RESIZE));\n                if (resolve) {\n                    // only build when there is something to resolve\n                    this.buildTabableRows();\n                    resolve();\n                }\n            }\n        };\n        ControlElements.prototype.dealloc = function () {\n            this.currentControlElement = null;\n            this.tableableRows = null;\n            window.removeEventListener('resize', this.onResizeCallback, false);\n            this.onResizeCallback = null;\n            this.el.removeEventListener('scroll', this.onScrollCallback, false);\n            this.onScrollCallback = null;\n            this.eventTarget.removeEventListener(cf.ControlElementEvents.ON_FOCUS, this.onElementFocusCallback, false);\n            this.onElementFocusCallback = null;\n            this.eventTarget.removeEventListener(cf.ChatListEvents.CHATLIST_UPDATED, this.onChatReponsesUpdatedCallback, false);\n            this.onChatReponsesUpdatedCallback = null;\n            this.eventTarget.removeEventListener(cf.UserInputEvents.KEY_CHANGE, this.onUserInputKeyChangeCallback, false);\n            this.onUserInputKeyChangeCallback = null;\n            this.eventTarget.removeEventListener(cf.FlowEvents.USER_INPUT_UPDATE, this.userInputUpdateCallback, false);\n            this.userInputUpdateCallback = null;\n            this.eventTarget.removeEventListener(cf.ControlElementEvents.ON_LOADED, this.onElementLoadedCallback, false);\n            this.onElementLoadedCallback = null;\n            this.listScrollController.dealloc();\n        };\n        return ControlElements;\n    }());\n    cf.ControlElements = ControlElements;\n})(cf || (cf = {}));\n\n/// <reference path=\"../logic/Helpers.ts\"/>\n/// <reference path=\"../logic/EventDispatcher.ts\"/>\n// namespace\nvar cf;\n(function (cf) {\n    var ScrollController = /** @class */ (function () {\n        function ScrollController(options) {\n            this.listWidth = 0;\n            this.visibleAreaWidth = 0;\n            this.max = 0;\n            this.interacting = false;\n            this.x = 0;\n            this.xTarget = 0;\n            this.startX = 0;\n            this.startXTarget = 0;\n            this.mouseSpeed = 0;\n            this.mouseSpeedTarget = 0;\n            this.direction = 0;\n            this.directionTarget = 0;\n            this.inputAccerlation = 0;\n            this.inputAccerlationTarget = 0;\n            this.interactionListener = options.interactionListener;\n            this.eventTarget = options.eventTarget;\n            this.listToScroll = options.listToScroll;\n            this.prevButton = options.listNavButtons[0];\n            this.nextButton = options.listNavButtons[1];\n            this.onListNavButtonsClickCallback = this.onListNavButtonsClick.bind(this);\n            this.prevButton.addEventListener(\"click\", this.onListNavButtonsClickCallback, false);\n            this.nextButton.addEventListener(\"click\", this.onListNavButtonsClickCallback, false);\n            this.documentLeaveCallback = this.documentLeave.bind(this);\n            this.onInteractStartCallback = this.onInteractStart.bind(this);\n            this.onInteractEndCallback = this.onInteractEnd.bind(this);\n            this.onInteractMoveCallback = this.onInteractMove.bind(this);\n            document.addEventListener(\"mouseleave\", this.documentLeaveCallback, false);\n            document.addEventListener(cf.Helpers.getMouseEvent(\"mouseup\"), this.documentLeaveCallback, false);\n            this.interactionListener.addEventListener(cf.Helpers.getMouseEvent(\"mousedown\"), this.onInteractStartCallback, false);\n            this.interactionListener.addEventListener(cf.Helpers.getMouseEvent(\"mouseup\"), this.onInteractEndCallback, false);\n            this.interactionListener.addEventListener(cf.Helpers.getMouseEvent(\"mousemove\"), this.onInteractMoveCallback, false);\n        }\n        ScrollController.prototype.onListNavButtonsClick = function (event) {\n            var dirClick = event.currentTarget.getAttribute(\"direction\");\n            this.pushDirection(dirClick == \"next\" ? -1 : 1);\n        };\n        ScrollController.prototype.documentLeave = function (event) {\n            this.onInteractEnd(event);\n        };\n        ScrollController.prototype.onInteractStart = function (event) {\n            var vector = cf.Helpers.getXYFromMouseTouchEvent(event);\n            this.interacting = true;\n            this.startX = vector.x;\n            this.startXTarget = this.startX;\n            this.inputAccerlation = 0;\n            this.render();\n        };\n        ScrollController.prototype.onInteractEnd = function (event) {\n            this.interacting = false;\n        };\n        ScrollController.prototype.onInteractMove = function (event) {\n            if (this.interacting) {\n                var vector = cf.Helpers.getXYFromMouseTouchEvent(event);\n                var newAcc = vector.x - this.startX;\n                var magnifier = 6.2;\n                this.inputAccerlationTarget = newAcc * magnifier;\n                this.directionTarget = this.inputAccerlationTarget < 0 ? -1 : 1;\n                this.startXTarget = vector.x;\n            }\n        };\n        ScrollController.prototype.render = function () {\n            var _this = this;\n            if (this.rAF)\n                cancelAnimationFrame(this.rAF);\n            // normalise startX\n            this.startX += (this.startXTarget - this.startX) * 0.2;\n            // animate accerlaration\n            this.inputAccerlation += (this.inputAccerlationTarget - this.inputAccerlation) * (this.interacting ? Math.min(ScrollController.acceleration + 0.1, 1) : ScrollController.acceleration);\n            var accDamping = 0.25;\n            this.inputAccerlationTarget *= accDamping;\n            // animate directions\n            this.direction += (this.directionTarget - this.direction) * 0.2;\n            // extra extra\n            this.mouseSpeed += (this.mouseSpeedTarget - this.mouseSpeed) * 0.2;\n            this.direction += this.mouseSpeed;\n            // animate x\n            this.xTarget += this.inputAccerlation * 0.05;\n            // bounce back when over\n            if (this.xTarget > 0)\n                this.xTarget += (0 - this.xTarget) * cf.Helpers.lerp(ScrollController.acceleration, 0.3, 0.8);\n            if (this.xTarget < this.max)\n                this.xTarget += (this.max - this.xTarget) * cf.Helpers.lerp(ScrollController.acceleration, 0.3, 0.8);\n            this.x += (this.xTarget - this.x) * 0.4;\n            // toggle visibility on nav arrows\n            var xRounded = Math.round(this.x);\n            if (xRounded < 0) {\n                if (!this.prevButton.classList.contains(\"active\"))\n                    this.prevButton.classList.add(\"active\");\n                if (!this.prevButton.classList.contains(\"cf-gradient\"))\n                    this.prevButton.classList.add(\"cf-gradient\");\n            }\n            if (xRounded == 0) {\n                if (this.prevButton.classList.contains(\"active\"))\n                    this.prevButton.classList.remove(\"active\");\n                if (this.prevButton.classList.contains(\"cf-gradient\"))\n                    this.prevButton.classList.remove(\"cf-gradient\");\n            }\n            if (xRounded > this.max) {\n                if (!this.nextButton.classList.contains(\"active\"))\n                    this.nextButton.classList.add(\"active\");\n                if (!this.nextButton.classList.contains(\"cf-gradient\"))\n                    this.nextButton.classList.add(\"cf-gradient\");\n            }\n            if (xRounded <= this.max) {\n                if (this.nextButton.classList.contains(\"active\"))\n                    this.nextButton.classList.remove(\"active\");\n                if (this.nextButton.classList.contains(\"cf-gradient\"))\n                    this.nextButton.classList.remove(\"cf-gradient\");\n            }\n            // set css transforms\n            var xx = this.x;\n            cf.Helpers.setTransform(this.listToScroll, \"translateX(\" + xx + \"px)\");\n            // cycle render\n            if (this.interacting || (Math.abs(this.x - this.xTarget) > 0.02 && !this.interacting))\n                this.rAF = window.requestAnimationFrame(function () { return _this.render(); });\n        };\n        ScrollController.prototype.setScroll = function (x, y) {\n            this.xTarget = this.visibleAreaWidth == this.listWidth ? 0 : x;\n            this.render();\n        };\n        ScrollController.prototype.pushDirection = function (dir) {\n            this.inputAccerlationTarget += (5000) * dir;\n            this.render();\n        };\n        ScrollController.prototype.dealloc = function () {\n            this.prevButton.removeEventListener(\"click\", this.onListNavButtonsClickCallback, false);\n            this.nextButton.removeEventListener(\"click\", this.onListNavButtonsClickCallback, false);\n            this.onListNavButtonsClickCallback = null;\n            this.prevButton = null;\n            this.nextButton = null;\n            document.removeEventListener(\"mouseleave\", this.documentLeaveCallback, false);\n            document.removeEventListener(cf.Helpers.getMouseEvent(\"mouseup\"), this.documentLeaveCallback, false);\n            this.interactionListener.removeEventListener(cf.Helpers.getMouseEvent(\"mousedown\"), this.onInteractStartCallback, false);\n            this.interactionListener.removeEventListener(cf.Helpers.getMouseEvent(\"mouseup\"), this.onInteractEndCallback, false);\n            this.interactionListener.removeEventListener(cf.Helpers.getMouseEvent(\"mousemove\"), this.onInteractMoveCallback, false);\n            this.documentLeaveCallback = null;\n            this.onInteractStartCallback = null;\n            this.onInteractEndCallback = null;\n            this.onInteractMoveCallback = null;\n        };\n        ScrollController.prototype.reset = function () {\n            this.interacting = false;\n            this.startX = 0;\n            this.startXTarget = this.startX;\n            this.inputAccerlation = 0;\n            this.x = 0;\n            this.xTarget = 0;\n            cf.Helpers.setTransform(this.listToScroll, \"translateX(0px)\");\n            this.render();\n            this.prevButton.classList.remove(\"active\");\n            this.nextButton.classList.remove(\"active\");\n        };\n        ScrollController.prototype.resize = function (listWidth, visibleAreaWidth) {\n            this.reset();\n            this.visibleAreaWidth = visibleAreaWidth;\n            this.listWidth = Math.max(visibleAreaWidth, listWidth);\n            this.max = (this.listWidth - this.visibleAreaWidth) * -1;\n            this.render();\n        };\n        ScrollController.acceleration = 0.1;\n        return ScrollController;\n    }());\n    cf.ScrollController = ScrollController;\n})(cf || (cf = {}));\n\n/// <reference path=\"../logic/FlowManager.ts\"/>\n// namespace\nvar cf;\n(function (cf) {\n    // interface\n    // class\n    var ProgressBar = /** @class */ (function () {\n        function ProgressBar(options) {\n            var _this = this;\n            this.flowUpdateCallback = this.onFlowUpdate.bind(this);\n            this.eventTarget = options.eventTarget;\n            this.eventTarget.addEventListener(cf.FlowEvents.FLOW_UPDATE, this.flowUpdateCallback, false);\n            this.eventTarget.addEventListener(cf.FlowEvents.FORM_SUBMIT, function () { return _this.setWidth(100); }, false);\n            this.el = document.createElement(\"div\");\n            this.el.className = \"cf-progressBar\";\n            this.bar = document.createElement(\"div\");\n            this.bar.className = 'bar';\n            this.el.appendChild(this.bar);\n            setTimeout(function () { return _this.init(); }, 800);\n        }\n        ProgressBar.prototype.init = function () {\n            this.el.classList.add('show');\n        };\n        ProgressBar.prototype.onFlowUpdate = function (event) {\n            this.setWidth(event.detail.step / event.detail.maxSteps * 100);\n        };\n        ProgressBar.prototype.setWidth = function (percentage) {\n            this.bar.style.width = percentage + \"%\";\n        };\n        ProgressBar.prototype.dealloc = function () {\n            this.eventTarget.removeEventListener(cf.FlowEvents.FLOW_UPDATE, this.flowUpdateCallback, false);\n            this.flowUpdateCallback = null;\n        };\n        return ProgressBar;\n    }());\n    cf.ProgressBar = ProgressBar;\n})(cf || (cf = {}));\n\n/// <reference path=\"../logic/Helpers.ts\"/>\n// namespace\nvar cf;\n(function (cf) {\n    // class\n    var Dictionary = /** @class */ (function () {\n        function Dictionary(options) {\n            // can be overwrittenMicrophone error\n            this.data = {\n                \"user-image\": 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAwIiBoZWlnaHQ9IjIwMCIgdmlld0JveD0iMCAwIDIwMCAyMDAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxjaXJjbGUgY3g9IjEwMCIgY3k9IjEwMCIgcj0iMTAwIiBmaWxsPSIjMzAzMDMwIi8+CjxwYXRoIGQ9Ik0xMDAgNTVMMTM4Ljk3MSAxMjIuNUg2MS4wMjg5TDEwMCA1NVoiIGZpbGw9IiNFNUU2RUEiLz4KPC9zdmc+Cg==',\n                \"entry-not-found\": \"Dictionary item not found.\",\n                \"awaiting-mic-permission\": \"Awaiting mic permission\",\n                \"user-audio-reponse-invalid\": \"I didn't get that, try again.\",\n                \"microphone-terminal-error\": \"Audio input not supported\",\n                \"input-placeholder\": \"Type your answer here ...\",\n                \"group-placeholder\": \"Type to filter ...\",\n                \"input-placeholder-error\": \"Your input is not correct ...\",\n                \"input-placeholder-required\": \"Input is required ...\",\n                \"input-placeholder-file-error\": \"File upload failed ...\",\n                \"input-placeholder-file-size-error\": \"File size too big ...\",\n                \"input-no-filter\": \"No results found for {input-value}\",\n                \"user-reponse-and\": \" and \",\n                \"user-reponse-missing\": \"Missing input ...\",\n                \"user-reponse-missing-group\": \"Nothing selected ...\",\n                \"general\": \"General type1||General type2\",\n                \"icon-type-file\": \"<svg class='cf-icon-file' viewBox='0 0 10 14' version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'><g stroke='none' stroke-width='1' fill='none' fill-rule='evenodd'><g transform='translate(-756.000000, -549.000000)' fill='#0D83FF'><g transform='translate(736.000000, 127.000000)'><g transform='translate(0.000000, 406.000000)'><polygon points='20 16 26.0030799 16 30 19.99994 30 30 20 30'></polygon></g></g></g></g></svg>\",\n            };\n            // can be overwriten\n            this.robotData = {\n                \"robot-image\": 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAwIiBoZWlnaHQ9IjIwMCIgdmlld0JveD0iMCAwIDIwMCAyMDAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxjaXJjbGUgY3g9IjEwMCIgY3k9IjEwMCIgcj0iMTAwIiBmaWxsPSIjRTVFNkVBIi8+CjxyZWN0IHg9IjY2IiB5PSI2NiIgd2lkdGg9IjY4IiBoZWlnaHQ9IjY4IiBmaWxsPSIjMzAzMDMwIi8+Cjwvc3ZnPgo=',\n                \"input\": \"Please write some text.\",\n                \"text\": \"Please write some text.\",\n                \"textarea\": \"Please write some text.\",\n                \"checkbox\": \"Select as many as you want.\",\n                \"name\": \"What's your name?\",\n                \"email\": \"Need your e-mail.\",\n                \"password\": \"Please provide password\",\n                \"tel\": \"What's your phone number?\",\n                \"radio\": \"I need you to select one of these.\",\n                \"select\": \"Choose any of these options.\",\n                \"file\": \"Select a file to upload.\",\n                \"general\": \"General1||General2||General3..\"\n            };\n            Dictionary.instance = this;\n            this.version = options.version;\n            // overwrite data if defined \n            if (options && options.data)\n                this.data = this.validateAndSetNewData(options.data, this.data);\n            // overwrite user image\n            if (options.userImage) {\n                this.data[\"user-image\"] = options.userImage;\n            }\n            else {\n                this.data['user-image'] = this.data['user-image'];\n            }\n            // overwrite robot image\n            if (options.robotImage) {\n                this.robotData[\"robot-image\"] = options.robotImage;\n            }\n            else {\n                this.robotData['robot-image'] = this.robotData['robot-image'];\n            }\n            // overwrite robot questions if defined\n            if (options && options.robotData)\n                this.robotData = this.validateAndSetNewData(options.robotData, this.robotData);\n        }\n        Dictionary.get = function (id) {\n            var ins = Dictionary.instance;\n            var value = ins.data[id];\n            if (!value) {\n                value = ins.data[\"entry-not-found\"];\n            }\n            else {\n                var values = cf.Helpers.getValuesOfBars(value);\n                value = values[Math.floor(Math.random() * values.length)];\n            }\n            return value;\n        };\n        /**\n        * @name set\n        * set a dictionary value\n        *\tid: string, id of the value to update\n        *\ttype: string, \"human\" || \"robot\"\n        *\tvalue: string, value to be inserted\n        */\n        Dictionary.set = function (id, type, value) {\n            var ins = Dictionary.instance;\n            var obj = type == \"robot\" ? ins.robotData : ins.data;\n            obj[id] = value;\n            return obj[id];\n        };\n        Dictionary.getRobotResponse = function (tagType) {\n            var ins = Dictionary.instance;\n            var value = ins.robotData[tagType];\n            if (!value) {\n                // value not found, so pick a general one\n                var generals = cf.Helpers.getValuesOfBars(ins.robotData[\"general\"]);\n                value = generals[Math.floor(Math.random() * generals.length)];\n            }\n            else {\n                var values = cf.Helpers.getValuesOfBars(value);\n                value = values[Math.floor(Math.random() * values.length)];\n            }\n            return value;\n        };\n        Dictionary.parseAndGetMultiValueString = function (arr) {\n            // check ControlElement.ts for value(s)\n            var value = \"\";\n            for (var i = 0; i < arr.length; i++) {\n                var str = arr[i];\n                var sym = (arr.length > 1 && i == arr.length - 2 ? Dictionary.get(\"user-reponse-and\") : \", \");\n                value += str + (i < arr.length - 1 ? sym : \"\");\n            }\n            return value;\n        };\n        Dictionary.prototype.validateAndSetNewData = function (newData, originalDataObject) {\n            for (var key in originalDataObject) {\n                if (!newData[key]) {\n                    console.warn(\"Conversational Form Dictionary warning, '\" + key + \"' value is undefined, mapping '\" + key + \"' to default value. See Dictionary.ts for keys.\");\n                    newData[key] = originalDataObject[key];\n                }\n            }\n            return newData;\n        };\n        Dictionary.keyCodes = {\n            \"left\": 37,\n            \"right\": 39,\n            \"down\": 40,\n            \"up\": 38,\n            \"backspace\": 8,\n            \"enter\": 13,\n            \"space\": 32,\n            \"shift\": 16,\n            \"tab\": 9,\n        };\n        return Dictionary;\n    }());\n    cf.Dictionary = Dictionary;\n})(cf || (cf = {}));\n\n/// <reference path=\"../data/Dictionary.ts\"/>\n/// <reference path=\"InputTag.ts\"/>\n/// <reference path=\"ButtonTag.ts\"/>\n/// <reference path=\"SelectTag.ts\"/>\n/// <reference path=\"OptionTag.ts\"/>\n/// <reference path=\"CfRobotMessageTag.ts\"/>\n/// <reference path=\"../ConversationalForm.ts\"/>\n/// <reference path=\"../logic/EventDispatcher.ts\"/>\n/// <reference path=\"../parsing/TagsParser.ts\"/>\n// basic tag from form logic\n// types:\n// radio\n// text\n// email\n// tel\n// password\n// checkbox\n// radio\n// select\n// button\n// namespace\nvar cf;\n(function (cf) {\n    cf.TagEvents = {\n        ORIGINAL_ELEMENT_CHANGED: \"cf-tag-dom-element-changed\"\n    };\n    // class\n    var Tag = /** @class */ (function () {\n        function Tag(options) {\n            this.domElement = options.domElement;\n            this.initialDefaultValue = this.domElement.value || this.domElement.getAttribute(\"value\") || \"\";\n            this.changeCallback = this.onDomElementChange.bind(this);\n            this.domElement.addEventListener(\"change\", this.changeCallback, false);\n            // remove tabIndex from the dom element.. danger zone... should we or should we not...\n            this.domElement.tabIndex = -1;\n            this.skipUserInput = false;\n            // questions array\n            if (options.questions)\n                this.questions = options.questions;\n            // custom tag validation - must be a method on window to avoid unsafe eval() calls\n            if (this.domElement.getAttribute(\"cf-validation\")) {\n                var fn = window[this.domElement.getAttribute(\"cf-validation\")];\n                this.validationCallback = fn;\n            }\n            // reg ex pattern is set on the Tag, so use it in our validation\n            if (this.domElement.getAttribute(\"pattern\"))\n                this.pattern = new RegExp(this.domElement.getAttribute(\"pattern\"));\n            if (this.type != \"group\" && cf.ConversationalForm.illustrateAppFlow) {\n                if (!cf.ConversationalForm.suppressLog)\n                    console.log('Conversational Form > Tag registered:', this.type, this);\n            }\n            this.refresh();\n        }\n        Object.defineProperty(Tag.prototype, \"type\", {\n            get: function () {\n                return this.domElement.getAttribute(\"type\") || this.domElement.tagName.toLowerCase();\n            },\n            enumerable: true,\n            configurable: true\n        });\n        Object.defineProperty(Tag.prototype, \"name\", {\n            get: function () {\n                return this.domElement.getAttribute(\"name\");\n            },\n            enumerable: true,\n            configurable: true\n        });\n        Object.defineProperty(Tag.prototype, \"id\", {\n            get: function () {\n                return this.domElement.getAttribute(\"id\");\n            },\n            enumerable: true,\n            configurable: true\n        });\n        Object.defineProperty(Tag.prototype, \"inputPlaceholder\", {\n            get: function () {\n                return this._inputPlaceholder;\n            },\n            enumerable: true,\n            configurable: true\n        });\n        Object.defineProperty(Tag.prototype, \"formless\", {\n            get: function () {\n                return cf.TagsParser.isElementFormless(this.domElement);\n            },\n            enumerable: true,\n            configurable: true\n        });\n        Object.defineProperty(Tag.prototype, \"label\", {\n            get: function () {\n                return this.getLabel();\n            },\n            enumerable: true,\n            configurable: true\n        });\n        Object.defineProperty(Tag.prototype, \"value\", {\n            get: function () {\n                return this.domElement.value || this.initialDefaultValue;\n            },\n            enumerable: true,\n            configurable: true\n        });\n        Object.defineProperty(Tag.prototype, \"hasImage\", {\n            get: function () {\n                return this.domElement.hasAttribute(\"cf-image\");\n            },\n            enumerable: true,\n            configurable: true\n        });\n        Object.defineProperty(Tag.prototype, \"rows\", {\n            get: function () {\n                return this.domElement.hasAttribute(\"rows\") ? parseInt(this.domElement.getAttribute(\"rows\")) : 0;\n            },\n            enumerable: true,\n            configurable: true\n        });\n        Object.defineProperty(Tag.prototype, \"disabled\", {\n            get: function () {\n                // a tag is disabled if its conditions are not meet, also if it contains the disabled attribute\n                return !this.checkConditionalAndIsValid() || (this.domElement.getAttribute(\"disabled\") != undefined && this.domElement.getAttribute(\"disabled\") != null);\n            },\n            enumerable: true,\n            configurable: true\n        });\n        Object.defineProperty(Tag.prototype, \"required\", {\n            get: function () {\n                return !!this.domElement.getAttribute(\"required\") || this.domElement.getAttribute(\"required\") == \"\";\n            },\n            enumerable: true,\n            configurable: true\n        });\n        Object.defineProperty(Tag.prototype, \"question\", {\n            get: function () {\n                // if questions are empty, then fall back to dictionary, every time\n                if (!this.questions || this.questions.length == 0)\n                    return cf.Dictionary.getRobotResponse(this.type);\n                else\n                    return this.questions[Math.floor(Math.random() * this.questions.length)];\n            },\n            enumerable: true,\n            configurable: true\n        });\n        Object.defineProperty(Tag.prototype, \"eventTarget\", {\n            set: function (value) {\n                this._eventTarget = value;\n            },\n            enumerable: true,\n            configurable: true\n        });\n        Object.defineProperty(Tag.prototype, \"errorMessage\", {\n            get: function () {\n                if (!this.errorMessages) {\n                    // custom tag error messages\n                    if (this.domElement.getAttribute(\"cf-error\")) {\n                        this.errorMessages = cf.Helpers.getValuesOfBars(this.domElement.getAttribute(\"cf-error\"));\n                    }\n                    else if (this.domElement.parentNode && this.domElement.parentNode.getAttribute(\"cf-error\")) {\n                        this.errorMessages = cf.Helpers.getValuesOfBars(this.domElement.parentNode.getAttribute(\"cf-error\"));\n                    }\n                    else if (this.required) {\n                        this.errorMessages = [cf.Dictionary.get(\"input-placeholder-required\")];\n                    }\n                    else {\n                        if (this.type == \"file\")\n                            this.errorMessages = [cf.Dictionary.get(\"input-placeholder-file-error\")];\n                        else {\n                            this.errorMessages = [cf.Dictionary.get(\"input-placeholder-error\")];\n                        }\n                    }\n                }\n                return this.errorMessages[Math.floor(Math.random() * this.errorMessages.length)];\n            },\n            enumerable: true,\n            configurable: true\n        });\n        Tag.prototype.dealloc = function () {\n            this.domElement.removeEventListener(\"change\", this.changeCallback, false);\n            this.changeCallback = null;\n            this.domElement = null;\n            this.defaultValue = null;\n            this.errorMessages = null;\n            this.pattern = null;\n            this._label = null;\n            this.validationCallback = null;\n            this.questions = null;\n        };\n        Tag.testConditions = function (tagValue, condition) {\n            var testValue = function (value, conditional) {\n                if (typeof conditional === \"object\") {\n                    // regex\n                    return conditional.test(value);\n                }\n                // string comparisson\n                return tagValue === conditional;\n            };\n            if (typeof tagValue === \"string\") {\n                // tag value is a string\n                var value = tagValue;\n                var isValid = false;\n                for (var i = 0; i < condition.conditionals.length; i++) {\n                    var conditional = condition.conditionals[i];\n                    isValid = testValue(value, conditional);\n                    if (isValid)\n                        break;\n                }\n                return isValid;\n            }\n            else {\n                if (!tagValue) {\n                    return false;\n                }\n                else {\n                    // tag value is an array\n                    var isValid = false;\n                    for (var i = 0; i < condition.conditionals.length; i++) {\n                        var conditional = condition.conditionals[i];\n                        if (typeof tagValue !== \"string\") {\n                            for (var j = 0; j < tagValue.length; j++) {\n                                isValid = testValue(tagValue[j], conditional);\n                                if (isValid)\n                                    break;\n                            }\n                        }\n                        else {\n                            // string comparisson\n                            isValid = testValue(tagValue.toString(), conditional);\n                        }\n                        if (isValid)\n                            break;\n                    }\n                    return isValid;\n                }\n                // arrays need to be the same\n            }\n        };\n        Tag.isTagValid = function (element) {\n            if (element.getAttribute(\"type\") === \"hidden\")\n                return false;\n            if (element.getAttribute(\"type\") === \"submit\")\n                return false;\n            // ignore buttons, we submit the form automatially\n            if (element.getAttribute(\"type\") == \"button\")\n                return false;\n            if (element.style) {\n                // element style can be null if markup is created from DOMParser\n                if (element.style.display === \"none\")\n                    return false;\n                if (element.style.visibility === \"hidden\")\n                    return false;\n            }\n            var isTagFormless = cf.TagsParser.isElementFormless(element);\n            var innerText = cf.Helpers.getInnerTextOfElement(element);\n            if (element.tagName.toLowerCase() == \"option\" && (!isTagFormless && innerText == \"\" || innerText == \" \")) {\n                return false;\n            }\n            if (element.tagName.toLowerCase() == \"select\" || element.tagName.toLowerCase() == \"option\")\n                return true;\n            else if (isTagFormless) {\n                return true;\n            }\n            else {\n                return !!(element.offsetWidth || element.offsetHeight || element.getClientRects().length);\n            }\n        };\n        Tag.createTag = function (element) {\n            if (Tag.isTagValid(element)) {\n                // ignore hidden tags\n                var tag = void 0;\n                if (element.tagName.toLowerCase() == \"input\") {\n                    tag = new cf.InputTag({\n                        domElement: element\n                    });\n                }\n                else if (element.tagName.toLowerCase() == \"textarea\") {\n                    tag = new cf.InputTag({\n                        domElement: element\n                    });\n                }\n                else if (element.tagName.toLowerCase() == \"select\") {\n                    tag = new cf.SelectTag({\n                        domElement: element\n                    });\n                }\n                else if (element.tagName.toLowerCase() == \"button\") {\n                    tag = new cf.ButtonTag({\n                        domElement: element\n                    });\n                }\n                else if (element.tagName.toLowerCase() == \"option\") {\n                    tag = new cf.OptionTag({\n                        domElement: element\n                    });\n                }\n                else if (element.tagName.toLowerCase() == \"cf-robot-message\") {\n                    tag = new cf.CfRobotMessageTag({\n                        domElement: element\n                    });\n                }\n                return tag;\n            }\n            else {\n                // console.warn(\"Tag is not valid!: \"+ element);\n                return null;\n            }\n        };\n        Tag.prototype.reset = function () {\n            this.refresh();\n            // this.disabled = false;\n            // reset to initial value.\n            this.defaultValue = this.domElement.value = this.initialDefaultValue.toString();\n        };\n        Tag.prototype.refresh = function () {\n            // default value of Tag, check every refresh\n            this.defaultValue = this.domElement.value || this.domElement.getAttribute(\"value\") || \"\";\n            this.questions = null;\n            this.findAndSetQuestions();\n            this.findConditionalAttributes();\n        };\n        Tag.prototype.hasConditionsFor = function (tagName) {\n            if (!this.hasConditions()) {\n                return false;\n            }\n            for (var i = 0; i < this.conditionalTags.length; i++) {\n                var condition = this.conditionalTags[i];\n                if (\"cf-conditional-\" + tagName.toLowerCase() === condition.key.toLowerCase()) {\n                    return true;\n                }\n            }\n            return false;\n        };\n        Tag.prototype.hasConditions = function () {\n            return this.conditionalTags && this.conditionalTags.length > 0;\n        };\n        /**\n        * @name checkConditionalAndIsValid\n        * checks for conditional logic, see documentaiton (wiki)\n        * here we check after cf-conditional{-name}, if we find an attribute we look through tags for value, and ignore the tag if\n        */\n        Tag.prototype.checkConditionalAndIsValid = function () {\n            // can we tap into disabled\n            // if contains attribute, cf-conditional{-name} then check for conditional value across tags\n            if (this.hasConditions()) {\n                return this.flowManager.areConditionsInFlowFullfilled(this, this.conditionalTags);\n            }\n            // else return true, as no conditional means uncomplicated and happy tag\n            return true;\n        };\n        Tag.prototype.setTagValueAndIsValid = function (dto) {\n            // this sets the value of the tag in the DOM\n            // validation\n            var isValid = true;\n            var valueText = dto.text;\n            if (this.domElement.hasAttribute('type')\n                && this.domElement.getAttribute('type') === 'email'\n                && !this.pattern\n                && valueText.length > 0) {\n                this.pattern = /^(([^<>()\\[\\]\\\\.,;:\\s@\"]+(\\.[^<>()\\[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/;\n            }\n            else if (\n            // When NOT required: Reset in the event user already typed something, and now they clear their input and want to submit nothing ==> remove pattern previously applied\n            this.domElement.hasAttribute('type')\n                && this.domElement.getAttribute('type') === 'email'\n                && this.pattern\n                && valueText.length === 0\n                && !this.required) {\n                this.pattern = null;\n            }\n            if (this.pattern) {\n                isValid = this.pattern.test(valueText);\n            }\n            if (valueText == \"\" && this.required) {\n                isValid = false;\n            }\n            // https://developer.mozilla.org/en-US/docs/Web/HTML/Element/input#attr-minlength\n            var min = parseInt(this.domElement.getAttribute(\"minlength\"), 10) || -1;\n            // https://developer.mozilla.org/en-US/docs/Web/HTML/Element/input#attr-maxlength\n            var max = parseInt(this.domElement.getAttribute(\"maxlength\"), 10) || -1;\n            if (min != -1 && valueText.length < min) {\n                isValid = false;\n            }\n            if (max != -1 && valueText.length > max) {\n                isValid = false;\n            }\n            var isMaxMinValueValid = this.validateMaxMinValue(valueText);\n            if (!isMaxMinValueValid)\n                isValid = false;\n            if (isValid) {\n                // we cannot set the dom element value when type is file\n                if (this.type != \"file\")\n                    this.domElement.value = valueText;\n            }\n            return isValid;\n        };\n        /**\n         * Validates value against tag max and min attributes\n         *\n         * @private\n         * @param {string} value\n         * @returns {boolean}\n         * @memberof Tag\n         */\n        Tag.prototype.validateMaxMinValue = function (value) {\n            if (!value)\n                return true;\n            var parsedValue = parseInt(value, 10);\n            var minValue = parseInt(this.domElement.getAttribute(\"min\"), 10) || -1;\n            var maxValue = parseInt(this.domElement.getAttribute(\"max\"), 10) || -1;\n            if (minValue !== -1 && parsedValue < minValue)\n                return false;\n            if (maxValue !== -1 && parsedValue > maxValue)\n                return false;\n            return true;\n        };\n        Tag.prototype.getLabel = function () {\n            if (!this._label)\n                this.findAndSetLabel();\n            if (this._label)\n                return this._label;\n            return cf.Dictionary.getRobotResponse(this.type);\n        };\n        /**\n        * @name findConditionalAttributes\n        * look for conditional attributes and map them\n        */\n        Tag.prototype.findConditionalAttributes = function () {\n            var keys = this.domElement.attributes;\n            if (keys.length > 0) {\n                this.conditionalTags = [];\n                for (var key in keys) {\n                    if (keys.hasOwnProperty(key)) {\n                        var attr = keys[key];\n                        if (attr && attr.name && attr.name.indexOf(\"cf-conditional\") !== -1) {\n                            // conditional found\n                            var _conditionals = [];\n                            // TODO: when && use to combine multiple values to complete condition.\n                            var conditionalsFromAttribute = attr.value.indexOf(\"||\") !== -1 ? attr.value.split(\"||\") : attr.value.split(\"&&\");\n                            for (var i = 0; i < conditionalsFromAttribute.length; i++) {\n                                var _conditional = conditionalsFromAttribute[i];\n                                try {\n                                    _conditionals.push(new RegExp(_conditional));\n                                }\n                                catch (e) {\n                                }\n                                _conditionals.push(_conditional);\n                            }\n                            this.conditionalTags.push({\n                                key: attr.name,\n                                conditionals: _conditionals\n                            });\n                        }\n                    }\n                }\n            }\n        };\n        Tag.prototype.findAndSetQuestions = function () {\n            if (this.questions)\n                return;\n            // <label tag with label:for attribute to el:id\n            // check for label tag, we only go 2 steps backwards..\n            // from standardize markup: http://www.w3schools.com/tags/tag_label.asp\n            if (this.domElement.getAttribute(\"cf-questions\")) {\n                this.questions = cf.Helpers.getValuesOfBars(this.domElement.getAttribute(\"cf-questions\"));\n                if (this.domElement.getAttribute(\"cf-input-placeholder\"))\n                    this._inputPlaceholder = this.domElement.getAttribute(\"cf-input-placeholder\");\n            }\n            else if (this.domElement.parentNode && this.domElement.parentNode.getAttribute(\"cf-questions\")) {\n                // for groups the parentNode can have the cf-questions..\n                var parent_1 = this.domElement.parentNode;\n                this.questions = cf.Helpers.getValuesOfBars(parent_1.getAttribute(\"cf-questions\"));\n                if (parent_1.getAttribute(\"cf-input-placeholder\"))\n                    this._inputPlaceholder = parent_1.getAttribute(\"cf-input-placeholder\");\n            }\n            else {\n                // questions not set, so find it in the DOM\n                // try a broader search using for and id attributes\n                var elId = this.domElement.getAttribute(\"id\");\n                var forLabel = document.querySelector(\"label[for='\" + elId + \"']\");\n                if (forLabel) {\n                    this.questions = [cf.Helpers.getInnerTextOfElement(forLabel)];\n                }\n            }\n            if (!this.questions && this.domElement.getAttribute(\"placeholder\")) {\n                // check for placeholder attr if questions are still undefined\n                this.questions = [this.domElement.getAttribute(\"placeholder\")];\n            }\n        };\n        Tag.prototype.findAndSetLabel = function () {\n            // find label..\n            if (this.domElement.getAttribute(\"cf-label\")) {\n                this._label = this.domElement.getAttribute(\"cf-label\");\n            }\n            else {\n                var parentDomNode = this.domElement.parentNode;\n                if (parentDomNode) {\n                    // step backwards and check for label tag.\n                    var labelTags = parentDomNode.tagName.toLowerCase() == \"label\" ? [parentDomNode] : parentDomNode.getElementsByTagName(\"label\");\n                    if (labelTags.length == 0) {\n                        // check for innerText\n                        var innerText = cf.Helpers.getInnerTextOfElement(parentDomNode);\n                        if (innerText && innerText.length > 0)\n                            labelTags = [parentDomNode];\n                    }\n                    else if (labelTags.length > 0) {\n                        // check for \"for\" attribute\n                        for (var i = 0; i < labelTags.length; i++) {\n                            var label = labelTags[i];\n                            if (label.getAttribute(\"for\") == this.id) {\n                                this._label = cf.Helpers.getInnerTextOfElement(label);\n                            }\n                        }\n                    }\n                    if (!this._label && labelTags[0]) {\n                        this._label = cf.Helpers.getInnerTextOfElement(labelTags[0]);\n                    }\n                }\n            }\n        };\n        /**\n        * @name onDomElementChange\n        * on dom element value change event, ex. w. browser autocomplete mode\n        */\n        Tag.prototype.onDomElementChange = function () {\n            this._eventTarget.dispatchEvent(new CustomEvent(cf.TagEvents.ORIGINAL_ELEMENT_CHANGED, {\n                detail: {\n                    value: this.value,\n                    tag: this\n                }\n            }));\n        };\n        return Tag;\n    }());\n    cf.Tag = Tag;\n})(cf || (cf = {}));\n\n/// <reference path=\"ButtonTag.ts\"/>\n/// <reference path=\"InputTag.ts\"/>\n/// <reference path=\"SelectTag.ts\"/>\n/// <reference path=\"../ui/inputs/UserTextInput.ts\"/>\n// group tags together, this is done automatically by looking through InputTags with type radio or checkbox and same name attribute.\n// single choice logic for Radio Button, <input type=\"radio\", where name is the same\n// multi choice logic for Checkboxes, <input type=\"checkbox\", where name is the same\n// namespace\nvar cf;\n(function (cf) {\n    // class\n    var TagGroup = /** @class */ (function () {\n        function TagGroup(options) {\n            this.elements = options.elements;\n            // set wrapping element\n            this._fieldset = options.fieldset;\n            if (this._fieldset && this._fieldset.getAttribute(\"cf-questions\")) {\n                this.questions = cf.Helpers.getValuesOfBars(this._fieldset.getAttribute(\"cf-questions\"));\n            }\n            if (this._fieldset && this._fieldset.getAttribute(\"cf-input-placeholder\")) {\n                this._inputPlaceholder = this._fieldset.getAttribute(\"cf-input-placeholder\");\n            }\n            if (cf.ConversationalForm.illustrateAppFlow)\n                if (!cf.ConversationalForm.suppressLog)\n                    console.log('Conversational Form > TagGroup registered:', this.elements[0].type, this);\n            this.skipUserInput = false;\n        }\n        Object.defineProperty(TagGroup.prototype, \"required\", {\n            get: function () {\n                for (var i = 0; i < this.elements.length; i++) {\n                    var element = this.elements[i];\n                    if (this.elements[i].required) {\n                        return true;\n                    }\n                }\n                return false;\n            },\n            enumerable: true,\n            configurable: true\n        });\n        Object.defineProperty(TagGroup.prototype, \"eventTarget\", {\n            set: function (value) {\n                this._eventTarget = value;\n                for (var i = 0; i < this.elements.length; i++) {\n                    var tag = this.elements[i];\n                    tag.eventTarget = value;\n                }\n            },\n            enumerable: true,\n            configurable: true\n        });\n        Object.defineProperty(TagGroup.prototype, \"flowManager\", {\n            set: function (value) {\n                for (var i = 0; i < this.elements.length; i++) {\n                    var tag = this.elements[i];\n                    tag.flowManager = value;\n                }\n            },\n            enumerable: true,\n            configurable: true\n        });\n        Object.defineProperty(TagGroup.prototype, \"type\", {\n            get: function () {\n                return \"group\";\n            },\n            enumerable: true,\n            configurable: true\n        });\n        Object.defineProperty(TagGroup.prototype, \"label\", {\n            get: function () {\n                return \"\";\n            },\n            enumerable: true,\n            configurable: true\n        });\n        Object.defineProperty(TagGroup.prototype, \"name\", {\n            get: function () {\n                return this._fieldset && this._fieldset.hasAttribute(\"name\") ? this._fieldset.getAttribute(\"name\") : this.elements[0].name;\n            },\n            enumerable: true,\n            configurable: true\n        });\n        Object.defineProperty(TagGroup.prototype, \"id\", {\n            get: function () {\n                return this._fieldset && this._fieldset.id ? this._fieldset.id : this.elements[0].id;\n            },\n            enumerable: true,\n            configurable: true\n        });\n        Object.defineProperty(TagGroup.prototype, \"question\", {\n            get: function () {\n                // check if elements have the questions, else fallback\n                if (this.questions && this.questions.length > 0) {\n                    return this.questions[Math.floor(Math.random() * this.questions.length)];\n                }\n                else if (this.elements[0] && this.elements[0].question) {\n                    var tagQuestion = this.elements[0].question;\n                    return tagQuestion;\n                }\n                else {\n                    // fallback to robot response from dictionary\n                    var robotReponse = cf.Dictionary.getRobotResponse(this.getGroupTagType());\n                    return robotReponse;\n                }\n            },\n            enumerable: true,\n            configurable: true\n        });\n        Object.defineProperty(TagGroup.prototype, \"activeElements\", {\n            get: function () {\n                return this._activeElements;\n            },\n            enumerable: true,\n            configurable: true\n        });\n        Object.defineProperty(TagGroup.prototype, \"value\", {\n            get: function () {\n                // TODO: fix value???\n                return this._values ? this._values : [\"\"];\n            },\n            enumerable: true,\n            configurable: true\n        });\n        Object.defineProperty(TagGroup.prototype, \"disabled\", {\n            get: function () {\n                var disabled = false;\n                var allShouldBedisabled = 0;\n                for (var i = 0; i < this.elements.length; i++) {\n                    var element = this.elements[i];\n                    if (element.disabled)\n                        allShouldBedisabled++;\n                }\n                return allShouldBedisabled === this.elements.length;\n            },\n            enumerable: true,\n            configurable: true\n        });\n        Object.defineProperty(TagGroup.prototype, \"errorMessage\", {\n            get: function () {\n                var errorMessage = cf.Dictionary.get(\"input-placeholder-error\");\n                for (var i = 0; i < this.elements.length; i++) {\n                    var element = this.elements[i];\n                    errorMessage = element.errorMessage;\n                }\n                return errorMessage;\n            },\n            enumerable: true,\n            configurable: true\n        });\n        Object.defineProperty(TagGroup.prototype, \"inputPlaceholder\", {\n            get: function () {\n                return this._inputPlaceholder;\n            },\n            enumerable: true,\n            configurable: true\n        });\n        TagGroup.prototype.dealloc = function () {\n            for (var i = 0; i < this.elements.length; i++) {\n                var element = this.elements[i];\n                element.dealloc();\n            }\n            this.elements = null;\n        };\n        TagGroup.prototype.refresh = function () {\n            for (var i = 0; i < this.elements.length; i++) {\n                var element = this.elements[i];\n                element.refresh();\n            }\n        };\n        TagGroup.prototype.reset = function () {\n            this._values = [];\n            for (var i = 0; i < this.elements.length; i++) {\n                var element = this.elements[i];\n                element.reset();\n            }\n        };\n        TagGroup.prototype.getGroupTagType = function () {\n            return this.elements[0].type;\n        };\n        TagGroup.prototype.hasConditionsFor = function (tagName) {\n            for (var i = 0; i < this.elements.length; i++) {\n                var element = this.elements[i];\n                if (element.hasConditionsFor(tagName)) {\n                    return true;\n                }\n            }\n            return false;\n        };\n        TagGroup.prototype.hasConditions = function () {\n            for (var i = 0; i < this.elements.length; i++) {\n                var element = this.elements[i];\n                if (element.hasConditions()) {\n                    return true;\n                }\n            }\n            return false;\n        };\n        /**\n        * @name checkConditionalAndIsValid\n        * checks for conditional logic, see documentaiton (wiki)\n        * here we check after cf-conditional{-name} on group tags\n        */\n        TagGroup.prototype.checkConditionalAndIsValid = function () {\n            // can we tap into disabled\n            // if contains attribute, cf-conditional{-name} then check for conditional value across tags\n            for (var i = 0; i < this.elements.length; i++) {\n                var element = this.elements[i];\n                element.checkConditionalAndIsValid();\n            }\n            // else return true, as no conditional means happy tag\n            return true;\n        };\n        TagGroup.prototype.setTagValueAndIsValid = function (dto) {\n            var isValid = false;\n            var groupType = this.elements[0].type;\n            this._values = [];\n            this._activeElements = [];\n            switch (groupType) {\n                case \"radio\":\n                    var wasRadioButtonChecked = false;\n                    var numberRadioButtonsVisible = [];\n                    if (dto.controlElements) {\n                        // TODO: Refactor this so it is less dependant on controlElements\n                        for (var i = 0; i < dto.controlElements.length; i++) {\n                            var element = dto.controlElements[i];\n                            var tag = this.elements[this.elements.indexOf(element.referenceTag)];\n                            numberRadioButtonsVisible.push(element);\n                            if (tag == element.referenceTag) {\n                                if (element.checked) {\n                                    this._values.push(tag.value);\n                                    this._activeElements.push(tag);\n                                }\n                                // a radio button was checked\n                                if (!wasRadioButtonChecked && element.checked)\n                                    wasRadioButtonChecked = true;\n                            }\n                        }\n                    }\n                    else {\n                        // for when we don't have any control elements, then we just try and map values\n                        for (var i = 0; i < this.elements.length; i++) {\n                            var tag = this.elements[i];\n                            var v1 = tag.value.toString().toLowerCase();\n                            var v2 = dto.text.toString().toLowerCase();\n                            //brute force checking...\n                            if (v1.indexOf(v2) !== -1 || v2.indexOf(v1) !== -1) {\n                                this._activeElements.push(tag);\n                                // check the original tag\n                                this._values.push(tag.value);\n                                tag.domElement.checked = true;\n                                wasRadioButtonChecked = true;\n                            }\n                        }\n                    }\n                    isValid = wasRadioButtonChecked;\n                    break;\n                case \"checkbox\":\n                    // checkbox is always valid\n                    isValid = true;\n                    if (dto.controlElements) {\n                        for (var i = 0; i < dto.controlElements.length; i++) {\n                            var element = dto.controlElements[i];\n                            var tag = this.elements[this.elements.indexOf(element.referenceTag)];\n                            tag.domElement.checked = element.checked;\n                            if (element.checked) {\n                                this._values.push(tag.value);\n                                this._activeElements.push(tag);\n                            }\n                        }\n                    }\n                    if (this.required && this._activeElements.length == 0) {\n                        // checkbox can be required\n                        isValid = false;\n                    }\n                    break;\n            }\n            return isValid;\n        };\n        return TagGroup;\n    }());\n    cf.TagGroup = TagGroup;\n})(cf || (cf = {}));\n\n/// <reference path=\"Tag.ts\"/>\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    }\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n// namespace\nvar cf;\n(function (cf) {\n    // interface\n    // class\n    var InputTag = /** @class */ (function (_super) {\n        __extends(InputTag, _super);\n        function InputTag(options) {\n            var _this = _super.call(this, options) || this;\n            if (_this.type == \"text\") {\n            }\n            else if (_this.type == \"email\") {\n            }\n            else if (_this.type == \"tel\") {\n            }\n            else if (_this.type == \"checkbox\") {\n            }\n            else if (_this.type == \"radio\") {\n            }\n            else if (_this.type == \"password\") {\n            }\n            else if (_this.type == \"file\") {\n                // check InputFileTag.ts\n            }\n            return _this;\n        }\n        InputTag.prototype.findAndSetQuestions = function () {\n            _super.prototype.findAndSetQuestions.call(this);\n            // special use cases for <input> tag add here...\n        };\n        InputTag.prototype.findAndSetLabel = function () {\n            _super.prototype.findAndSetLabel.call(this);\n            if (!this._label) {\n                // special use cases for <input> tag add here...\n            }\n        };\n        InputTag.prototype.setTagValueAndIsValid = function (value) {\n            if (this.type == \"checkbox\") {\n                // checkbox is always true..\n                return true;\n            }\n            else {\n                return _super.prototype.setTagValueAndIsValid.call(this, value);\n            }\n        };\n        InputTag.prototype.dealloc = function () {\n            _super.prototype.dealloc.call(this);\n        };\n        return InputTag;\n    }(cf.Tag));\n    cf.InputTag = InputTag;\n})(cf || (cf = {}));\n\n/// <reference path=\"Tag.ts\"/>\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    }\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n// namespace\nvar cf;\n(function (cf) {\n    // interface\n    // class\n    var SelectTag = /** @class */ (function (_super) {\n        __extends(SelectTag, _super);\n        function SelectTag(options) {\n            var _this = _super.call(this, options) || this;\n            // build the option tags\n            _this.optionTags = [];\n            var domOptionTags = _this.domElement.getElementsByTagName(\"option\");\n            for (var i = 0; i < domOptionTags.length; i++) {\n                var element = domOptionTags[i];\n                var tag = cf.Tag.createTag(element);\n                if (tag) {\n                    _this.optionTags.push(tag);\n                }\n                else {\n                    console.warn(_this.constructor.name, 'option tag invalid:', tag);\n                }\n            }\n            return _this;\n        }\n        Object.defineProperty(SelectTag.prototype, \"type\", {\n            get: function () {\n                return \"select\";\n            },\n            enumerable: true,\n            configurable: true\n        });\n        Object.defineProperty(SelectTag.prototype, \"name\", {\n            get: function () {\n                return this.domElement && this.domElement.hasAttribute(\"name\") ? this.domElement.getAttribute(\"name\") : this.optionTags[0].name;\n            },\n            enumerable: true,\n            configurable: true\n        });\n        Object.defineProperty(SelectTag.prototype, \"value\", {\n            get: function () {\n                return this._values;\n            },\n            enumerable: true,\n            configurable: true\n        });\n        Object.defineProperty(SelectTag.prototype, \"multipleChoice\", {\n            get: function () {\n                return this.domElement.hasAttribute(\"multiple\");\n            },\n            enumerable: true,\n            configurable: true\n        });\n        SelectTag.prototype.setTagValueAndIsValid = function (dto) {\n            var isValid = false;\n            // select tag values are set via selected attribute on option tag\n            var numberOptionButtonsVisible = [];\n            this._values = [];\n            if (dto.controlElements) {\n                // TODO: Refactor this so it is less dependant on controlElements\n                for (var i = 0; i < this.optionTags.length; i++) {\n                    var tag = this.optionTags[i];\n                    for (var j = 0; j < dto.controlElements.length; j++) {\n                        var controllerElement = dto.controlElements[j];\n                        if (controllerElement.referenceTag == tag) {\n                            // tag match found, so set value\n                            tag.selected = controllerElement.selected;\n                            // check for minimum one selected\n                            if (!isValid && tag.selected)\n                                isValid = true;\n                            if (tag.selected)\n                                this._values.push(tag.value);\n                            if (controllerElement.visible)\n                                numberOptionButtonsVisible.push(controllerElement);\n                        }\n                    }\n                }\n            }\n            else {\n                var wasSelected = false;\n                // for when we don't have any control elements, then we just try and map values\n                for (var i = 0; i < this.optionTags.length; i++) {\n                    var tag = this.optionTags[i];\n                    var v1 = tag.value.toString().toLowerCase();\n                    var v2 = dto.text.toString().toLowerCase();\n                    //brute force checking...\n                    if (v1.indexOf(v2) !== -1 || v2.indexOf(v1) !== -1) {\n                        // check the original tag\n                        this._values.push(tag.value);\n                        tag.domElement.checked = true;\n                        wasSelected = true;\n                    }\n                }\n                isValid = wasSelected;\n            }\n            // special case 1, only one optiontag visible from a filter\n            if (!isValid && numberOptionButtonsVisible.length == 1) {\n                var element = numberOptionButtonsVisible[0];\n                var tag = this.optionTags[this.optionTags.indexOf(element.referenceTag)];\n                element.selected = true;\n                tag.selected = true;\n                isValid = true;\n                if (tag.selected)\n                    this._values.push(tag.value);\n            }\n            return isValid;\n        };\n        return SelectTag;\n    }(cf.Tag));\n    cf.SelectTag = SelectTag;\n})(cf || (cf = {}));\n\n/// <reference path=\"Tag.ts\"/>\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    }\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n// namespace\nvar cf;\n(function (cf) {\n    // interface\n    // class\n    var ButtonTag = /** @class */ (function (_super) {\n        __extends(ButtonTag, _super);\n        function ButtonTag(options) {\n            var _this = _super.call(this, options) || this;\n            if (_this.domElement.getAttribute(\"type\") == \"submit\") {\n            }\n            else if (_this.domElement.getAttribute(\"type\") == \"button\") {\n                // this.onClick = eval(this.domElement.onclick);\n            }\n            return _this;\n        }\n        return ButtonTag;\n    }(cf.Tag));\n    cf.ButtonTag = ButtonTag;\n})(cf || (cf = {}));\n\n/// <reference path=\"Tag.ts\"/>\n/// <reference path=\"../parsing/TagsParser.ts\"/>\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    }\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n// namespace\nvar cf;\n(function (cf) {\n    // interface\n    // class\n    var OptionTag = /** @class */ (function (_super) {\n        __extends(OptionTag, _super);\n        function OptionTag() {\n            return _super !== null && _super.apply(this, arguments) || this;\n        }\n        Object.defineProperty(OptionTag.prototype, \"type\", {\n            get: function () {\n                return \"option\";\n            },\n            enumerable: true,\n            configurable: true\n        });\n        Object.defineProperty(OptionTag.prototype, \"label\", {\n            get: function () {\n                if (this.formless) {\n                    return _super.prototype.getLabel.call(this);\n                }\n                else {\n                    return cf.Helpers.getInnerTextOfElement(this.domElement);\n                }\n            },\n            enumerable: true,\n            configurable: true\n        });\n        Object.defineProperty(OptionTag.prototype, \"selected\", {\n            get: function () {\n                return this.domElement.hasAttribute(\"selected\");\n                // return (<HTMLOptionElement> this.domElement).selected;\n            },\n            set: function (value) {\n                this.domElement.selected = value;\n                if (value) {\n                    this.domElement.setAttribute(\"selected\", \"selected\");\n                }\n                else {\n                    this.domElement.removeAttribute(\"selected\");\n                }\n            },\n            enumerable: true,\n            configurable: true\n        });\n        OptionTag.prototype.setTagValueAndIsValid = function (value) {\n            var isValid = true;\n            // OBS: No need to set any validation og value for this tag type ..\n            // .. it is atm. only used to create pseudo elements in the OptionsList\n            return isValid;\n        };\n        return OptionTag;\n    }(cf.Tag));\n    cf.OptionTag = OptionTag;\n})(cf || (cf = {}));\n\n/// <reference path=\"Tag.ts\"/>\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    }\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n// namespace\nvar cf;\n(function (cf) {\n    // interface\n    // class\n    var CfRobotMessageTag = /** @class */ (function (_super) {\n        __extends(CfRobotMessageTag, _super);\n        function CfRobotMessageTag(options) {\n            var _this = _super.call(this, options) || this;\n            _this.skipUserInput = true;\n            return _this;\n        }\n        CfRobotMessageTag.prototype.dealloc = function () {\n            _super.prototype.dealloc.call(this);\n        };\n        return CfRobotMessageTag;\n    }(cf.Tag));\n    cf.CfRobotMessageTag = CfRobotMessageTag;\n})(cf || (cf = {}));\n\n/// <reference path=\"ControlElement.ts\"/>\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    }\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n// namespace\nvar cf;\n(function (cf) {\n    // interface\n    // class\n    var Button = /** @class */ (function (_super) {\n        __extends(Button, _super);\n        function Button(options) {\n            var _this = _super.call(this, options) || this;\n            _this.clickCallback = _this.onClick.bind(_this);\n            _this.el.addEventListener(\"click\", _this.clickCallback, false);\n            _this.mouseDownCallback = _this.onMouseDown.bind(_this);\n            _this.el.addEventListener(\"mousedown\", _this.mouseDownCallback, false);\n            //image\n            _this.checkForImage();\n            return _this;\n        }\n        Object.defineProperty(Button.prototype, \"type\", {\n            get: function () {\n                return \"Button\";\n            },\n            enumerable: true,\n            configurable: true\n        });\n        Button.prototype.hasImage = function () {\n            return this.referenceTag.hasImage;\n        };\n        /**\n        * @name checkForImage\n        * checks if element has cf-image, if it has then change UI\n        */\n        Button.prototype.checkForImage = function () {\n            var hasImage = this.hasImage();\n            if (hasImage) {\n                this.el.classList.add(\"has-image\");\n                this.imgEl = document.createElement(\"img\");\n                this.imageLoadedCallback = this.onImageLoaded.bind(this);\n                this.imgEl.classList.add(\"cf-image\");\n                this.imgEl.addEventListener(\"load\", this.imageLoadedCallback, false);\n                this.imgEl.src = this.referenceTag.domElement.getAttribute(\"cf-image\");\n                this.el.insertBefore(this.imgEl, this.el.children[0]);\n            }\n        };\n        Button.prototype.onImageLoaded = function () {\n            this.imgEl.classList.add(\"loaded\");\n            this.eventTarget.dispatchEvent(new CustomEvent(cf.ControlElementEvents.ON_LOADED, {}));\n        };\n        Button.prototype.onMouseDown = function (event) {\n            event.preventDefault();\n        };\n        Button.prototype.onClick = function (event) {\n            this.onChoose();\n        };\n        Button.prototype.dealloc = function () {\n            this.el.removeEventListener(\"click\", this.clickCallback, false);\n            this.clickCallback = null;\n            if (this.imageLoadedCallback) {\n                this.imgEl.removeEventListener(\"load\", this.imageLoadedCallback, false);\n                this.imageLoadedCallback = null;\n            }\n            this.el.removeEventListener(\"mousedown\", this.mouseDownCallback, false);\n            this.mouseDownCallback = null;\n            _super.prototype.dealloc.call(this);\n        };\n        // override\n        Button.prototype.getTemplate = function () {\n            return \"<cf-button class=\\\"cf-button\\\">\\n\\t\\t\\t\\t\" + this.referenceTag.label + \"\\n\\t\\t\\t</cf-button>\\n\\t\\t\\t\";\n        };\n        return Button;\n    }(cf.ControlElement));\n    cf.Button = Button;\n})(cf || (cf = {}));\n\n/// <reference path=\"Button.ts\"/>\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    }\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n// namespace\nvar cf;\n(function (cf) {\n    // interface\n    // class\n    var RadioButton = /** @class */ (function (_super) {\n        __extends(RadioButton, _super);\n        function RadioButton() {\n            return _super !== null && _super.apply(this, arguments) || this;\n        }\n        Object.defineProperty(RadioButton.prototype, \"type\", {\n            get: function () {\n                return \"RadioButton\";\n            },\n            enumerable: true,\n            configurable: true\n        });\n        Object.defineProperty(RadioButton.prototype, \"checked\", {\n            get: function () {\n                var _checked = this.el.hasAttribute(\"checked\") && this.el.getAttribute(\"checked\") == \"checked\";\n                return _checked;\n            },\n            set: function (value) {\n                if (!value) {\n                    this.el.removeAttribute(\"checked\");\n                    this.referenceTag.domElement.removeAttribute(\"checked\");\n                    this.referenceTag.domElement.checked = false;\n                }\n                else {\n                    this.el.setAttribute(\"checked\", \"checked\");\n                    this.referenceTag.domElement.setAttribute(\"checked\", \"checked\");\n                    this.referenceTag.domElement.checked = true;\n                }\n            },\n            enumerable: true,\n            configurable: true\n        });\n        RadioButton.prototype.onClick = function (event) {\n            this.checked = true; // checked always true like native radio buttons\n            _super.prototype.onClick.call(this, event);\n        };\n        // override\n        RadioButton.prototype.getTemplate = function () {\n            var isChecked = this.referenceTag.domElement.checked || this.referenceTag.domElement.hasAttribute(\"checked\");\n            return \"<cf-radio-button class=\\\"cf-button\\\" \" + (isChecked ? \"checked=checked\" : \"\") + \">\\n\\t\\t\\t\\t<div>\\n\\t\\t\\t\\t\\t<cf-radio></cf-radio>\\n\\t\\t\\t\\t\\t<span>\" + this.referenceTag.label + \"</span>\\n\\t\\t\\t\\t</div>\\n\\t\\t\\t</cf-radio-button>\\n\\t\\t\\t\";\n        };\n        return RadioButton;\n    }(cf.Button));\n    cf.RadioButton = RadioButton;\n})(cf || (cf = {}));\n\n/// <reference path=\"Button.ts\"/>\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    }\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n// namespace\nvar cf;\n(function (cf) {\n    // interface\n    // class\n    var CheckboxButton = /** @class */ (function (_super) {\n        __extends(CheckboxButton, _super);\n        function CheckboxButton() {\n            return _super !== null && _super.apply(this, arguments) || this;\n        }\n        Object.defineProperty(CheckboxButton.prototype, \"type\", {\n            get: function () {\n                return \"CheckboxButton\";\n            },\n            enumerable: true,\n            configurable: true\n        });\n        Object.defineProperty(CheckboxButton.prototype, \"checked\", {\n            get: function () {\n                return this.el.getAttribute(\"checked\") == \"checked\";\n            },\n            set: function (value) {\n                if (!value) {\n                    this.el.removeAttribute(\"checked\");\n                    this.referenceTag.domElement.removeAttribute(\"checked\");\n                    this.referenceTag.domElement.checked = false;\n                }\n                else {\n                    this.el.setAttribute(\"checked\", \"checked\");\n                    this.referenceTag.domElement.setAttribute(\"checked\", \"checked\");\n                    this.referenceTag.domElement.checked = true;\n                }\n            },\n            enumerable: true,\n            configurable: true\n        });\n        CheckboxButton.prototype.onClick = function (event) {\n            this.checked = !this.checked;\n        };\n        // override\n        CheckboxButton.prototype.getTemplate = function () {\n            var isChecked = this.referenceTag.domElement.checked && this.referenceTag.domElement.hasAttribute(\"checked\");\n            return \"<cf-button class=\\\"cf-button cf-checkbox-button \" + (this.referenceTag.label.trim().length == 0 ? \"no-text\" : \"\") + \"\\\" checked=\" + (isChecked ? \"checked\" : \"\") + \">\\n\\t\\t\\t\\t<div>\\n\\t\\t\\t\\t\\t<cf-checkbox></cf-checkbox>\\n\\t\\t\\t\\t\\t<span>\" + this.referenceTag.label + \"</span>\\n\\t\\t\\t\\t</div>\\n\\t\\t\\t</cf-button>\\n\\t\\t\\t\";\n        };\n        return CheckboxButton;\n    }(cf.Button));\n    cf.CheckboxButton = CheckboxButton;\n})(cf || (cf = {}));\n\n/// <reference path=\"Button.ts\"/>\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    }\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n// namespace\nvar cf;\n(function (cf) {\n    // interface\n    cf.OptionButtonEvents = {\n        CLICK: \"cf-option-button-click\"\n    };\n    // class\n    var OptionButton = /** @class */ (function (_super) {\n        __extends(OptionButton, _super);\n        function OptionButton() {\n            var _this = _super !== null && _super.apply(this, arguments) || this;\n            _this.isMultiChoice = false;\n            return _this;\n        }\n        Object.defineProperty(OptionButton.prototype, \"type\", {\n            get: function () {\n                return \"OptionButton\";\n            },\n            enumerable: true,\n            configurable: true\n        });\n        Object.defineProperty(OptionButton.prototype, \"selected\", {\n            get: function () {\n                return this.el.hasAttribute(\"selected\");\n            },\n            set: function (value) {\n                if (value) {\n                    this.el.setAttribute(\"selected\", \"selected\");\n                }\n                else {\n                    this.el.removeAttribute(\"selected\");\n                }\n            },\n            enumerable: true,\n            configurable: true\n        });\n        OptionButton.prototype.setData = function (options) {\n            this.isMultiChoice = options.isMultiChoice;\n            _super.prototype.setData.call(this, options);\n        };\n        OptionButton.prototype.onClick = function (event) {\n            cf.ConversationalForm.illustrateFlow(this, \"dispatch\", cf.OptionButtonEvents.CLICK, this);\n            this.eventTarget.dispatchEvent(new CustomEvent(cf.OptionButtonEvents.CLICK, {\n                detail: this\n            }));\n        };\n        // override\n        OptionButton.prototype.getTemplate = function () {\n            // be aware that first option element on none multiple select tags will be selected by default\n            var tmpl = '<cf-button class=\"cf-button ' + (this.isMultiChoice ? \"cf-checkbox-button\" : \"\") + '\" ' + (this.referenceTag.domElement.selected ? \"selected='selected'\" : \"\") + '>';\n            tmpl += \"<div>\";\n            if (this.isMultiChoice)\n                tmpl += \"<cf-checkbox></cf-checkbox>\";\n            tmpl += this.referenceTag.label;\n            tmpl += \"</div>\";\n            tmpl += \"</cf-button>\";\n            return tmpl;\n        };\n        return OptionButton;\n    }(cf.Button));\n    cf.OptionButton = OptionButton;\n})(cf || (cf = {}));\n\n/// <reference path=\"ControlElement.ts\"/>\n/// <reference path=\"OptionButton.ts\"/>\n// namespace\nvar cf;\n(function (cf) {\n    // interface\n    // class\n    // builds x OptionsButton from the registered SelectTag\n    var OptionsList = /** @class */ (function () {\n        function OptionsList(options) {\n            this.context = options.context;\n            this.eventTarget = options.eventTarget;\n            this.referenceTag = options.referenceTag;\n            // check for multi choice select tag\n            this.multiChoice = this.referenceTag.domElement.hasAttribute(\"multiple\");\n            this.onOptionButtonClickCallback = this.onOptionButtonClick.bind(this);\n            this.eventTarget.addEventListener(cf.OptionButtonEvents.CLICK, this.onOptionButtonClickCallback, false);\n            this.createElements();\n        }\n        Object.defineProperty(OptionsList.prototype, \"type\", {\n            get: function () {\n                return \"OptionsList\";\n            },\n            enumerable: true,\n            configurable: true\n        });\n        OptionsList.prototype.getValue = function () {\n            var arr = [];\n            for (var i = 0; i < this.elements.length; i++) {\n                var element = this.elements[i];\n                if (!this.multiChoice && element.selected) {\n                    arr.push(element);\n                    return arr;\n                }\n                else if (this.multiChoice && element.selected) {\n                    arr.push(element);\n                }\n            }\n            return arr;\n        };\n        OptionsList.prototype.onOptionButtonClick = function (event) {\n            // if mutiple... then dont remove selection on other buttons\n            if (!this.multiChoice) {\n                // only one is selectable at the time.\n                for (var i = 0; i < this.elements.length; i++) {\n                    var element = this.elements[i];\n                    if (element != event.detail) {\n                        element.selected = false;\n                    }\n                    else {\n                        element.selected = true;\n                    }\n                }\n                cf.ConversationalForm.illustrateFlow(this, \"dispatch\", cf.ControlElementEvents.SUBMIT_VALUE, this.referenceTag);\n                this.eventTarget.dispatchEvent(new CustomEvent(cf.ControlElementEvents.SUBMIT_VALUE, {\n                    detail: event.detail\n                }));\n            }\n            else {\n                event.detail.selected = !event.detail.selected;\n            }\n        };\n        OptionsList.prototype.createElements = function () {\n            this.elements = [];\n            var optionTags = this.referenceTag.optionTags;\n            for (var i = 0; i < optionTags.length; i++) {\n                var tag = optionTags[i];\n                var btn = new cf.OptionButton({\n                    referenceTag: tag,\n                    isMultiChoice: this.referenceTag.multipleChoice,\n                    eventTarget: this.eventTarget\n                });\n                this.elements.push(btn);\n                this.context.appendChild(btn.el);\n            }\n        };\n        OptionsList.prototype.dealloc = function () {\n            this.eventTarget.removeEventListener(cf.OptionButtonEvents.CLICK, this.onOptionButtonClickCallback, false);\n            this.onOptionButtonClickCallback = null;\n            while (this.elements.length > 0)\n                this.elements.pop().dealloc();\n            this.elements = null;\n        };\n        return OptionsList;\n    }());\n    cf.OptionsList = OptionsList;\n})(cf || (cf = {}));\n\n/// <reference path=\"Button.ts\"/>\n/// <reference path=\"../../logic/Helpers.ts\"/>\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    }\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n// namespace\nvar cf;\n(function (cf) {\n    // interface\n    // class\n    var UploadFileUI = /** @class */ (function (_super) {\n        __extends(UploadFileUI, _super);\n        function UploadFileUI(options) {\n            var _this = _super.call(this, options) || this;\n            _this.maxFileSize = 100000000000;\n            _this.loading = false;\n            _this.submitTimer = 0;\n            _this._fileName = \"\";\n            _this._readerResult = \"\";\n            if (cf.Helpers.caniuse.fileReader()) {\n                var maxFileSizeStr = _this.referenceTag.domElement.getAttribute(\"cf-max-size\") || _this.referenceTag.domElement.getAttribute(\"max-size\");\n                if (maxFileSizeStr) {\n                    var maxFileSize = parseInt(maxFileSizeStr, 10);\n                    _this.maxFileSize = maxFileSize;\n                }\n                _this.progressBar = _this.el.getElementsByTagName(\"cf-upload-file-progress-bar\")[0];\n                _this.onDomElementChangeCallback = _this.onDomElementChange.bind(_this);\n                _this.referenceTag.domElement.addEventListener(\"change\", _this.onDomElementChangeCallback, false);\n            }\n            else {\n                throw new Error(\"Conversational Form Error: No FileReader available for client.\");\n            }\n            return _this;\n        }\n        Object.defineProperty(UploadFileUI.prototype, \"value\", {\n            get: function () {\n                return this.referenceTag.domElement.value; //;this.readerResult || this.fileName;\n            },\n            enumerable: true,\n            configurable: true\n        });\n        Object.defineProperty(UploadFileUI.prototype, \"readerResult\", {\n            get: function () {\n                return this._readerResult;\n            },\n            enumerable: true,\n            configurable: true\n        });\n        Object.defineProperty(UploadFileUI.prototype, \"files\", {\n            get: function () {\n                return this._files;\n            },\n            enumerable: true,\n            configurable: true\n        });\n        Object.defineProperty(UploadFileUI.prototype, \"fileName\", {\n            get: function () {\n                return this._fileName;\n            },\n            enumerable: true,\n            configurable: true\n        });\n        Object.defineProperty(UploadFileUI.prototype, \"type\", {\n            get: function () {\n                return \"UploadFileUI\";\n            },\n            enumerable: true,\n            configurable: true\n        });\n        UploadFileUI.prototype.getFilesAsString = function () {\n            // value is for the chat response -->\n            var icon = document.createElement(\"span\");\n            icon.innerHTML = cf.Dictionary.get(\"icon-type-file\") + this.fileName;\n            return icon.outerHTML;\n        };\n        UploadFileUI.prototype.onDomElementChange = function (event) {\n            var _this = this;\n            if (!cf.ConversationalForm.suppressLog)\n                console.log(\"...onDomElementChange\");\n            var reader = new FileReader();\n            this._files = this.referenceTag.domElement.files;\n            reader.onerror = function (event) {\n                if (!cf.ConversationalForm.suppressLog)\n                    console.log(\"onerror\", event);\n            };\n            reader.onprogress = function (event) {\n                if (!cf.ConversationalForm.suppressLog)\n                    console.log(\"onprogress\", event);\n                _this.progressBar.style.width = ((event.loaded / event.total) * 100) + \"%\";\n            };\n            reader.onabort = function (event) {\n                if (!cf.ConversationalForm.suppressLog)\n                    console.log(\"onabort\", event);\n            };\n            reader.onloadstart = function (event) {\n                // check for file size\n                var file = _this.files[0];\n                var fileSize = file ? file.size : _this.maxFileSize + 1; // if file is undefined then abort ...\n                if (fileSize > _this.maxFileSize) {\n                    reader.abort();\n                    var dto = {\n                        errorText: cf.Dictionary.get(\"input-placeholder-file-size-error\")\n                    };\n                    cf.ConversationalForm.illustrateFlow(_this, \"dispatch\", cf.FlowEvents.USER_INPUT_INVALID, dto);\n                    _this.eventTarget.dispatchEvent(new CustomEvent(cf.FlowEvents.USER_INPUT_INVALID, {\n                        detail: dto\n                    }));\n                }\n                else {\n                    // good to go\n                    _this._fileName = file.name;\n                    _this.loading = true;\n                    _this.animateIn();\n                    // set text\n                    var sizeConversion = Math.floor(Math.log(fileSize) / Math.log(1024));\n                    var sizeChart = [\"b\", \"kb\", \"mb\", \"gb\"];\n                    sizeConversion = Math.min(sizeChart.length - 1, sizeConversion);\n                    var humanSizeString = Number((fileSize / Math.pow(1024, sizeConversion)).toFixed(2)) * 1 + \" \" + sizeChart[sizeConversion];\n                    var text = file.name + \" (\" + humanSizeString + \")\";\n                    _this.el.getElementsByTagName(\"cf-upload-file-text\")[0].innerHTML = text;\n                    _this.eventTarget.dispatchEvent(new CustomEvent(cf.ControlElementEvents.PROGRESS_CHANGE, {\n                        detail: cf.ControlElementProgressStates.BUSY\n                    }));\n                }\n            };\n            reader.onload = function (event) {\n                _this._readerResult = event.target.result;\n                _this.progressBar.classList.add(\"loaded\");\n                _this.submitTimer = setTimeout(function () {\n                    _this.el.classList.remove(\"animate-in\");\n                    _this.onChoose(); // submit the file\n                    _this.eventTarget.dispatchEvent(new CustomEvent(cf.ControlElementEvents.PROGRESS_CHANGE, {\n                        detail: cf.ControlElementProgressStates.READY\n                    }));\n                }, 0);\n            };\n            reader.readAsDataURL(this.files[0]);\n        };\n        UploadFileUI.prototype.animateIn = function () {\n            if (this.loading)\n                _super.prototype.animateIn.call(this);\n        };\n        UploadFileUI.prototype.onClick = function (event) {\n            // super.onClick(event);\n        };\n        UploadFileUI.prototype.triggerFileSelect = function () {\n            // trigger file prompt\n            this.referenceTag.domElement.click();\n        };\n        // override\n        UploadFileUI.prototype.dealloc = function () {\n            clearTimeout(this.submitTimer);\n            this.progressBar = null;\n            if (this.onDomElementChangeCallback) {\n                this.referenceTag.domElement.removeEventListener(\"change\", this.onDomElementChangeCallback, false);\n                this.onDomElementChangeCallback = null;\n            }\n            _super.prototype.dealloc.call(this);\n        };\n        UploadFileUI.prototype.getTemplate = function () {\n            var isChecked = this.referenceTag.value == \"1\" || this.referenceTag.domElement.hasAttribute(\"checked\");\n            return \"<cf-upload-file-ui>\\n\\t\\t\\t\\t<cf-upload-file-text></cf-upload-file-text>\\n\\t\\t\\t\\t<cf-upload-file-progress>\\n\\t\\t\\t\\t\\t<cf-upload-file-progress-bar></cf-upload-file-progress-bar>\\n\\t\\t\\t\\t</cf-upload-file-progress>\\n\\t\\t\\t</cf-upload-file-ui>\\n\\t\\t\\t\";\n        };\n        return UploadFileUI;\n    }(cf.Button));\n    cf.UploadFileUI = UploadFileUI;\n})(cf || (cf = {}));\n\n/// <reference path=\"../ui/BasicElement.ts\"/>\n/// <reference path=\"../ui//control-elements/ControlElements.ts\"/>\n/// <reference path=\"../logic/FlowManager.ts\"/>\n/// <reference path=\"../interfaces/IUserInputElement.ts\"/>\n/// <reference path=\"../ui/inputs/UserInputElement.ts\"/>\n/// <reference path=\"../interfaces/IUserInputElement.ts\"/>\n// namespace\nvar cf;\n(function (cf) {\n    cf.MicrophoneBridgeEvent = {\n        ERROR: \"cf-microphone-bridge-error\",\n        TERMNIAL_ERROR: \"cf-microphone-bridge-terminal-error\"\n    };\n    // class\n    var MicrophoneBridge = /** @class */ (function () {\n        function MicrophoneBridge(options) {\n            this.currentTextResponse = \"\";\n            this._hasUserMedia = false;\n            this.inputErrorCount = 0;\n            this.inputCurrentError = \"\";\n            this.el = options.el;\n            this.button = options.button;\n            this.eventTarget = options.eventTarget;\n            // data object\n            this.microphoneObj = options.microphoneObj;\n            this.flowUpdateCallback = this.onFlowUpdate.bind(this);\n            this.eventTarget.addEventListener(cf.FlowEvents.FLOW_UPDATE, this.flowUpdateCallback, false);\n        }\n        Object.defineProperty(MicrophoneBridge.prototype, \"hasUserMedia\", {\n            set: function (value) {\n                this._hasUserMedia = value;\n                if (!value) {\n                    // this.submitButton.classList.add(\"permission-waiting\");\n                }\n                else {\n                    // this.submitButton.classList.remove(\"permission-waiting\");\n                }\n            },\n            enumerable: true,\n            configurable: true\n        });\n        Object.defineProperty(MicrophoneBridge.prototype, \"active\", {\n            set: function (value) {\n                if (this.equalizer) {\n                    this.equalizer.disabled = !value;\n                }\n            },\n            enumerable: true,\n            configurable: true\n        });\n        MicrophoneBridge.prototype.cancel = function () {\n            this.button.loading = false;\n            if (this.microphoneObj.cancelInput) {\n                this.microphoneObj.cancelInput();\n            }\n        };\n        MicrophoneBridge.prototype.onFlowUpdate = function () {\n            var _this = this;\n            this.currentTextResponse = null;\n            if (!this._hasUserMedia) {\n                // check if user has granted\n                var hasGranted_1 = false;\n                if (window.navigator.mediaDevices) {\n                    window.navigator.mediaDevices.enumerateDevices().then(function (devices) {\n                        devices.forEach(function (device) {\n                            if (!hasGranted_1 && device.label !== \"\") {\n                                hasGranted_1 = true;\n                            }\n                        });\n                        if (hasGranted_1) {\n                            // user has previously granted, so call getusermedia, as this wont prombt user\n                            _this.getUserMedia();\n                        }\n                        else {\n                            // await click on button, wait state\n                        }\n                    });\n                }\n            }\n            else {\n                // user has granted ready to go go\n                if (!this.microphoneObj.awaitingCallback) {\n                    this.callInput();\n                }\n            }\n        };\n        MicrophoneBridge.prototype.getUserMedia = function () {\n            var _this = this;\n            try {\n                // from https://developer.mozilla.org/en-US/docs/Web/API/MediaDevices/getUserMedia#Using_the_new_API_in_older_browsers\n                // Older browsers might not implement mediaDevices at all, so we set an empty object first\n                if (navigator.mediaDevices === undefined) {\n                    navigator.mediaDevices = {};\n                }\n                // Some browsers partially implement mediaDevices. We can't just assign an object\n                // with getUserMedia as it would overwrite existing properties.\n                // Here, we will just add the getUserMedia property if it's missing.\n                if (navigator.mediaDevices.getUserMedia === undefined) {\n                    navigator.mediaDevices.getUserMedia = function (constraints) {\n                        // First get ahold of the legacy getUserMedia, if present\n                        var getUserMedia = navigator.getUserMedia || window.navigator.webkitGetUserMedia || window.navigator.mozGetUserMedia;\n                        // Some browsers just don't implement it - return a rejected promise with an error\n                        // to keep a consistent interface\n                        if (!getUserMedia) {\n                            return Promise.reject(new Error('getUserMedia is not implemented in this browser'));\n                        }\n                        // Otherwise, wrap the call to the old navigator.getUserMedia with a Promise\n                        return new Promise(function (resolve, reject) {\n                            getUserMedia.call(navigator, constraints, resolve, reject);\n                        });\n                    };\n                }\n                navigator.mediaDevices.getUserMedia({ audio: true })\n                    .then(function (stream) {\n                    _this.currentStream = stream;\n                    if (stream.getAudioTracks().length > 0) {\n                        // interface is active and available, so call it immidiatly\n                        _this.hasUserMedia = true;\n                        _this.setupEqualizer();\n                        if (!_this.microphoneObj.awaitingCallback) {\n                            // microphone interface awaits speak out loud callback\n                            _this.callInput();\n                        }\n                    }\n                    else {\n                        // code for when both devices are available\n                        // interface is not active, button should be clicked\n                        _this.hasUserMedia = false;\n                    }\n                })\n                    .catch(function (error) {\n                    // Promise catch\n                    _this.hasUserMedia = false;\n                    _this.eventTarget.dispatchEvent(new Event(cf.MicrophoneBridgeEvent.TERMNIAL_ERROR));\n                });\n            }\n            catch (error) {\n                // try catch\n                // whoops no getUserMedia, so roll back to standard UI\n                this.hasUserMedia = false;\n                this.eventTarget.dispatchEvent(new Event(cf.MicrophoneBridgeEvent.TERMNIAL_ERROR));\n            }\n        };\n        MicrophoneBridge.prototype.dealloc = function () {\n            this.cancel();\n            this.promise = null;\n            this.currentStream = null;\n            if (this.equalizer) {\n                this.equalizer.dealloc();\n            }\n            this.equalizer = null;\n            this.eventTarget.removeEventListener(cf.FlowEvents.FLOW_UPDATE, this.flowUpdateCallback, false);\n            this.flowUpdateCallback = null;\n        };\n        MicrophoneBridge.prototype.callInput = function (messageTime) {\n            // remove current error message after x time\n            // clearTimeout(this.clearMessageTimer);\n            // this.clearMessageTimer = setTimeout(() =>{\n            // \tthis.el.removeAttribute(\"message\");\n            // }, messageTime);\n            var _this = this;\n            if (messageTime === void 0) { messageTime = 0; }\n            this.button.loading = true;\n            if (this.equalizer) {\n                this.equalizer.disabled = false;\n            }\n            // call API, SpeechRecognintion etc. you decide, passing along the stream from getUserMedia can be used.. as long as the resolve is called with string attribute\n            this.promise = new Promise(function (resolve, reject) { return _this.microphoneObj.input(resolve, reject, _this.currentStream); })\n                .then(function (result) {\n                // api contacted\n                _this.promise = null;\n                // save response so it's available in getFlowDTO\n                _this.currentTextResponse = result.toString();\n                if (!_this.currentTextResponse || _this.currentTextResponse == \"\") {\n                    _this.showError(cf.Dictionary.get(\"user-audio-reponse-invalid\"));\n                    // invalid input, so call API again\n                    _this.callInput();\n                    return;\n                }\n                _this.inputErrorCount = 0;\n                _this.inputCurrentError = \"\";\n                _this.button.loading = false;\n                // continue flow\n                var dto = {\n                    text: _this.currentTextResponse\n                };\n                cf.ConversationalForm.illustrateFlow(_this, \"dispatch\", cf.UserInputEvents.SUBMIT, dto);\n                _this.eventTarget.dispatchEvent(new CustomEvent(cf.UserInputEvents.SUBMIT, {\n                    detail: dto\n                }));\n            }).catch(function (error) {\n                // API error\n                // ConversationalForm.illustrateFlow(this, \"dispatch\", MicrophoneBridgeEvent.ERROR, error);\n                // this.eventTarget.dispatchEvent(new CustomEvent(MicrophoneBridgeEvent.ERROR, {\n                // \tdetail: error\n                // }));\n                if (_this.isErrorTerminal(error)) {\n                    // terminal error, fallback to \n                    _this.eventTarget.dispatchEvent(new CustomEvent(cf.MicrophoneBridgeEvent.TERMNIAL_ERROR, {\n                        detail: cf.Dictionary.get(\"microphone-terminal-error\")\n                    }));\n                    if (!cf.ConversationalForm.suppressLog)\n                        console.log(\"Conversational Form: Terminal error: \", error);\n                }\n                else {\n                    if (_this.inputCurrentError != error) {\n                        // api failed ...\n                        // show result in UI\n                        _this.inputErrorCount = 0;\n                        _this.inputCurrentError = error;\n                    }\n                    else {\n                    }\n                    _this.inputErrorCount++;\n                    if (_this.inputErrorCount > 2) {\n                        _this.showError(error);\n                    }\n                    else {\n                        _this.eventTarget.dispatchEvent(new CustomEvent(cf.MicrophoneBridgeEvent.TERMNIAL_ERROR, {\n                            detail: cf.Dictionary.get(\"microphone-terminal-error\")\n                        }));\n                        if (!cf.ConversationalForm.suppressLog)\n                            console.log(\"Conversational Form: Terminal error: \", error);\n                    }\n                }\n            });\n        };\n        MicrophoneBridge.prototype.isErrorTerminal = function (error) {\n            var terminalErrors = [\"network\"];\n            if (terminalErrors.indexOf(error) !== -1)\n                return true;\n            return false;\n        };\n        MicrophoneBridge.prototype.showError = function (error) {\n            var dto = {\n                errorText: error\n            };\n            cf.ConversationalForm.illustrateFlow(this, \"dispatch\", cf.FlowEvents.USER_INPUT_INVALID, dto);\n            this.eventTarget.dispatchEvent(new CustomEvent(cf.FlowEvents.USER_INPUT_INVALID, {\n                detail: dto\n            }));\n            this.callInput();\n        };\n        MicrophoneBridge.prototype.setupEqualizer = function () {\n            var eqEl = this.el.getElementsByTagName(\"cf-icon-audio-eq\")[0];\n            if (SimpleEqualizer.supported && eqEl) {\n                this.equalizer = new SimpleEqualizer({\n                    stream: this.currentStream,\n                    elementToScale: eqEl\n                });\n            }\n        };\n        return MicrophoneBridge;\n    }());\n    cf.MicrophoneBridge = MicrophoneBridge;\n    var SimpleEqualizer = /** @class */ (function () {\n        function SimpleEqualizer(options) {\n            var _this = this;\n            this.maxBorderWidth = 0;\n            this._disabled = false;\n            this.elementToScale = options.elementToScale;\n            this.context = new AudioContext();\n            this.analyser = this.context.createAnalyser();\n            this.mic = this.context.createMediaStreamSource(options.stream);\n            this.javascriptNode = this.context.createScriptProcessor(2048, 1, 1);\n            this.analyser.smoothingTimeConstant = 0.3;\n            this.analyser.fftSize = 1024;\n            this.mic.connect(this.analyser);\n            this.analyser.connect(this.javascriptNode);\n            this.javascriptNode.connect(this.context.destination);\n            this.javascriptNode.onaudioprocess = function () {\n                _this.onAudioProcess();\n            };\n        }\n        Object.defineProperty(SimpleEqualizer.prototype, \"disabled\", {\n            set: function (value) {\n                this._disabled = value;\n                this.elementToScale.style.borderWidth = 0 + \"px\";\n            },\n            enumerable: true,\n            configurable: true\n        });\n        SimpleEqualizer.prototype.onAudioProcess = function () {\n            if (this._disabled)\n                return;\n            var array = new Uint8Array(this.analyser.frequencyBinCount);\n            this.analyser.getByteFrequencyData(array);\n            var values = 0;\n            var length = array.length;\n            for (var i = 0; i < length; i++) {\n                values += array[i];\n            }\n            var average = values / length;\n            var percent = Math.min(1, Math.max(0, 1 - ((50 - average) / 50)));\n            if (!this.maxBorderWidth) {\n                this.maxBorderWidth = this.elementToScale.offsetWidth * 0.5;\n            }\n            this.elementToScale.style.borderWidth = (this.maxBorderWidth * percent) + \"px\";\n        };\n        SimpleEqualizer.prototype.dealloc = function () {\n            this.javascriptNode.onaudioprocess = null;\n            this.javascriptNode = null;\n            this.analyser = null;\n            this.mic = null;\n            this.elementToScale = null;\n            this.context = null;\n        };\n        SimpleEqualizer.supported = function () {\n            window.AudioContext = window.AudioContext || window.webkitAudioContext;\n            if (window.AudioContext) {\n                return true;\n            }\n            else {\n                return false;\n            }\n        };\n        return SimpleEqualizer;\n    }());\n})(cf || (cf = {}));\n\n/// <reference path=\"../BasicElement.ts\"/>\n/// <reference path=\"../control-elements/ControlElements.ts\"/>\n/// <reference path=\"../../logic/FlowManager.ts\"/>\n/// <reference path=\"../../logic/MicrophoneBridge.ts\"/>\n/// <reference path=\"../../interfaces/IUserInputElement.ts\"/>\n/// <reference path=\"UserInputElement.ts\"/>\n// namespace\nvar cf;\n(function (cf) {\n    // interface\n    cf.UserInputSubmitButtonEvents = {\n        CHANGE: \"userinput-submit-button-change-value\"\n    };\n    // class\n    var UserInputSubmitButton = /** @class */ (function () {\n        function UserInputSubmitButton(options) {\n            this._active = true;\n            this.eventTarget = options.eventTarget;\n            var template = document.createElement('template');\n            template.innerHTML = this.getTemplate();\n            this.el = template.firstChild || template.content.firstChild;\n            this.onClickCallback = this.onClick.bind(this);\n            this.el.addEventListener(\"click\", this.onClickCallback, false);\n            this.onMicrophoneTerminalErrorCallback = this.onMicrophoneTerminalError.bind(this);\n            this.eventTarget.addEventListener(cf.MicrophoneBridgeEvent.TERMNIAL_ERROR, this.onMicrophoneTerminalErrorCallback, false);\n        }\n        Object.defineProperty(UserInputSubmitButton.prototype, \"typing\", {\n            get: function () {\n                return this.el.classList.contains(\"typing\");\n            },\n            set: function (value) {\n                if (value) {\n                    this.el.classList.add(\"typing\");\n                    this.loading = false;\n                    if (this.mic) {\n                        this.mic.cancel();\n                    }\n                }\n                else {\n                    this.el.classList.remove(\"typing\");\n                    if (this.mic) {\n                        this.mic.callInput();\n                    }\n                }\n            },\n            enumerable: true,\n            configurable: true\n        });\n        Object.defineProperty(UserInputSubmitButton.prototype, \"active\", {\n            get: function () {\n                return this._active;\n            },\n            set: function (value) {\n                this._active = value;\n                if (this.mic) {\n                    this.mic.active = value;\n                }\n            },\n            enumerable: true,\n            configurable: true\n        });\n        Object.defineProperty(UserInputSubmitButton.prototype, \"loading\", {\n            get: function () {\n                return this.el.classList.contains(\"loading\");\n            },\n            set: function (value) {\n                if (value)\n                    this.el.classList.add(\"loading\");\n                else\n                    this.el.classList.remove(\"loading\");\n            },\n            enumerable: true,\n            configurable: true\n        });\n        UserInputSubmitButton.prototype.addMicrophone = function (microphoneObj) {\n            this.el.classList.add(\"microphone-interface\");\n            var template = document.createElement('template');\n            template.innerHTML = \"<div class=\\\"cf-input-icons cf-microphone\\\">\\n\\t\\t\\t\\t<div class=\\\"cf-icon-audio\\\"></div>\\n\\t\\t\\t\\t<cf-icon-audio-eq></cf-icon-audio-eq>\\n\\t\\t\\t</div>\";\n            var mic = template.firstChild || template.content.firstChild;\n            this.mic = new cf.MicrophoneBridge({\n                el: mic,\n                button: this,\n                eventTarget: this.eventTarget,\n                microphoneObj: microphoneObj\n            });\n            this.el.appendChild(mic);\n            // this.mic = null;\n            // this.el.appendChild(this.mic.el);\n        };\n        UserInputSubmitButton.prototype.reset = function () {\n            if (this.mic && !this.typing) {\n                // if microphone and not typing\n                this.mic.callInput();\n            }\n        };\n        UserInputSubmitButton.prototype.getTemplate = function () {\n            return \"<cf-input-button class=\\\"cf-input-button\\\">\\n\\t\\t\\t\\t\\t\\t<div class=\\\"cf-input-icons\\\">\\n\\t\\t\\t\\t\\t\\t\\t<div class=\\\"cf-icon-progress\\\"></div>\\n\\t\\t\\t\\t\\t\\t\\t<div class=\\\"cf-icon-attachment\\\"></div>\\n\\t\\t\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t\\t</cf-input-button>\";\n        };\n        UserInputSubmitButton.prototype.onMicrophoneTerminalError = function (event) {\n            if (this.mic) {\n                this.mic.dealloc();\n                this.mic = null;\n                this.el.removeChild(this.el.getElementsByClassName(\"cf-microphone\")[0]);\n                this.el.classList.remove(\"microphone-interface\");\n                this.loading = false;\n                this.eventTarget.dispatchEvent(new CustomEvent(cf.FlowEvents.USER_INPUT_INVALID, {\n                    detail: {\n                        errorText: event.detail\n                    } //UserTextInput value\n                }));\n            }\n        };\n        UserInputSubmitButton.prototype.onClick = function (event) {\n            var isMicVisible = this.mic && !this.typing;\n            if (isMicVisible) {\n                this.mic.callInput();\n            }\n            else {\n                this.eventTarget.dispatchEvent(new CustomEvent(cf.UserInputSubmitButtonEvents.CHANGE));\n            }\n        };\n        /**\n        * @name click\n        * force click on button\n        */\n        UserInputSubmitButton.prototype.click = function () {\n            this.el.click();\n        };\n        /**\n        * @name dealloc\n        * remove instance\n        */\n        UserInputSubmitButton.prototype.dealloc = function () {\n            this.eventTarget.removeEventListener(cf.MicrophoneBridgeEvent.TERMNIAL_ERROR, this.onMicrophoneTerminalErrorCallback, false);\n            this.onMicrophoneTerminalErrorCallback = null;\n            if (this.mic) {\n                this.mic.dealloc();\n            }\n            this.mic = null;\n            this.el.removeEventListener(\"click\", this.onClickCallback, false);\n            this.onClickCallback = null;\n            this.el = null;\n            this.eventTarget = null;\n        };\n        return UserInputSubmitButton;\n    }());\n    cf.UserInputSubmitButton = UserInputSubmitButton;\n})(cf || (cf = {}));\n\n/// <reference path=\"../logic/FlowManager.ts\"/>\n// namespace\nvar cf;\n(function (cf) {\n    // interface\n    cf.UserInputTypes = {\n        VOICE: \"voice\",\n        VR_GESTURE: \"vr-gesture\",\n        TEXT: \"text\" // <-- default\n    };\n})(cf || (cf = {}));\n\n\n/// <reference path=\"../BasicElement.ts\"/>\n/// <reference path=\"../control-elements/ControlElements.ts\"/>\n/// <reference path=\"../../logic/FlowManager.ts\"/>\n/// <reference path=\"../../interfaces/IUserInput.ts\"/>\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    }\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n// Abstract UserInpt element, should be extended when adding a new UI for user input\n// namespace\nvar cf;\n(function (cf) {\n    // interface\n    var UserInputElement = /** @class */ (function (_super) {\n        __extends(UserInputElement, _super);\n        function UserInputElement(options) {\n            var _this = _super.call(this, options) || this;\n            _this._disabled = false;\n            _this._visible = false;\n            _this.onChatReponsesUpdatedCallback = _this.onChatReponsesUpdated.bind(_this);\n            _this.eventTarget.addEventListener(cf.ChatListEvents.CHATLIST_UPDATED, _this.onChatReponsesUpdatedCallback, false);\n            _this.windowFocusCallback = _this.windowFocus.bind(_this);\n            window.addEventListener('focus', _this.windowFocusCallback, false);\n            _this.inputInvalidCallback = _this.inputInvalid.bind(_this);\n            _this.eventTarget.addEventListener(cf.FlowEvents.USER_INPUT_INVALID, _this.inputInvalidCallback, false);\n            _this.flowUpdateCallback = _this.onFlowUpdate.bind(_this);\n            _this.eventTarget.addEventListener(cf.FlowEvents.FLOW_UPDATE, _this.flowUpdateCallback, false);\n            return _this;\n        }\n        Object.defineProperty(UserInputElement.prototype, \"currentTag\", {\n            get: function () {\n                return this._currentTag;\n            },\n            enumerable: true,\n            configurable: true\n        });\n        Object.defineProperty(UserInputElement.prototype, \"visible\", {\n            set: function (value) {\n                var _this = this;\n                this._visible = value;\n                if (!this.el.classList.contains(\"animate-in\") && value) {\n                    setTimeout(function () {\n                        _this.el.classList.add(\"animate-in\");\n                    }, 0);\n                }\n                else if (this.el.classList.contains(\"animate-in\") && !value) {\n                    this.el.classList.remove(\"animate-in\");\n                }\n            },\n            enumerable: true,\n            configurable: true\n        });\n        Object.defineProperty(UserInputElement.prototype, \"disabled\", {\n            get: function () {\n                return this._disabled;\n            },\n            set: function (value) {\n                var hasChanged = this._disabled != value;\n                if (hasChanged) {\n                    this._disabled = value;\n                    if (value) {\n                        this.el.setAttribute(\"disabled\", \"disabled\");\n                    }\n                    else {\n                        this.setFocusOnInput();\n                        this.el.removeAttribute(\"disabled\");\n                    }\n                }\n            },\n            enumerable: true,\n            configurable: true\n        });\n        Object.defineProperty(UserInputElement.prototype, \"height\", {\n            get: function () {\n                var elHeight = 0;\n                var elMargin = 0;\n                var el = this.el;\n                if (cf.Helpers.isInternetExlorer()) {\n                    // IE\n                    elHeight = el.offsetHeight;\n                    elMargin = parseInt(el.currentStyle.marginTop, 10) + parseInt(el.currentStyle.marginBottom, 10);\n                    elMargin *= 2;\n                }\n                else {\n                    // none-IE\n                    elHeight = parseInt(document.defaultView.getComputedStyle(el, '').getPropertyValue('height'), 10);\n                    elMargin = parseInt(document.defaultView.getComputedStyle(el, '').getPropertyValue('margin-top')) + parseInt(document.defaultView.getComputedStyle(el, '').getPropertyValue('margin-bottom'));\n                }\n                return (elHeight + elMargin);\n            },\n            enumerable: true,\n            configurable: true\n        });\n        UserInputElement.prototype.onEnterOrSubmitButtonSubmit = function (event) {\n            if (event === void 0) { event = null; }\n        };\n        UserInputElement.prototype.inputInvalid = function (event) {\n        };\n        /**\n        * @name deactivate\n        * DEactivate the field\n        */\n        UserInputElement.prototype.deactivate = function () {\n            this.disabled = true;\n        };\n        /**\n        * @name reactivate\n        * REactivate the field\n        */\n        UserInputElement.prototype.reactivate = function () {\n            this.disabled = false;\n        };\n        UserInputElement.prototype.getFlowDTO = function () {\n            var value; // = this.inputElement.value;\n            return value;\n        };\n        UserInputElement.prototype.setFocusOnInput = function () {\n        };\n        UserInputElement.prototype.onFlowStopped = function () {\n        };\n        UserInputElement.prototype.reset = function () {\n        };\n        UserInputElement.prototype.dealloc = function () {\n            this.eventTarget.removeEventListener(cf.ChatListEvents.CHATLIST_UPDATED, this.onChatReponsesUpdatedCallback, false);\n            this.onChatReponsesUpdatedCallback = null;\n            this.eventTarget.removeEventListener(cf.FlowEvents.USER_INPUT_INVALID, this.inputInvalidCallback, false);\n            this.inputInvalidCallback = null;\n            window.removeEventListener('focus', this.windowFocusCallback, false);\n            this.windowFocusCallback = null;\n            this.eventTarget.removeEventListener(cf.FlowEvents.FLOW_UPDATE, this.flowUpdateCallback, false);\n            this.flowUpdateCallback = null;\n            _super.prototype.dealloc.call(this);\n        };\n        UserInputElement.prototype.onFlowUpdate = function (event) {\n            cf.ConversationalForm.illustrateFlow(this, \"receive\", event.type, event.detail);\n            this._currentTag = event.detail.tag;\n        };\n        UserInputElement.prototype.windowFocus = function (event) {\n        };\n        UserInputElement.prototype.onChatReponsesUpdated = function (event) {\n            // only show when user response\n            if (!event.detail.currentResponse.isRobotResponse) {\n                this.visible = true;\n                this.disabled = false;\n                this.setFocusOnInput();\n            }\n        };\n        UserInputElement.ERROR_TIME = 2000;\n        UserInputElement.preventAutoFocus = false;\n        UserInputElement.hideUserInputOnNoneTextInput = false;\n        return UserInputElement;\n    }(cf.BasicElement));\n    cf.UserInputElement = UserInputElement;\n    cf.UserInputEvents = {\n        SUBMIT: \"cf-input-user-input-submit\",\n        KEY_CHANGE: \"cf-input-key-change\",\n        CONTROL_ELEMENTS_ADDED: \"cf-input-control-elements-added\",\n        HEIGHT_CHANGE: \"cf-input-height-change\",\n        FOCUS: \"cf-input-focus\",\n        BLUR: \"cf-input-blur\",\n    };\n})(cf || (cf = {}));\n\n/// <reference path=\"../BasicElement.ts\"/>\n/// <reference path=\"../control-elements/ControlElements.ts\"/>\n/// <reference path=\"../../logic/FlowManager.ts\"/>\n/// <reference path=\"../../interfaces/IUserInputElement.ts\"/>\n/// <reference path=\"UserInputElement.ts\"/>\n/// <reference path=\"UserInputSubmitButton.ts\"/>\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    }\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n// namespace\nvar cf;\n(function (cf) {\n    // interface\n    // class\n    var UserTextInput = /** @class */ (function (_super) {\n        __extends(UserTextInput, _super);\n        function UserTextInput(options) {\n            var _this = _super.call(this, options) || this;\n            _this.initialInputHeight = 0;\n            _this.shiftIsDown = false;\n            //acts as a fallback for ex. shadow dom implementation\n            _this._active = false;\n            _this.cfReference = options.cfReference;\n            _this.eventTarget = options.eventTarget;\n            _this.inputElement = _this.el.getElementsByTagName(\"textarea\")[0];\n            _this.onInputFocusCallback = _this.onInputFocus.bind(_this);\n            _this.onInputBlurCallback = _this.onInputBlur.bind(_this);\n            _this.inputElement.addEventListener('focus', _this.onInputFocusCallback, false);\n            _this.inputElement.addEventListener('blur', _this.onInputBlurCallback, false);\n            if (!cf.ConversationalForm.animationsEnabled) {\n                _this.inputElement.setAttribute('no-animations', '');\n            }\n            //<cf-input-control-elements> is defined in the ChatList.ts\n            _this.controlElements = new cf.ControlElements({\n                el: _this.el.getElementsByTagName(\"cf-input-control-elements\")[0],\n                cfReference: _this.cfReference,\n                infoEl: _this.el.getElementsByTagName(\"cf-info\")[0],\n                eventTarget: _this.eventTarget\n            });\n            // setup event listeners\n            _this.keyUpCallback = _this.onKeyUp.bind(_this);\n            document.addEventListener(\"keyup\", _this.keyUpCallback, false);\n            _this.keyDownCallback = _this.onKeyDown.bind(_this);\n            document.addEventListener(\"keydown\", _this.keyDownCallback, false);\n            _this.onOriginalTagChangedCallback = _this.onOriginalTagChanged.bind(_this);\n            _this.eventTarget.addEventListener(cf.TagEvents.ORIGINAL_ELEMENT_CHANGED, _this.onOriginalTagChangedCallback, false);\n            _this.onControlElementSubmitCallback = _this.onControlElementSubmit.bind(_this);\n            _this.eventTarget.addEventListener(cf.ControlElementEvents.SUBMIT_VALUE, _this.onControlElementSubmitCallback, false);\n            _this.onControlElementProgressChangeCallback = _this.onControlElementProgressChange.bind(_this);\n            _this.eventTarget.addEventListener(cf.ControlElementEvents.PROGRESS_CHANGE, _this.onControlElementProgressChangeCallback, false);\n            _this.onSubmitButtonChangeStateCallback = _this.onSubmitButtonChangeState.bind(_this);\n            _this.eventTarget.addEventListener(cf.UserInputSubmitButtonEvents.CHANGE, _this.onSubmitButtonChangeStateCallback, false);\n            // this.eventTarget.addEventListener(ControlElementsEvents.ON_RESIZE, () => {}, false);\n            _this.submitButton = new cf.UserInputSubmitButton({\n                eventTarget: _this.eventTarget\n            });\n            _this.el.querySelector('div').appendChild(_this.submitButton.el);\n            // setup microphone support, audio\n            if (options.microphoneInputObj) {\n                _this.microphoneObj = options.microphoneInputObj;\n                if (_this.microphoneObj && _this.microphoneObj.init) {\n                    // init if init method is defined\n                    _this.microphoneObj.init();\n                }\n                _this.submitButton.addMicrophone(_this.microphoneObj);\n            }\n            return _this;\n        }\n        Object.defineProperty(UserTextInput.prototype, \"active\", {\n            get: function () {\n                return this.inputElement === document.activeElement || this._active;\n            },\n            enumerable: true,\n            configurable: true\n        });\n        Object.defineProperty(UserTextInput.prototype, \"disabled\", {\n            set: function (value) {\n                var hasChanged = this._disabled != value;\n                if (!cf.ConversationalForm.suppressLog)\n                    console.log('option hasChanged', value);\n                if (hasChanged) {\n                    this._disabled = value;\n                    if (value) {\n                        this.el.setAttribute(\"disabled\", \"disabled\");\n                        this.inputElement.blur();\n                    }\n                    else {\n                        this.setFocusOnInput();\n                        this.el.removeAttribute(\"disabled\");\n                    }\n                }\n            },\n            enumerable: true,\n            configurable: true\n        });\n        UserTextInput.prototype.getInputValue = function () {\n            var str = this.inputElement.value;\n            // Build-in way to handle XSS issues ->\n            var div = document.createElement('div');\n            div.appendChild(document.createTextNode(str));\n            return div.innerHTML;\n        };\n        UserTextInput.prototype.getFlowDTO = function () {\n            var value; // = this.inputElement.value;\n            // check for values on control elements as they should overwrite the input value.\n            if (this.controlElements && this.controlElements.active) {\n                value = this.controlElements.getDTO();\n            }\n            else {\n                value = {\n                    text: this.getInputValue()\n                };\n            }\n            // add current tag to DTO if not set\n            if (!value.tag)\n                value.tag = this.currentTag;\n            value.input = this;\n            value.tag = this.currentTag;\n            return value;\n        };\n        UserTextInput.prototype.reset = function () {\n            if (this.controlElements) {\n                this.controlElements.clearTagsAndReset();\n            }\n        };\n        UserTextInput.prototype.deactivate = function () {\n            _super.prototype.deactivate.call(this);\n            if (this.microphoneObj) {\n                this.submitButton.active = false;\n            }\n        };\n        UserTextInput.prototype.reactivate = function () {\n            _super.prototype.reactivate.call(this);\n            // called from microphone interface, check if active microphone, and set loading if yes\n            if (this.microphoneObj && !this.submitButton.typing) {\n                this.submitButton.loading = true;\n                // setting typing to false calls the externa interface, like Microphone\n                this.submitButton.typing = false;\n                this.submitButton.active = true;\n            }\n        };\n        UserTextInput.prototype.onFlowStopped = function () {\n            this.submitButton.loading = false;\n            if (this.submitButton.typing)\n                this.submitButton.typing = false;\n            if (this.controlElements)\n                this.controlElements.clearTagsAndReset();\n            this.disabled = true;\n        };\n        /**\n        * @name onOriginalTagChanged\n        * on domElement from a Tag value changed..\n        */\n        UserTextInput.prototype.onOriginalTagChanged = function (event) {\n            if (this.currentTag == event.detail.tag) {\n                this.onInputChange();\n            }\n            if (this.controlElements && this.controlElements.active) {\n                this.controlElements.updateStateOnElementsFromTag(event.detail.tag);\n            }\n        };\n        UserTextInput.prototype.onInputChange = function () {\n            if (!this.active && !this.controlElements.active)\n                return;\n            // safari likes to jump around with the scrollHeight value, let's keep it in check with an initial height.\n            var oldHeight = Math.max(this.initialInputHeight, parseInt(this.inputElement.style.height, 10));\n            this.inputElement.style.height = '0px';\n            // console.log(this.inputElement.style.height, this.inputElement.style);\n            this.inputElement.style.height = (this.inputElement.scrollHeight === 0 ? oldHeight : this.inputElement.scrollHeight) + \"px\";\n            cf.ConversationalForm.illustrateFlow(this, \"dispatch\", cf.UserInputEvents.HEIGHT_CHANGE);\n            this.eventTarget.dispatchEvent(new CustomEvent(cf.UserInputEvents.HEIGHT_CHANGE, {\n                detail: this.inputElement.scrollHeight\n            }));\n        };\n        UserTextInput.prototype.resetInputHeight = function () {\n            if (this.inputElement.getAttribute('rows') === '1') {\n                this.inputElement.style.height = this.initialInputHeight + 'px';\n            }\n            else {\n                this.inputElement.style.height = '0px';\n            }\n        };\n        UserTextInput.prototype.inputInvalid = function (event) {\n            var _this = this;\n            cf.ConversationalForm.illustrateFlow(this, \"receive\", event.type, event.detail);\n            var dto = event.detail;\n            this.inputElement.setAttribute(\"data-value\", this.inputElement.value);\n            this.inputElement.value = \"\";\n            this.el.setAttribute(\"error\", \"\");\n            this.disabled = true;\n            // cf-error\n            this.inputElement.setAttribute(\"placeholder\", dto.errorText || (this._currentTag ? this._currentTag.errorMessage : \"\"));\n            clearTimeout(this.errorTimer);\n            // remove loading class\n            this.submitButton.loading = false;\n            this.errorTimer = setTimeout(function () {\n                _this.disabled = false;\n                if (!cf.ConversationalForm.suppressLog)\n                    console.log('option, disabled 1');\n                _this.el.removeAttribute(\"error\");\n                _this.inputElement.value = _this.inputElement.getAttribute(\"data-value\");\n                _this.inputElement.setAttribute(\"data-value\", \"\");\n                _this.setPlaceholder();\n                _this.setFocusOnInput();\n                //TODO: reset submit button..\n                _this.submitButton.reset();\n                if (_this.controlElements)\n                    _this.controlElements.resetAfterErrorMessage();\n            }, cf.UserInputElement.ERROR_TIME);\n        };\n        UserTextInput.prototype.setPlaceholder = function () {\n            if (this._currentTag) {\n                if (this._currentTag.inputPlaceholder) {\n                    this.inputElement.setAttribute(\"placeholder\", this._currentTag.inputPlaceholder);\n                }\n                else {\n                    this.inputElement.setAttribute(\"placeholder\", this._currentTag.type == \"group\" ? cf.Dictionary.get(\"group-placeholder\") : cf.Dictionary.get(\"input-placeholder\"));\n                }\n            }\n            else {\n                this.inputElement.setAttribute(\"placeholder\", cf.Dictionary.get(\"group-placeholder\"));\n            }\n        };\n        /**\n         * TODO: handle detect input/textarea in a simpler way - too conditional heavy\n         *\n         * @private\n         * @memberof UserTextInput\n         */\n        UserTextInput.prototype.checkForCorrectInputTag = function () {\n            var tagName = this.tagType(this._currentTag);\n            // remove focus and blur events, because we want to create a new element\n            if (this.inputElement && this.inputElement.tagName !== tagName) {\n                this.inputElement.removeEventListener('focus', this.onInputFocusCallback, false);\n                this.inputElement.removeEventListener('blur', this.onInputBlurCallback, false);\n            }\n            this.removeAttribute('autocomplete');\n            this.removeAttribute('list');\n            if (tagName === 'INPUT') {\n                // change to input\n                var input_1 = document.createElement(\"input\");\n                Array.prototype.slice.call(this.inputElement.attributes).forEach(function (item) {\n                    input_1.setAttribute(item.name, item.value);\n                });\n                if (this.inputElement.type === 'password') {\n                    input_1.setAttribute(\"autocomplete\", \"new-password\");\n                }\n                if (this._currentTag.domElement.hasAttribute('autocomplete')) {\n                    input_1.setAttribute('autocomplete', this._currentTag.domElement.getAttribute('autocomplete'));\n                }\n                if (this._currentTag.domElement.hasAttribute('list')) {\n                    input_1.setAttribute('list', this._currentTag.domElement.getAttribute('list'));\n                }\n                this.inputElement.parentNode.replaceChild(input_1, this.inputElement);\n                this.inputElement = input_1;\n            }\n            else if (this.inputElement && this.inputElement.tagName !== tagName) {\n                // change to textarea\n                var textarea_1 = document.createElement(\"textarea\");\n                Array.prototype.slice.call(this.inputElement.attributes).forEach(function (item) {\n                    textarea_1.setAttribute(item.name, item.value);\n                });\n                this.inputElement.parentNode.replaceChild(textarea_1, this.inputElement);\n                this.inputElement = textarea_1;\n            }\n            // add focus and blur events to newly created input element\n            if (this.inputElement && this.inputElement.tagName !== tagName) {\n                this.inputElement.addEventListener('focus', this.onInputFocusCallback, false);\n                this.inputElement.addEventListener('blur', this.onInputBlurCallback, false);\n            }\n            if (this.initialInputHeight == 0) {\n                // initial height not set\n                this.initialInputHeight = this.inputElement.offsetHeight;\n            }\n            this.setFocusOnInput();\n        };\n        /**\n         * Removes attribute on input element if attribute is present\n         *\n         * @private\n         * @param {string} attribute\n         * @memberof UserTextInput\n         */\n        UserTextInput.prototype.removeAttribute = function (attribute) {\n            if (this.inputElement\n                && this.inputElement.hasAttribute(attribute)) {\n                this.inputElement.removeAttribute(attribute);\n            }\n        };\n        UserTextInput.prototype.tagType = function (inputElement) {\n            if (!inputElement.domElement\n                || !inputElement.domElement.tagName) {\n                return 'TEXTAREA';\n            }\n            if (inputElement.domElement.tagName === 'TEXTAREA'\n                || (inputElement.domElement.hasAttribute('rows')\n                    && parseInt(inputElement.domElement.getAttribute('rows'), 10) > 1))\n                return 'TEXTAREA';\n            if (inputElement.domElement.tagName === 'INPUT')\n                return 'INPUT';\n            return 'TEXTAREA'; // TODO\n        };\n        UserTextInput.prototype.onFlowUpdate = function (event) {\n            var _this = this;\n            _super.prototype.onFlowUpdate.call(this, event);\n            this.submitButton.loading = false;\n            if (this.submitButton.typing)\n                this.submitButton.typing = false;\n            // animate input field in\n            this.el.setAttribute(\"tag-type\", this._currentTag.type);\n            // replace textarea and visa versa\n            this.checkForCorrectInputTag();\n            // set input field to type password if the dom input field is that, covering up the input\n            var isInputSpecificType = [\"password\", \"number\", \"email\", \"tel\"].indexOf(this._currentTag.type) !== -1;\n            this.inputElement.setAttribute(\"type\", isInputSpecificType ? this._currentTag.type : \"input\");\n            clearTimeout(this.errorTimer);\n            this.el.removeAttribute(\"error\");\n            this.inputElement.setAttribute(\"data-value\", \"\");\n            this.inputElement.value = \"\";\n            this.submitButton.loading = false;\n            this.setPlaceholder();\n            this.resetValue();\n            this.setFocusOnInput();\n            this.controlElements.reset();\n            if (this._currentTag.type == \"group\") {\n                this.buildControlElements(this._currentTag.elements);\n            }\n            else {\n                this.buildControlElements([this._currentTag]);\n            }\n            if (this._currentTag.defaultValue) {\n                this.inputElement.value = this._currentTag.defaultValue.toString();\n            }\n            if (this._currentTag.skipUserInput === true) {\n                this.el.classList.add(\"hide-input\");\n            }\n            else {\n                this.el.classList.remove(\"hide-input\");\n            }\n            // Set rows attribute if present\n            if (this._currentTag.rows && this._currentTag.rows > 1) {\n                this.inputElement.setAttribute('rows', this._currentTag.rows.toString());\n            }\n            if (cf.UserInputElement.hideUserInputOnNoneTextInput) {\n                // toggle userinput hide\n                if (this.controlElements.active) {\n                    this.el.classList.add(\"hide-input\");\n                    // set focus on first control element\n                    this.controlElements.focusFrom(\"bottom\");\n                }\n                else {\n                    this.el.classList.remove(\"hide-input\");\n                }\n            }\n            this.resetInputHeight();\n            setTimeout(function () {\n                _this.onInputChange();\n            }, 300);\n        };\n        UserTextInput.prototype.onControlElementProgressChange = function (event) {\n            var status = event.detail;\n            this.disabled = status == cf.ControlElementProgressStates.BUSY;\n            if (!cf.ConversationalForm.suppressLog)\n                console.log('option, disabled 2');\n        };\n        UserTextInput.prototype.buildControlElements = function (tags) {\n            this.controlElements.buildTags(tags);\n        };\n        UserTextInput.prototype.onControlElementSubmit = function (event) {\n            cf.ConversationalForm.illustrateFlow(this, \"receive\", event.type, event.detail);\n            // when ex a RadioButton is clicked..\n            var controlElement = event.detail;\n            this.controlElements.updateStateOnElements(controlElement);\n            this.doSubmit();\n        };\n        UserTextInput.prototype.onSubmitButtonChangeState = function (event) {\n            this.onEnterOrSubmitButtonSubmit(event);\n        };\n        UserTextInput.prototype.isMetaKeyPressed = function (event) {\n            // if any meta keys, then ignore, getModifierState, but safari does not support..\n            if (event.metaKey || [91, 93].indexOf(event.keyCode) !== -1)\n                return;\n        };\n        UserTextInput.prototype.onKeyDown = function (event) {\n            if (!this.active && !this.controlElements.focus)\n                return;\n            if (this.isControlElementsActiveAndUserInputHidden())\n                return;\n            if (this.isMetaKeyPressed(event))\n                return;\n            // if any meta keys, then ignore\n            if (event.keyCode == cf.Dictionary.keyCodes[\"shift\"])\n                this.shiftIsDown = true;\n            // If submit is prevented by option 'preventSubmitOnEnter'\n            if (this.cfReference.preventSubmitOnEnter === true && this.inputElement.hasAttribute('rows') && parseInt(this.inputElement.getAttribute('rows')) > 1) {\n                return;\n            }\n            // prevent textarea line breaks\n            if (event.keyCode == cf.Dictionary.keyCodes[\"enter\"] && !event.shiftKey) {\n                event.preventDefault();\n            }\n        };\n        UserTextInput.prototype.isControlElementsActiveAndUserInputHidden = function () {\n            return this.controlElements && this.controlElements.active && cf.UserInputElement.hideUserInputOnNoneTextInput;\n        };\n        UserTextInput.prototype.onKeyUp = function (event) {\n            if ((!this.active && !this.isControlElementsActiveAndUserInputHidden()) && !this.controlElements.focus)\n                return;\n            if (this.isMetaKeyPressed(event))\n                return;\n            if (event.keyCode == cf.Dictionary.keyCodes[\"shift\"]) {\n                this.shiftIsDown = false;\n            }\n            else if (event.keyCode == cf.Dictionary.keyCodes[\"up\"]) {\n                event.preventDefault();\n                if (this.active && !this.controlElements.focus)\n                    this.controlElements.focusFrom(\"bottom\");\n            }\n            else if (event.keyCode == cf.Dictionary.keyCodes[\"down\"]) {\n                event.preventDefault();\n                if (this.active && !this.controlElements.focus)\n                    this.controlElements.focusFrom(\"top\");\n            }\n            else if (event.keyCode == cf.Dictionary.keyCodes[\"tab\"]) {\n                // tab key pressed, check if node is child of CF, if then then reset focus to input element\n                var doesKeyTargetExistInCF = false;\n                var node = event.target.parentNode;\n                while (node != null) {\n                    if (node === this.cfReference.el) {\n                        doesKeyTargetExistInCF = true;\n                        break;\n                    }\n                    node = node.parentNode;\n                }\n                // prevent normal behaviour, we are not here to take part, we are here to take over!\n                if (!doesKeyTargetExistInCF) {\n                    event.preventDefault();\n                    if (!this.controlElements.active)\n                        this.setFocusOnInput();\n                }\n            }\n            if (this.el.hasAttribute(\"disabled\"))\n                return;\n            var value = this.getFlowDTO();\n            if ((event.keyCode == cf.Dictionary.keyCodes[\"enter\"] && !event.shiftKey) || event.keyCode == cf.Dictionary.keyCodes[\"space\"]) {\n                if (event.keyCode == cf.Dictionary.keyCodes[\"enter\"] && this.active) {\n                    if (this.cfReference.preventSubmitOnEnter === true)\n                        return;\n                    event.preventDefault();\n                    this.onEnterOrSubmitButtonSubmit();\n                }\n                else {\n                    // either click on submit button or do something with control elements\n                    if (event.keyCode == cf.Dictionary.keyCodes[\"enter\"] || event.keyCode == cf.Dictionary.keyCodes[\"space\"]) {\n                        event.preventDefault();\n                        var tagType = this._currentTag.type == \"group\" ? this._currentTag.getGroupTagType() : this._currentTag.type;\n                        if (tagType == \"select\" || tagType == \"checkbox\") {\n                            var mutiTag = this._currentTag;\n                            // if select or checkbox then check for multi select item\n                            if (tagType == \"checkbox\" || mutiTag.multipleChoice) {\n                                if ((this.active || this.isControlElementsActiveAndUserInputHidden()) && event.keyCode == cf.Dictionary.keyCodes[\"enter\"]) {\n                                    // click on UserTextInput submit button, only ENTER allowed\n                                    this.submitButton.click();\n                                }\n                                else {\n                                    // let UI know that we changed the key\n                                    if (!this.active && !this.controlElements.active && !this.isControlElementsActiveAndUserInputHidden()) {\n                                        // after ui has been selected we RESET the input/filter\n                                        this.resetValue();\n                                        this.setFocusOnInput();\n                                    }\n                                    this.dispatchKeyChange(value, event.keyCode);\n                                }\n                            }\n                            else {\n                                this.dispatchKeyChange(value, event.keyCode);\n                            }\n                        }\n                        else {\n                            if (this._currentTag.type == \"group\") {\n                                // let the controlements handle action\n                                this.dispatchKeyChange(value, event.keyCode);\n                            }\n                        }\n                    }\n                    else if (event.keyCode == cf.Dictionary.keyCodes[\"space\"] && document.activeElement) {\n                        this.dispatchKeyChange(value, event.keyCode);\n                    }\n                }\n            }\n            else if (event.keyCode != cf.Dictionary.keyCodes[\"shift\"] && event.keyCode != cf.Dictionary.keyCodes[\"tab\"]) {\n                this.dispatchKeyChange(value, event.keyCode);\n            }\n            this.onInputChange();\n        };\n        UserTextInput.prototype.dispatchKeyChange = function (dto, keyCode) {\n            // typing --->\n            this.submitButton.typing = dto.text && dto.text.length > 0;\n            cf.ConversationalForm.illustrateFlow(this, \"dispatch\", cf.UserInputEvents.KEY_CHANGE, dto);\n            this.eventTarget.dispatchEvent(new CustomEvent(cf.UserInputEvents.KEY_CHANGE, {\n                detail: {\n                    dto: dto,\n                    keyCode: keyCode,\n                    inputFieldActive: this.active\n                }\n            }));\n        };\n        UserTextInput.prototype.windowFocus = function (event) {\n            _super.prototype.windowFocus.call(this, event);\n            this.setFocusOnInput();\n        };\n        UserTextInput.prototype.onInputBlur = function (event) {\n            this._active = false;\n            this.eventTarget.dispatchEvent(new CustomEvent(cf.UserInputEvents.BLUR));\n        };\n        UserTextInput.prototype.onInputFocus = function (event) {\n            this._active = true;\n            this.onInputChange();\n            this.eventTarget.dispatchEvent(new CustomEvent(cf.UserInputEvents.FOCUS));\n        };\n        UserTextInput.prototype.setFocusOnInput = function () {\n            if (!cf.UserInputElement.preventAutoFocus && !this.el.classList.contains(\"hide-input\")) {\n                this.inputElement.focus();\n            }\n        };\n        UserTextInput.prototype.onEnterOrSubmitButtonSubmit = function (event) {\n            if (event === void 0) { event = null; }\n            var isControlElementsActiveAndUserInputHidden = this.controlElements.active && cf.UserInputElement.hideUserInputOnNoneTextInput;\n            if ((this.active || isControlElementsActiveAndUserInputHidden) && this.controlElements.highlighted) {\n                // active input field and focus on control elements happens when a control element is highlighted\n                this.controlElements.clickOnHighlighted();\n            }\n            else {\n                if (!this._currentTag) {\n                    // happens when a form is empty, so just play along and submit response to chatlist..\n                    this.eventTarget.cf.addUserChatResponse(this.inputElement.value);\n                }\n                else {\n                    // we need to check if current tag is file\n                    if (this._currentTag.type == \"file\" && event) {\n                        // trigger <input type=\"file\" but only when it's from clicking button\n                        this.controlElements.getElement(0).triggerFileSelect();\n                    }\n                    else {\n                        // for groups, we expect that there is always a default value set\n                        this.doSubmit();\n                    }\n                }\n            }\n        };\n        UserTextInput.prototype.doSubmit = function () {\n            var dto = this.getFlowDTO();\n            this.submitButton.loading = true;\n            this.disabled = true;\n            this.el.removeAttribute(\"error\");\n            this.inputElement.setAttribute(\"data-value\", \"\");\n            cf.ConversationalForm.illustrateFlow(this, \"dispatch\", cf.UserInputEvents.SUBMIT, dto);\n            this.eventTarget.dispatchEvent(new CustomEvent(cf.UserInputEvents.SUBMIT, {\n                detail: dto\n            }));\n        };\n        UserTextInput.prototype.resetValue = function () {\n            this.inputElement.value = \"\";\n            if (this.inputElement.hasAttribute('rows'))\n                this.inputElement.setAttribute('rows', '1');\n            this.onInputChange();\n        };\n        UserTextInput.prototype.dealloc = function () {\n            this.inputElement.removeEventListener('blur', this.onInputBlurCallback, false);\n            this.onInputBlurCallback = null;\n            this.inputElement.removeEventListener('focus', this.onInputFocusCallback, false);\n            this.onInputFocusCallback = null;\n            document.removeEventListener(\"keydown\", this.keyDownCallback, false);\n            this.keyDownCallback = null;\n            document.removeEventListener(\"keyup\", this.keyUpCallback, false);\n            this.keyUpCallback = null;\n            this.eventTarget.removeEventListener(cf.ControlElementEvents.SUBMIT_VALUE, this.onControlElementSubmitCallback, false);\n            this.onControlElementSubmitCallback = null;\n            // remove submit button instance\n            this.submitButton.el.removeEventListener(cf.UserInputSubmitButtonEvents.CHANGE, this.onSubmitButtonChangeStateCallback, false);\n            this.onSubmitButtonChangeStateCallback = null;\n            this.submitButton.dealloc();\n            this.submitButton = null;\n            _super.prototype.dealloc.call(this);\n        };\n        // override\n        UserTextInput.prototype.getTemplate = function () {\n            return this.customTemplate || \"<cf-input>\\n\\t\\t\\t\\t<cf-info></cf-info>\\n\\t\\t\\t\\t<cf-input-control-elements>\\n\\t\\t\\t\\t\\t<cf-list-button direction=\\\"prev\\\">\\n\\t\\t\\t\\t\\t</cf-list-button>\\n\\t\\t\\t\\t\\t<cf-list-button direction=\\\"next\\\">\\n\\t\\t\\t\\t\\t</cf-list-button>\\n\\t\\t\\t\\t\\t<cf-list>\\n\\t\\t\\t\\t\\t</cf-list>\\n\\t\\t\\t\\t</cf-input-control-elements>\\n\\t\\t\\t\\t<div class=\\\"inputWrapper\\\">\\n\\t\\t\\t\\t\\t<textarea type='input' tabindex=\\\"1\\\" rows=\\\"1\\\"></textarea>\\n\\t\\t\\t\\t</div>\\n\\t\\t\\t</cf-input>\\n\\t\\t\\t\";\n        };\n        return UserTextInput;\n    }(cf.UserInputElement));\n    cf.UserTextInput = UserTextInput;\n})(cf || (cf = {}));\n\n/// <reference path=\"../BasicElement.ts\"/>\n/// <reference path=\"../../logic/Helpers.ts\"/>\n/// <reference path=\"../../ConversationalForm.ts\"/>\n/// <reference path=\"../../interfaces/IUserInterfaceOptions.ts\"/>\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    }\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n// namespace\nvar cf;\n(function (cf) {\n    cf.ChatResponseEvents = {\n        USER_ANSWER_CLICKED: \"cf-on-user-answer-clicked\"\n    };\n    // class\n    var ChatResponse = /** @class */ (function (_super) {\n        __extends(ChatResponse, _super);\n        function ChatResponse(options) {\n            var _this = _super.call(this, options) || this;\n            _this.container = options.container;\n            _this.uiOptions = options.cfReference.uiOptions;\n            _this._tag = options.tag;\n            return _this;\n        }\n        Object.defineProperty(ChatResponse.prototype, \"tag\", {\n            get: function () {\n                return this._tag;\n            },\n            enumerable: true,\n            configurable: true\n        });\n        Object.defineProperty(ChatResponse.prototype, \"added\", {\n            get: function () {\n                return !!this.el || !!this.el.parentNode || !!this.el.parentNode.parentNode;\n            },\n            enumerable: true,\n            configurable: true\n        });\n        Object.defineProperty(ChatResponse.prototype, \"disabled\", {\n            get: function () {\n                return this.el.classList.contains(\"disabled\");\n            },\n            set: function (value) {\n                if (value)\n                    this.el.classList.add(\"disabled\");\n                else\n                    this.el.classList.remove(\"disabled\");\n            },\n            enumerable: true,\n            configurable: true\n        });\n        /**\n         * We depend on scroll in a column-reverse flex container. This is where Edge and Firefox comes up short\n         */\n        ChatResponse.prototype.hasFlexBug = function () {\n            return this.cfReference.el.classList.contains('browser-firefox') || this.cfReference.el.classList.contains('browser-edge');\n        };\n        ChatResponse.prototype.animateIn = function () {\n            var _this = this;\n            var outer = document.querySelector('scrollable');\n            var inner = document.querySelector('.scrollableInner');\n            if (this.hasFlexBug())\n                inner.classList.remove('scroll');\n            requestAnimationFrame(function () {\n                var height = _this.el.scrollHeight;\n                _this.el.style.height = '0px';\n                requestAnimationFrame(function () {\n                    _this.el.style.height = height + 'px';\n                    _this.el.classList.add('show');\n                    // Listen for transitionend and set to height:auto\n                    try {\n                        var sm = window.getComputedStyle(document.querySelectorAll('p.show')[0]);\n                        var cssAnimationTime = +sm.animationDuration.replace('s', ''); // format '0.234234xs\n                        var cssAnimationDelayTime = +sm.animationDelay.replace('s', '');\n                        setTimeout(function () {\n                            _this.el.style.height = 'auto';\n                            if (_this.hasFlexBug() && inner.scrollHeight > outer.offsetHeight) {\n                                inner.classList.add('scroll');\n                                inner.scrollTop = inner.scrollHeight;\n                            }\n                        }, (cssAnimationTime + cssAnimationDelayTime) * 1500);\n                    }\n                    catch (err) {\n                        // Fallback method. Assuming animations do not take longer than 1000ms\n                        setTimeout(function () {\n                            if (_this.hasFlexBug() && inner.scrollHeight > outer.offsetHeight) {\n                                inner.classList.add('scroll');\n                                inner.scrollTop = inner.scrollHeight;\n                            }\n                            _this.el.style.height = 'auto';\n                        }, 3000);\n                    }\n                });\n            });\n        };\n        Object.defineProperty(ChatResponse.prototype, \"visible\", {\n            set: function (value) {\n            },\n            enumerable: true,\n            configurable: true\n        });\n        Object.defineProperty(ChatResponse.prototype, \"strippedSesponse\", {\n            get: function () {\n                var html = this.response;\n                // use browsers native way of stripping\n                var div = document.createElement(\"div\");\n                div.innerHTML = html;\n                return div.textContent || div.innerText || \"\";\n            },\n            enumerable: true,\n            configurable: true\n        });\n        ChatResponse.prototype.whenReady = function (resolve) {\n            this.onReadyCallback = resolve;\n        };\n        ChatResponse.prototype.setValue = function (dto) {\n            // if(!this.visible){\n            // \tthis.visible = true;\n            // }\n            if (dto === void 0) { dto = null; }\n            var isThinking = this.el.hasAttribute(\"thinking\");\n            if (!dto) {\n                this.setToThinking();\n            }\n            else {\n                // same same\n                this.response = this.originalResponse = dto.text;\n                this.processResponseAndSetText();\n                if (this.responseLink && !this.isRobotResponse) {\n                    // call robot and update for binding values ->\n                    this.responseLink.processResponseAndSetText();\n                }\n                // check for if response type is file upload...\n                if (dto && dto.controlElements && dto.controlElements[0]) {\n                    switch (dto.controlElements[0].type) {\n                        case \"UploadFileUI\":\n                            this.textEl.classList.add(\"file-icon\");\n                            break;\n                    }\n                }\n                if (!this.isRobotResponse && !this.onClickCallback) {\n                    // edit\n                    this.onClickCallback = this.onClick.bind(this);\n                    this.el.addEventListener(cf.Helpers.getMouseEvent(\"click\"), this.onClickCallback, false);\n                }\n            }\n        };\n        ChatResponse.prototype.show = function () {\n            this.visible = true;\n            this.disabled = false;\n            if (!this.response) {\n                this.setToThinking();\n            }\n            else {\n                this.checkForEditMode();\n            }\n        };\n        ChatResponse.prototype.updateThumbnail = function (src) {\n            var thumbEl = this.el.getElementsByTagName(\"thumb\")[0];\n            if (src.indexOf(\"text:\") === 0) {\n                var thumbElSpan = thumbEl.getElementsByTagName(\"span\")[0];\n                thumbElSpan.innerHTML = src.split(\"text:\")[1];\n                thumbElSpan.setAttribute(\"length\", src.length.toString());\n            }\n            else {\n                this.image = src;\n                thumbEl.style.backgroundImage = 'url(\"' + this.image + '\")';\n            }\n        };\n        ChatResponse.prototype.setLinkToOtherReponse = function (response) {\n            // link reponse to another one, keeping the update circle complete.\n            this.responseLink = response;\n        };\n        ChatResponse.prototype.processResponseAndSetText = function () {\n            var _this = this;\n            if (!this.originalResponse)\n                return;\n            var innerResponse = this.originalResponse;\n            if (this._tag && this._tag.type == \"password\" && !this.isRobotResponse) {\n                var newStr = \"\";\n                for (var i_1 = 0; i_1 < innerResponse.length; i_1++) {\n                    newStr += \"*\";\n                }\n                innerResponse = newStr;\n            }\n            // if robot, then check linked response for binding values\n            if (this.responseLink && this.isRobotResponse) {\n                // one way data binding values:\n                innerResponse = innerResponse.split(\"{previous-answer}\").join(this.responseLink.parsedResponse);\n            }\n            if (this.isRobotResponse) {\n                // Piping, look through IDs, and map values to dynamics\n                var reponses = ChatResponse.list.getResponses();\n                for (var i = 0; i < reponses.length; i++) {\n                    var response = reponses[i];\n                    if (response !== this) {\n                        if (response.tag) {\n                            // check for id, standard\n                            if (response.tag.id) {\n                                innerResponse = innerResponse.split(\"{\" + response.tag.id + \"}\").join(response.tag.value);\n                            }\n                            //fallback check for name\n                            if (response.tag.name) {\n                                innerResponse = innerResponse.split(\"{\" + response.tag.name + \"}\").join(response.tag.value);\n                            }\n                        }\n                    }\n                }\n            }\n            // check if response contains an image as answer\n            var responseContains = innerResponse.indexOf(\"contains-image\") != -1;\n            if (responseContains)\n                this.textEl.classList.add(\"contains-image\");\n            // now set it\n            if (this.isRobotResponse) {\n                this.textEl.innerHTML = \"\";\n                if (!this.uiOptions)\n                    this.uiOptions = this.cfReference.uiOptions; // On edit uiOptions are empty, so this mitigates the problem. Not ideal.\n                var robotInitResponseTime = this.uiOptions.robot.robotResponseTime;\n                if (robotInitResponseTime != 0) {\n                    this.setToThinking();\n                }\n                // robot response, allow for && for multiple responses\n                var chainedResponses = innerResponse.split(\"&&\");\n                if (robotInitResponseTime === 0) {\n                    for (var i_2 = 0; i_2 < chainedResponses.length; i_2++) {\n                        var str = chainedResponses[i_2];\n                        this.textEl.innerHTML += \"<p>\" + str + \"</p>\";\n                    }\n                    var _loop_1 = function (i_3) {\n                        setTimeout(function () {\n                            _this.tryClearThinking();\n                            var p = _this.textEl.getElementsByTagName(\"p\");\n                            p[i_3].classList.add(\"show\");\n                            _this.scrollTo();\n                        }, chainedResponses.length > 1 && i_3 > 0 ? robotInitResponseTime + ((i_3 + 1) * this_1.uiOptions.robot.chainedResponseTime) : 0);\n                    };\n                    var this_1 = this;\n                    for (var i_3 = 0; i_3 < chainedResponses.length; i_3++) {\n                        _loop_1(i_3);\n                    }\n                }\n                else {\n                    var _loop_2 = function (i_4) {\n                        var revealAfter = robotInitResponseTime + (i_4 * this_2.uiOptions.robot.chainedResponseTime);\n                        var str = chainedResponses[i_4];\n                        setTimeout(function () {\n                            _this.tryClearThinking();\n                            _this.textEl.innerHTML += \"<p>\" + str + \"</p>\";\n                            var p = _this.textEl.getElementsByTagName(\"p\");\n                            p[i_4].classList.add(\"show\");\n                            _this.scrollTo();\n                        }, revealAfter);\n                    };\n                    var this_2 = this;\n                    for (var i_4 = 0; i_4 < chainedResponses.length; i_4++) {\n                        _loop_2(i_4);\n                    }\n                }\n                this.readyTimer = setTimeout(function () {\n                    if (_this.onReadyCallback)\n                        _this.onReadyCallback();\n                    // reset, as it can be called again\n                    _this.onReadyCallback = null;\n                    if (_this._tag && _this._tag.skipUserInput === true) {\n                        setTimeout(function () {\n                            _this._tag.flowManager.nextStep();\n                            _this._tag.skipUserInput = false; // to avoid nextStep being fired again as this would make the flow jump too far when editing a response\n                        }, _this.uiOptions.robot.chainedResponseTime);\n                    }\n                }, robotInitResponseTime + (chainedResponses.length * this.uiOptions.robot.chainedResponseTime));\n            }\n            else {\n                // user response, act normal\n                this.tryClearThinking();\n                var hasImage = innerResponse.indexOf('<img') > -1;\n                var imageRegex = new RegExp('<img[^>]*?>', 'g');\n                var imageTag = innerResponse.match(imageRegex);\n                if (hasImage && imageTag) {\n                    innerResponse = innerResponse.replace(imageTag[0], '');\n                    this.textEl.innerHTML = \"<p class=\\\"hasImage\\\">\" + imageTag + \"<span>\" + innerResponse + \"</span></p>\";\n                }\n                else {\n                    this.textEl.innerHTML = \"<p>\" + innerResponse + \"</p>\";\n                }\n                var p = this.textEl.getElementsByTagName(\"p\");\n                p[p.length - 1].offsetWidth;\n                p[p.length - 1].classList.add(\"show\");\n                this.scrollTo();\n            }\n            this.parsedResponse = innerResponse;\n            // }\n            // value set, so add element, if not added\n            if (this.uiOptions.robot\n                && this.uiOptions.robot.robotResponseTime === 0) {\n                this.addSelf();\n            }\n            else {\n                setTimeout(function () {\n                    _this.addSelf();\n                }, 0);\n            }\n            // bounce\n            this.textEl.removeAttribute(\"value-added\");\n            setTimeout(function () {\n                _this.textEl.setAttribute(\"value-added\", \"\");\n                _this.el.classList.add(\"peak-thumb\");\n            }, 0);\n            this.checkForEditMode();\n            // update response\n            // remove the double ampersands if present\n            this.response = innerResponse.split(\"&&\").join(\" \");\n        };\n        ChatResponse.prototype.scrollTo = function () {\n            var y = this.el.offsetTop;\n            var h = this.el.offsetHeight;\n            if (!this.container && this.el)\n                this.container = this.el; // On edit this.container is empty so this is a fix to reassign it. Not ideal, but...\n            if (this.container\n                && this.container.parentElement\n                && this.container.parentElement.scrollHeight) {\n                this.container.parentElement.scrollTop = y + h + this.container.parentElement.scrollHeight;\n            }\n        };\n        ChatResponse.prototype.checkForEditMode = function () {\n            if (!this.isRobotResponse && !this.el.hasAttribute(\"thinking\")) {\n                this.el.classList.add(\"can-edit\");\n                this.disabled = false;\n            }\n        };\n        ChatResponse.prototype.tryClearThinking = function () {\n            if (this.el.hasAttribute(\"thinking\")) {\n                this.textEl.innerHTML = \"\";\n                this.el.removeAttribute(\"thinking\");\n            }\n        };\n        ChatResponse.prototype.setToThinking = function () {\n            var canShowThinking = (this.isRobotResponse && this.uiOptions.robot.robotResponseTime !== 0) || (!this.isRobotResponse && this.cfReference.uiOptions.user.showThinking && !this._tag.skipUserInput);\n            if (canShowThinking) {\n                this.textEl.innerHTML = ChatResponse.THINKING_MARKUP;\n                this.el.classList.remove(\"can-edit\");\n                this.el.setAttribute(\"thinking\", \"\");\n            }\n            if (this.cfReference.uiOptions.user.showThinking || this.cfReference.uiOptions.user.showThumb) {\n                this.addSelf();\n            }\n        };\n        /**\n        * @name addSelf\n        * add one self to the chat list\n        */\n        ChatResponse.prototype.addSelf = function () {\n            if (this.el.parentNode != this.container) {\n                this.container.appendChild(this.el);\n                this.animateIn();\n            }\n        };\n        /**\n        * @name onClickCallback\n        * click handler for el\n        */\n        ChatResponse.prototype.onClick = function (event) {\n            this.setToThinking();\n            cf.ConversationalForm.illustrateFlow(this, \"dispatch\", cf.ChatResponseEvents.USER_ANSWER_CLICKED, event);\n            this.eventTarget.dispatchEvent(new CustomEvent(cf.ChatResponseEvents.USER_ANSWER_CLICKED, {\n                detail: this._tag\n            }));\n        };\n        ChatResponse.prototype.setData = function (options) {\n            this.image = options.image;\n            this.response = this.originalResponse = options.response;\n            this.isRobotResponse = options.isRobotResponse;\n            _super.prototype.setData.call(this, options);\n        };\n        ChatResponse.prototype.onElementCreated = function () {\n            var _this = this;\n            this.textEl = this.el.getElementsByTagName(\"text\")[0];\n            this.updateThumbnail(this.image);\n            if (this.isRobotResponse || this.response != null) {\n                // Robot is pseudo thinking, can also be user -->\n                // , but if addUserChatResponse is called from ConversationalForm, then the value is there, therefore skip ...\n                setTimeout(function () {\n                    _this.setValue({ text: _this.response });\n                }, 0);\n                //ConversationalForm.animationsEnabled ? Helpers.lerp(Math.random(), 500, 900) : 0);\n            }\n            else {\n                if (this.cfReference.uiOptions.user.showThumb) {\n                    this.el.classList.add(\"peak-thumb\");\n                }\n            }\n        };\n        ChatResponse.prototype.dealloc = function () {\n            clearTimeout(this.readyTimer);\n            this.container = null;\n            this.uiOptions = null;\n            this.onReadyCallback = null;\n            if (this.onClickCallback) {\n                this.el.removeEventListener(cf.Helpers.getMouseEvent(\"click\"), this.onClickCallback, false);\n                this.onClickCallback = null;\n            }\n            _super.prototype.dealloc.call(this);\n        };\n        // template, can be overwritten ...\n        ChatResponse.prototype.getTemplate = function () {\n            return \"<cf-chat-response class=\\\"\" + (this.isRobotResponse ? \"robot\" : \"user\") + \"\\\">\\n\\t\\t\\t\\t<thumb><span></span></thumb>\\n\\t\\t\\t\\t<text></text>\\n\\t\\t\\t</cf-chat-response>\";\n        };\n        ChatResponse.THINKING_MARKUP = \"<p class='show'><thinking><span>.</span><span>.</span><span>.</span></thinking></p>\";\n        return ChatResponse;\n    }(cf.BasicElement));\n    cf.ChatResponse = ChatResponse;\n})(cf || (cf = {}));\n\n/// <reference path=\"ChatResponse.ts\"/>\n/// <reference path=\"../BasicElement.ts\"/>\n/// <reference path=\"../../logic/FlowManager.ts\"/>\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    }\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n// namespace\nvar cf;\n(function (cf) {\n    // interface\n    cf.ChatListEvents = {\n        CHATLIST_UPDATED: \"cf-chatlist-updated\"\n    };\n    // class\n    var ChatList = /** @class */ (function (_super) {\n        __extends(ChatList, _super);\n        function ChatList(options) {\n            var _this = _super.call(this, options) || this;\n            _this.updateTimer = 0;\n            cf.ChatResponse.list = _this;\n            _this.responses = [];\n            // flow update\n            _this.flowUpdateCallback = _this.onFlowUpdate.bind(_this);\n            _this.eventTarget.addEventListener(cf.FlowEvents.FLOW_UPDATE, _this.flowUpdateCallback, false);\n            // user input update\n            _this.userInputUpdateCallback = _this.onUserInputUpdate.bind(_this);\n            _this.eventTarget.addEventListener(cf.FlowEvents.USER_INPUT_UPDATE, _this.userInputUpdateCallback, false);\n            // user input key change\n            _this.onInputKeyChangeCallback = _this.onInputKeyChange.bind(_this);\n            _this.eventTarget.addEventListener(cf.UserInputEvents.KEY_CHANGE, _this.onInputKeyChangeCallback, false);\n            // user input height change\n            _this.onInputHeightChangeCallback = _this.onInputHeightChange.bind(_this);\n            _this.eventTarget.addEventListener(cf.UserInputEvents.HEIGHT_CHANGE, _this.onInputHeightChangeCallback, false);\n            // on control elements changed\n            _this.onControlElementsResizedCallback = _this.onControlElementsResized.bind(_this);\n            _this.eventTarget.addEventListener(cf.ControlElementsEvents.ON_RESIZE, _this.onControlElementsResizedCallback, false);\n            _this.onControlElementsChangedCallback = _this.onControlElementsChanged.bind(_this);\n            _this.eventTarget.addEventListener(cf.ControlElementsEvents.CHANGED, _this.onControlElementsChangedCallback, false);\n            return _this;\n        }\n        ChatList.prototype.onInputHeightChange = function (event) {\n            var dto = event.detail.dto;\n            cf.ConversationalForm.illustrateFlow(this, \"receive\", event.type, dto);\n            // this.input.controlElements.el.style.transition = \"height 2s ease-out\";\n            // this.input.controlElements.el.style.height = this.input.controlElements.el.scrollHeight + 'px';\n            this.onInputElementChanged();\n        };\n        ChatList.prototype.onInputKeyChange = function (event) {\n            var dto = event.detail.dto;\n            cf.ConversationalForm.illustrateFlow(this, \"receive\", event.type, dto);\n        };\n        ChatList.prototype.onUserInputUpdate = function (event) {\n            cf.ConversationalForm.illustrateFlow(this, \"receive\", event.type, event.detail);\n            if (this.currentUserResponse) {\n                var response = event.detail;\n                this.setCurrentUserResponse(response);\n            }\n        };\n        ChatList.prototype.addInput = function (input) {\n            this.input = input;\n        };\n        /**\n        * @name onControlElementsChanged\n        * on control elements change\n        */\n        ChatList.prototype.onControlElementsChanged = function (event) {\n            this.onInputElementChanged();\n        };\n        /**\n        * @name onControlElementsResized\n        * on control elements resize\n        */\n        ChatList.prototype.onControlElementsResized = function (event) {\n            cf.ConversationalForm.illustrateFlow(this, \"receive\", cf.ControlElementsEvents.ON_RESIZE);\n            var responseToScrollTo = this.currentResponse;\n            if (responseToScrollTo) {\n                if (!responseToScrollTo.added) {\n                    // element not added yet, so find closest\n                    for (var i = this.responses.indexOf(responseToScrollTo); i >= 0; i--) {\n                        var element = this.responses[i];\n                        if (element.added) {\n                            responseToScrollTo = element;\n                            break;\n                        }\n                    }\n                }\n                responseToScrollTo.scrollTo();\n            }\n            this.onInputElementChanged();\n        };\n        ChatList.prototype.onInputElementChanged = function () {\n            if (!this.cfReference || !this.cfReference.el)\n                return;\n            var cfHeight = this.cfReference.el.offsetHeight;\n            var inputHeight = this.input.height;\n            var listHeight = cfHeight - inputHeight;\n            //this.el.style.height = listHeight + \"px\";\n        };\n        ChatList.prototype.onFlowUpdate = function (event) {\n            var _this = this;\n            cf.ConversationalForm.illustrateFlow(this, \"receive\", event.type, event.detail);\n            var currentTag = event.detail.tag;\n            if (this.currentResponse)\n                this.currentResponse.disabled = false;\n            if (this.containsTagResponse(currentTag) && !event.detail.ignoreExistingTag) {\n                // because user maybe have scrolled up and wants to edit\n                // tag is already in list, so re-activate it\n                this.onUserWantsToEditTag(currentTag);\n            }\n            else {\n                // robot response\n                setTimeout(function () {\n                    var robot = _this.createResponse(true, currentTag, currentTag.question);\n                    robot.whenReady(function () {\n                        // create user response\n                        _this.currentUserResponse = _this.createResponse(false, currentTag);\n                        robot.scrollTo();\n                    });\n                    if (_this.currentUserResponse) {\n                        // linked, but only if we should not ignore existing tag\n                        _this.currentUserResponse.setLinkToOtherReponse(robot);\n                        robot.setLinkToOtherReponse(_this.currentUserResponse);\n                    }\n                }, this.responses.length === 0 ? 500 : 0);\n            }\n        };\n        /**\n        * @name containsTagResponse\n        * @return boolean\n        * check if tag has already been responded to\n        */\n        ChatList.prototype.containsTagResponse = function (tagToChange) {\n            for (var i = 0; i < this.responses.length; i++) {\n                var element = this.responses[i];\n                if (!element.isRobotResponse && element.tag == tagToChange && !tagToChange.hasConditions()) {\n                    return true;\n                }\n            }\n            return false;\n        };\n        /**\n        * @name onUserAnswerClicked\n        * on user ChatReponse clicked\n        */\n        ChatList.prototype.onUserWantsToEditTag = function (tagToChange) {\n            var responseUserWantsToEdit;\n            for (var i = 0; i < this.responses.length; i++) {\n                var element = this.responses[i];\n                if (!element.isRobotResponse && element.tag == tagToChange) {\n                    // update element thhat user wants to edit\n                    responseUserWantsToEdit = element;\n                    break;\n                }\n            }\n            // reset the current user response\n            this.currentUserResponse.processResponseAndSetText();\n            if (responseUserWantsToEdit) {\n                // remove latest user response, if it is there any, also make sure we don't remove the first one\n                if (this.responses.length > 2) {\n                    if (!this.responses[this.responses.length - 1].isRobotResponse) {\n                        this.responses.pop().dealloc();\n                    }\n                    // remove latest robot response, it should always be a robot response\n                    this.responses.pop().dealloc();\n                }\n                this.currentUserResponse = responseUserWantsToEdit;\n                // TODO: Set user field to thinking?\n                // this.currentUserResponse.setToThinking??\n                this.currentResponse = this.responses[this.responses.length - 1];\n                this.onListUpdate(this.currentUserResponse);\n            }\n        };\n        ChatList.prototype.onListUpdate = function (chatResponse) {\n            var _this = this;\n            clearTimeout(this.updateTimer);\n            this.updateTimer = setTimeout(function () {\n                _this.eventTarget.dispatchEvent(new CustomEvent(cf.ChatListEvents.CHATLIST_UPDATED, {\n                    detail: _this\n                }));\n                chatResponse.show();\n            }, 0);\n        };\n        /**\n        * @name clearFrom\n        * remove responses, this usually happens if a user jumps back to a conditional element\n        */\n        ChatList.prototype.clearFrom = function (index) {\n            index = index * 2; // double up because of robot responses\n            index += index % 2; // round up so we dont remove the user response element\n            while (this.responses.length > index) {\n                this.responses.pop().dealloc();\n            }\n        };\n        /**\n        * @name setCurrentUserResponse\n        * Update current reponse, is being called automatically from onFlowUpdate, but can also, in rare cases, be called when flow is controlled manually.\n        * reponse: FlowDTO\n        */\n        ChatList.prototype.setCurrentUserResponse = function (dto) {\n            this.flowDTOFromUserInputUpdate = dto;\n            if (!this.flowDTOFromUserInputUpdate.text && dto.tag) {\n                if (dto.tag.type == \"group\") {\n                    this.flowDTOFromUserInputUpdate.text = cf.Dictionary.get(\"user-reponse-missing-group\");\n                }\n                else if (dto.tag.type != \"password\") {\n                    this.flowDTOFromUserInputUpdate.text = cf.Dictionary.get(\"user-reponse-missing\");\n                }\n            }\n            this.currentUserResponse.setValue(this.flowDTOFromUserInputUpdate);\n        };\n        /**\n        * @name getResponses\n        * returns the submitted responses.\n        */\n        ChatList.prototype.getResponses = function () {\n            return this.responses;\n        };\n        ChatList.prototype.updateThumbnail = function (robot, img) {\n            cf.Dictionary.set(robot ? \"robot-image\" : \"user-image\", robot ? \"robot\" : \"human\", img);\n            var newImage = robot ? cf.Dictionary.getRobotResponse(\"robot-image\") : cf.Dictionary.get(\"user-image\");\n            for (var i = 0; i < this.responses.length; i++) {\n                var element = this.responses[i];\n                if (robot && element.isRobotResponse) {\n                    element.updateThumbnail(newImage);\n                }\n                else if (!robot && !element.isRobotResponse) {\n                    element.updateThumbnail(newImage);\n                }\n            }\n        };\n        ChatList.prototype.createResponse = function (isRobotResponse, currentTag, value) {\n            if (value === void 0) { value = null; }\n            var scrollable = this.el.querySelector(\".scrollableInner\");\n            var response = new cf.ChatResponse({\n                // image: null,\n                cfReference: this.cfReference,\n                list: this,\n                tag: currentTag,\n                eventTarget: this.eventTarget,\n                isRobotResponse: isRobotResponse,\n                response: value,\n                image: isRobotResponse ? cf.Dictionary.getRobotResponse(\"robot-image\") : cf.Dictionary.get(\"user-image\"),\n                container: scrollable\n            });\n            this.responses.push(response);\n            this.currentResponse = response;\n            this.onListUpdate(response);\n            return response;\n        };\n        ChatList.prototype.getTemplate = function () {\n            return \"<cf-chat type='pluto'>\\n\\t\\t\\t\\t\\t\\t<scrollable>\\n\\t\\t\\t\\t\\t\\t\\t<div class=\\\"scrollableInner\\\"></div>\\n\\t\\t\\t\\t\\t\\t</scrollable>\\n\\t\\t\\t\\t\\t</cf-chat>\";\n        };\n        ChatList.prototype.dealloc = function () {\n            this.eventTarget.removeEventListener(cf.FlowEvents.FLOW_UPDATE, this.flowUpdateCallback, false);\n            this.flowUpdateCallback = null;\n            this.eventTarget.removeEventListener(cf.FlowEvents.USER_INPUT_UPDATE, this.userInputUpdateCallback, false);\n            this.userInputUpdateCallback = null;\n            this.eventTarget.removeEventListener(cf.UserInputEvents.KEY_CHANGE, this.onInputKeyChangeCallback, false);\n            this.onInputKeyChangeCallback = null;\n            _super.prototype.dealloc.call(this);\n        };\n        return ChatList;\n    }(cf.BasicElement));\n    cf.ChatList = ChatList;\n})(cf || (cf = {}));\n\n/// <reference path=\"../form-tags/Tag.ts\"/>\n/// <reference path=\"../ConversationalForm.ts\"/>\nvar cf;\n(function (cf) {\n    // interface\n    cf.FlowEvents = {\n        USER_INPUT_UPDATE: \"cf-flow-user-input-update\",\n        USER_INPUT_INVALID: \"cf-flow-user-input-invalid\",\n        //\tdetail: string\n        FLOW_UPDATE: \"cf-flow-update\",\n        FORM_SUBMIT: \"cf-form-submit\",\n    };\n    // class\n    var FlowManager = /** @class */ (function () {\n        function FlowManager(options) {\n            this.stopped = false;\n            this.maxSteps = 0;\n            this.step = 0;\n            this.savedStep = -1;\n            this.stepTimer = 0;\n            /**\n            * ignoreExistingTags\n            * @type boolean\n            * ignore existing tags, usually this is set to true when using startFrom, where you don't want it to check for exisintg tags in the list\n            */\n            this.ignoreExistingTags = false;\n            this.cfReference = options.cfReference;\n            this.eventTarget = options.eventTarget;\n            this.flowStepCallback = options.flowStepCallback;\n            this.setTags(options.tags);\n            this.userInputSubmitCallback = this.userInputSubmit.bind(this);\n            this.eventTarget.addEventListener(cf.UserInputEvents.SUBMIT, this.userInputSubmitCallback, false);\n        }\n        Object.defineProperty(FlowManager.prototype, \"currentTag\", {\n            get: function () {\n                return this.tags[this.step];\n            },\n            enumerable: true,\n            configurable: true\n        });\n        FlowManager.prototype.userInputSubmit = function (event) {\n            var _this = this;\n            cf.ConversationalForm.illustrateFlow(this, \"receive\", event.type, event.detail);\n            var appDTO = event.detail;\n            if (!appDTO.tag)\n                appDTO.tag = this.currentTag;\n            var isTagValid = this.currentTag.setTagValueAndIsValid(appDTO);\n            var hasCheckedForTagSpecificValidation = false;\n            var hasCheckedForGlobalFlowValidation = false;\n            var onValidationCallback = function () {\n                // check 1\n                if (_this.currentTag.validationCallback && typeof _this.currentTag.validationCallback == \"function\") {\n                    if (!hasCheckedForTagSpecificValidation && isTagValid) {\n                        hasCheckedForTagSpecificValidation = true;\n                        _this.currentTag.validationCallback(appDTO, function () {\n                            isTagValid = true;\n                            onValidationCallback();\n                        }, function (optionalErrorMessage) {\n                            isTagValid = false;\n                            if (optionalErrorMessage)\n                                appDTO.errorText = optionalErrorMessage;\n                            onValidationCallback();\n                        });\n                        return;\n                    }\n                }\n                // check 2, this.currentTag.required <- required should be handled in the callback.\n                if (_this.flowStepCallback && typeof _this.flowStepCallback == \"function\") {\n                    if (!hasCheckedForGlobalFlowValidation && isTagValid) {\n                        hasCheckedForGlobalFlowValidation = true;\n                        // use global validationCallback method\n                        _this.flowStepCallback(appDTO, function () {\n                            isTagValid = true;\n                            onValidationCallback();\n                        }, function (optionalErrorMessage) {\n                            isTagValid = false;\n                            if (optionalErrorMessage)\n                                appDTO.errorText = optionalErrorMessage;\n                            onValidationCallback();\n                        });\n                        return;\n                    }\n                }\n                // go on with the flow\n                if (isTagValid) {\n                    // do the normal flow..\n                    cf.ConversationalForm.illustrateFlow(_this, \"dispatch\", cf.FlowEvents.USER_INPUT_UPDATE, appDTO);\n                    // update to latest DTO because values can be changed in validation flow...\n                    if (appDTO.input)\n                        appDTO = appDTO.input.getFlowDTO();\n                    _this.eventTarget.dispatchEvent(new CustomEvent(cf.FlowEvents.USER_INPUT_UPDATE, {\n                        detail: appDTO //UserTextInput value\n                    }));\n                    // goto next step when user has answered\n                    setTimeout(function () { return _this.nextStep(); }, cf.ConversationalForm.animationsEnabled ? 250 : 0);\n                }\n                else {\n                    cf.ConversationalForm.illustrateFlow(_this, \"dispatch\", cf.FlowEvents.USER_INPUT_INVALID, appDTO);\n                    // Value not valid\n                    _this.eventTarget.dispatchEvent(new CustomEvent(cf.FlowEvents.USER_INPUT_INVALID, {\n                        detail: appDTO //UserTextInput value\n                    }));\n                }\n            };\n            // TODO, make into promises when IE is rolling with it..\n            onValidationCallback();\n        };\n        FlowManager.prototype.startFrom = function (indexOrTag, ignoreExistingTags) {\n            if (ignoreExistingTags === void 0) { ignoreExistingTags = false; }\n            if (typeof indexOrTag == \"number\")\n                this.step = indexOrTag;\n            else {\n                // find the index..\n                this.step = this.tags.indexOf(indexOrTag);\n            }\n            this.ignoreExistingTags = ignoreExistingTags;\n            if (!this.ignoreExistingTags) {\n                this.editTag(this.tags[this.step]);\n            }\n            else {\n                //validate step, and ask for skipping of current step\n                this.showStep();\n            }\n        };\n        FlowManager.prototype.areConditionsInFlowFullfilled = function (tagWithConditions, tagConditions) {\n            if (!this.activeConditions) {\n                // we don't use this (yet), it's only to keep track of active conditions\n                this.activeConditions = [];\n            }\n            var numConditionsFound = 0;\n            // find out if tagWithConditions fullfills conditions\n            for (var i = 0; i < this.tags.length; i++) {\n                var tag = this.tags[i];\n                if (tag !== tagWithConditions) {\n                    // check if tags are fullfilled\n                    for (var j = 0; j < tagConditions.length; j++) {\n                        var tagCondition = tagConditions[j];\n                        // only check tags where tag id or name is defined\n                        var tagName = (tag.name || tag.id || \"\").toLowerCase();\n                        if (tagName !== \"\" && \"cf-conditional-\" + tagName === tagCondition.key.toLowerCase()) {\n                            // key found, so check condition\n                            var flowTagValue = typeof tag.value === \"string\" ? tag.value : tag.value;\n                            var areConditionsMeet = cf.Tag.testConditions(flowTagValue, tagCondition);\n                            if (areConditionsMeet) {\n                                this.activeConditions[tagName] = tagConditions;\n                                // conditions are meet\n                                if (++numConditionsFound == tagConditions.length) {\n                                    return true;\n                                }\n                            }\n                        }\n                    }\n                }\n            }\n            return false;\n        };\n        FlowManager.prototype.start = function () {\n            this.stopped = false;\n            this.validateStepAndUpdate();\n        };\n        FlowManager.prototype.stop = function () {\n            this.stopped = true;\n        };\n        FlowManager.prototype.nextStep = function () {\n            if (this.stopped)\n                return;\n            if (this.savedStep != -1) {\n                // if you are looking for where the none EDIT tag conditionsl check is done\n                // then look at a tags disabled getter\n                var foundConditionsToCurrentTag = false;\n                // this happens when editing a tag..\n                // check if any tags has a conditional check for this.currentTag.name\n                for (var i = 0; i < this.tags.length; i++) {\n                    var tag = this.tags[i];\n                    if (tag !== this.currentTag && tag.hasConditions()) {\n                        // tag has conditions so check if it also has the right conditions\n                        if (tag.hasConditionsFor(this.currentTag.name)) {\n                            foundConditionsToCurrentTag = true;\n                            this.step = this.tags.indexOf(this.currentTag);\n                            break;\n                        }\n                    }\n                }\n                // no conditional linking found, so resume flow\n                if (!foundConditionsToCurrentTag) {\n                    this.step = this.savedStep;\n                }\n            }\n            this.savedStep = -1; //reset saved step\n            this.step++;\n            this.validateStepAndUpdate();\n        };\n        FlowManager.prototype.previousStep = function () {\n            this.step--;\n            this.validateStepAndUpdate();\n        };\n        FlowManager.prototype.getStep = function () {\n            return this.step;\n        };\n        FlowManager.prototype.addTags = function (tags, atIndex) {\n            if (atIndex === void 0) { atIndex = -1; }\n            // used to append new tag\n            if (atIndex !== -1 && atIndex < this.tags.length) {\n                var pre = this.tags.slice(0, atIndex);\n                var post = this.tags.slice(atIndex, this.tags.length);\n                this.tags = this.tags.slice(0, atIndex).concat(tags).concat(post);\n            }\n            else {\n                this.tags = this.tags.concat(tags);\n            }\n            this.setTags(this.tags);\n            return this.tags;\n        };\n        FlowManager.prototype.dealloc = function () {\n            this.eventTarget.removeEventListener(cf.UserInputEvents.SUBMIT, this.userInputSubmitCallback, false);\n            this.userInputSubmitCallback = null;\n        };\n        /**\n        * @name editTag\n        * go back in time and edit a tag.\n        */\n        FlowManager.prototype.editTag = function (tag) {\n            this.ignoreExistingTags = false;\n            this.savedStep = this.step - 1; //save step\n            this.step = this.tags.indexOf(tag); // === this.currentTag\n            this.validateStepAndUpdate();\n            if (this.activeConditions && Object.keys(this.activeConditions).length > 0) {\n                this.savedStep = -1; //don't save step, as we wont return\n                // clear chatlist.\n                this.cfReference.chatList.clearFrom(this.step + 1);\n                //reset from active tag, brute force\n                var editTagIndex = this.tags.indexOf(tag);\n                for (var i = editTagIndex + 1; i < this.tags.length; i++) {\n                    var tag_1 = this.tags[i];\n                    tag_1.reset();\n                }\n            }\n        };\n        FlowManager.prototype.setTags = function (tags) {\n            this.tags = tags;\n            for (var i = 0; i < this.tags.length; i++) {\n                var tag = this.tags[i];\n                tag.eventTarget = this.eventTarget;\n                tag.flowManager = this;\n            }\n            this.maxSteps = this.tags.length;\n        };\n        FlowManager.prototype.skipStep = function () {\n            this.nextStep();\n        };\n        FlowManager.prototype.validateStepAndUpdate = function () {\n            if (this.maxSteps > 0) {\n                if (this.step == this.maxSteps) {\n                    // console.warn(\"We are at the end..., submit click\")\n                    this.eventTarget.dispatchEvent(new CustomEvent(cf.FlowEvents.FORM_SUBMIT, {}));\n                    this.cfReference.doSubmitForm();\n                }\n                else {\n                    this.step %= this.maxSteps;\n                    if (this.currentTag.disabled) {\n                        // check if current tag has become or is disabled, if it is, then skip step.\n                        this.skipStep();\n                    }\n                    else {\n                        this.showStep();\n                    }\n                }\n            }\n        };\n        FlowManager.prototype.showStep = function () {\n            var _this = this;\n            if (this.stopped)\n                return;\n            cf.ConversationalForm.illustrateFlow(this, \"dispatch\", cf.FlowEvents.FLOW_UPDATE, this.currentTag);\n            this.currentTag.refresh();\n            setTimeout(function () {\n                _this.eventTarget.dispatchEvent(new CustomEvent(cf.FlowEvents.FLOW_UPDATE, {\n                    detail: {\n                        tag: _this.currentTag,\n                        ignoreExistingTag: _this.ignoreExistingTags,\n                        step: _this.step,\n                        maxSteps: _this.maxSteps\n                    }\n                }));\n            }, 0);\n        };\n        FlowManager.STEP_TIME = 1000;\n        return FlowManager;\n    }());\n    cf.FlowManager = FlowManager;\n})(cf || (cf = {}));\n\n/// <reference path=\"ui/inputs/UserTextInput.ts\"/>\n/// <reference path=\"ui/chat/ChatList.ts\"/>\n/// <reference path=\"logic/FlowManager.ts\"/>\n/// <reference path=\"ui/ProgressBar.ts\"/>\n/// <reference path=\"logic/EventDispatcher.ts\"/>\n/// <reference path=\"form-tags/Tag.ts\"/>\n/// <reference path=\"form-tags/CfRobotMessageTag.ts\"/>\n/// <reference path=\"form-tags/TagGroup.ts\"/>\n/// <reference path=\"form-tags/InputTag.ts\"/>\n/// <reference path=\"form-tags/SelectTag.ts\"/>\n/// <reference path=\"form-tags/ButtonTag.ts\"/>\n/// <reference path=\"data/Dictionary.ts\"/>\n/// <reference path=\"parsing/TagsParser.ts\"/>\n/// <reference path=\"interfaces/IUserInput.ts\"/>\n/// <reference path=\"interfaces/IUserInterfaceOptions.ts\"/>\nvar cf;\n(function (cf_1) {\n    var ConversationalForm = /** @class */ (function () {\n        function ConversationalForm(options) {\n            this.version = \"1.0.2\";\n            this.cdnPath = \"https://cdn.jsdelivr.net/gh/space10-community/conversational-form@{version}/dist/\";\n            this.isDevelopment = false;\n            this.loadExternalStyleSheet = true;\n            this.theme = 'light';\n            this.preventAutoAppend = false;\n            this.preventAutoStart = false;\n            window.ConversationalForm = this;\n            this.cdnPath = this.cdnPath.split(\"{version}\").join(this.version);\n            if (typeof options.suppressLog === 'boolean')\n                ConversationalForm.suppressLog = options.suppressLog;\n            if (typeof options.showProgressBar === 'boolean')\n                ConversationalForm.showProgressBar = options.showProgressBar;\n            if (typeof options.preventSubmitOnEnter === 'boolean')\n                this.preventSubmitOnEnter = options.preventSubmitOnEnter;\n            if (!ConversationalForm.suppressLog)\n                console.log('Conversational Form > version:', this.version);\n            if (!ConversationalForm.suppressLog)\n                console.log('Conversational Form > options:', options);\n            window.ConversationalForm[this.createId] = this;\n            // possible to create your own event dispatcher, so you can tap into the events of the app\n            if (options.eventDispatcher)\n                this._eventTarget = options.eventDispatcher;\n            if (!this.eventTarget.cf)\n                this.eventTarget.cf = this;\n            // set a general step validation callback\n            if (options.flowStepCallback)\n                this.flowStepCallback = options.flowStepCallback;\n            this.isDevelopment = ConversationalForm.illustrateAppFlow = !!document.getElementById(\"conversational-form-development\");\n            if (options.loadExternalStyleSheet == false) {\n                this.loadExternalStyleSheet = false;\n            }\n            if (typeof options.theme === 'string')\n                this.theme = options.theme;\n            if (!isNaN(options.scrollAcceleration))\n                cf_1.ScrollController.acceleration = options.scrollAcceleration;\n            this.preventAutoStart = options.preventAutoStart;\n            this.preventAutoAppend = options.preventAutoAppend;\n            if (!options.formEl)\n                throw new Error(\"Conversational Form error, the formEl needs to be defined.\");\n            this.formEl = options.formEl;\n            this.formEl.setAttribute(\"cf-create-id\", this.createId);\n            if (options.hideUserInputOnNoneTextInput === true) {\n                cf_1.UserInputElement.hideUserInputOnNoneTextInput = true;\n            }\n            this.submitCallback = options.submitCallback;\n            if (this.submitCallback && typeof this.submitCallback === \"string\") {\n                // Must be a string on window, rewritten to avoid unsafe eval() calls\n                var fn = window[this.submitCallback];\n                this.submitCallback = fn;\n            }\n            if (this.formEl.getAttribute(\"cf-no-animation\") == \"\")\n                ConversationalForm.animationsEnabled = false;\n            if (typeof options.animationsEnabled === 'boolean'\n                && options.animationsEnabled === false) {\n                ConversationalForm.animationsEnabled = false;\n                this.formEl.setAttribute(\"cf-no-animation\", \"\");\n            }\n            if (options.preventAutoFocus || this.formEl.getAttribute(\"cf-prevent-autofocus\") == \"\")\n                cf_1.UserInputElement.preventAutoFocus = true;\n            this.dictionary = new cf_1.Dictionary({\n                data: options.dictionaryData,\n                robotData: options.dictionaryRobot,\n                userImage: options.userImage,\n                robotImage: options.robotImage,\n                version: this.version\n            });\n            this.context = options.context ? options.context : document.body;\n            this.tags = options.tags;\n            if (options.microphoneInput) {\n                // validate the user ..... TODO....\n                if (!options.microphoneInput.init || !options.microphoneInput.input) {\n                    console.warn(\"Conversational Form: microphoneInput is not correctly setup\", options.microphoneInput);\n                    options.microphoneInput = null;\n                }\n            }\n            this.microphoneInputObj = options.microphoneInput;\n            // set the ui options\n            this.uiOptions = cf_1.Helpers.extendObject(cf_1.UserInterfaceDefaultOptions, options.userInterfaceOptions || {});\n            // console.log('this.uiOptions:', this.uiOptions);\n            this.options = options;\n            this.init();\n        }\n        Object.defineProperty(ConversationalForm.prototype, \"createId\", {\n            get: function () {\n                if (!this._createId) {\n                    this._createId = new Date().getTime().toString();\n                }\n                return this._createId;\n            },\n            enumerable: true,\n            configurable: true\n        });\n        Object.defineProperty(ConversationalForm.prototype, \"eventTarget\", {\n            get: function () {\n                if (!this._eventTarget) {\n                    this._eventTarget = new cf_1.EventDispatcher(this);\n                }\n                return this._eventTarget;\n            },\n            enumerable: true,\n            configurable: true\n        });\n        ConversationalForm.prototype.init = function () {\n            switch (this.theme) {\n                case 'dark':\n                    this.theme = 'conversational-form-dark.min.css';\n                    if (!this.options.robotImage)\n                        this.updateDictionaryValue('robot-image', 'robot', \"data:image/svg+xml,%3Csvg width='200' height='200' viewBox='0 0 200 200' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Ccircle cx='100' cy='100' r='100' fill='%233A3A3C'/%3E%3Crect x='66' y='66' width='68' height='68' fill='%23E5E6EA'/%3E%3C/svg%3E%0A\");\n                    if (!this.options.userImage)\n                        this.updateDictionaryValue('user-image', 'user', \"data:image/svg+xml,%3Csvg width='200' height='200' viewBox='0 0 200 200' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Ccircle cx='100' cy='100' r='100' fill='%23E5E6EA'/%3E%3Cpath d='M100 55L138.971 122.5H61.0289L100 55Z' fill='%233A3A3C'/%3E%3C/svg%3E%0A\");\n                    break;\n                case 'green':\n                    this.theme = 'conversational-form-green.min.css';\n                    if (!this.options.robotImage)\n                        this.updateDictionaryValue('robot-image', 'robot', \"data:image/svg+xml,%3Csvg width='200' height='200' viewBox='0 0 200 200' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Ccircle cx='100' cy='100' r='100' fill='%23EEEFF0'/%3E%3Crect x='66' y='66' width='68' height='68' fill='%2300BF75'/%3E%3C/svg%3E%0A\");\n                    if (!this.options.userImage)\n                        this.updateDictionaryValue('user-image', 'user', \"data:image/svg+xml,%3Csvg width='200' height='200' viewBox='0 0 200 200' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Ccircle cx='100' cy='100' r='100' fill='%2300BF75'/%3E%3Cpath d='M100 55L138.971 122.5H61.0289L100 55Z' fill='%23EEEFF0'/%3E%3C/svg%3E%0A\");\n                    break;\n                case 'blue':\n                    this.theme = 'conversational-form-irisblue.min.css';\n                    if (!this.options.robotImage)\n                        this.updateDictionaryValue('robot-image', 'robot', \"data:image/svg+xml,%3Csvg width='200' height='200' viewBox='0 0 200 200' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Ccircle cx='100' cy='100' r='100' fill='%23E8E9EB'/%3E%3Crect x='66' y='66' width='68' height='68' fill='%2300C2DF'/%3E%3C/svg%3E%0A\");\n                    if (!this.options.userImage)\n                        this.updateDictionaryValue('user-image', 'user', \"data:image/svg+xml,%3Csvg width='200' height='200' viewBox='0 0 200 200' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Ccircle cx='100' cy='100' r='100' fill='%2300C2DF'/%3E%3Cpath d='M100 55L138.971 122.5H61.0289L100 55Z' fill='%23E8E9EB'/%3E%3C/svg%3E%0A\");\n                    break;\n                case 'purple':\n                    this.theme = 'conversational-form-purple.min.css';\n                    if (!this.options.robotImage)\n                        this.updateDictionaryValue('robot-image', 'robot', \"data:image/svg+xml,%3Csvg width='200' height='200' viewBox='0 0 200 200' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Ccircle cx='100' cy='100' r='100' fill='%23EEEFF0'/%3E%3Crect x='66' y='66' width='68' height='68' fill='%235A1DE4'/%3E%3C/svg%3E%0A\");\n                    if (!this.options.userImage)\n                        this.updateDictionaryValue('user-image', 'user', \"data:image/svg+xml,%3Csvg width='200' height='200' viewBox='0 0 200 200' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Ccircle cx='100' cy='100' r='100' fill='%235A1DE4'/%3E%3Cpath d='M100 55L138.971 122.5H61.0289L100 55Z' fill='%23EEEFF0'/%3E%3C/svg%3E%0A\");\n                    break;\n                case 'red':\n                    this.theme = 'conversational-form-red.min.css';\n                    if (!this.options.robotImage)\n                        this.updateDictionaryValue('robot-image', 'robot', \"data:image/svg+xml,%3Csvg width='200' height='200' viewBox='0 0 200 200' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Ccircle cx='100' cy='100' r='100' fill='%23E8E9EB'/%3E%3Crect x='66' y='66' width='68' height='68' fill='%23FF3233'/%3E%3C/svg%3E%0A\");\n                    if (!this.options.userImage)\n                        this.updateDictionaryValue('user-image', 'user', \"data:image/svg+xml,%3Csvg width='200' height='200' viewBox='0 0 200 200' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Ccircle cx='100' cy='100' r='100' fill='%23FF3233'/%3E%3Cpath d='M100 55L138.971 122.5H61.0289L100 55Z' fill='%23E8E9EB'/%3E%3C/svg%3E%0A\");\n                    break;\n                default:\n                    this.theme = 'conversational-form.min.css';\n            }\n            if (this.isDevelopment) {\n                // Set path for development\n                this.cdnPath = '../build/';\n                // strip .min from filename since we do not have minified css in build\n                this.theme = this.theme.replace('.min', '');\n            }\n            if (this.loadExternalStyleSheet) {\n                // not in development/examples, so inject production css\n                var head = document.head || document.getElementsByTagName(\"head\")[0];\n                var style = document.createElement(\"link\");\n                var githubMasterUrl = this.cdnPath + this.theme;\n                style.type = \"text/css\";\n                style.media = \"all\";\n                style.setAttribute(\"rel\", \"stylesheet\");\n                style.setAttribute(\"href\", githubMasterUrl);\n                head.appendChild(style);\n            }\n            // set context position to relative, else we break out of the box\n            var position = window.getComputedStyle(this.context).getPropertyValue(\"position\").toLowerCase();\n            if ([\"fixed\", \"absolute\", \"relative\"].indexOf(position) == -1) {\n                this.context.style.position = \"relative\";\n            }\n            // if tags are not defined then we will try and build some tags our selves..\n            if (!this.tags || this.tags.length == 0) {\n                this.tags = [];\n                var fields = [].slice.call(this.formEl.querySelectorAll(\"input, select, button, textarea, cf-robot-message\"), 0);\n                for (var i = 0; i < fields.length; i++) {\n                    var element = fields[i];\n                    if (cf_1.Tag.isTagValid(element)) {\n                        // ignore hidden tags\n                        this.tags.push(cf_1.Tag.createTag(element));\n                    }\n                }\n            }\n            else {\n                // tags are manually setup and passed as options.tags.\n            }\n            // remove invalid tags if they've sneaked in.. this could happen if tags are setup manually as we don't encurage to use static Tag.isTagValid\n            var indexesToRemove = [];\n            for (var i = 0; i < this.tags.length; i++) {\n                var element = this.tags[i];\n                if (!element || !cf_1.Tag.isTagValid(element.domElement)) {\n                    indexesToRemove.push(element);\n                }\n            }\n            for (var i = 0; i < indexesToRemove.length; i++) {\n                var tag = indexesToRemove[i];\n                this.tags.splice(this.tags.indexOf(tag), 1);\n            }\n            if (!ConversationalForm.suppressLog && (!this.tags || this.tags.length == 0)) {\n                console.warn(\"Conversational Form: No tags found or registered.\");\n            }\n            //let's start the conversation\n            this.tags = this.setupTagGroups(this.tags);\n            this.setupUI();\n            return this;\n        };\n        /**\n        * @name updateDictionaryValue\n        * set a dictionary value at \"runtime\"\n        *\tid: string, id of the value to update\n        *\ttype: string, \"human\" || \"robot\"\n        *\tvalue: string, value to be inserted\n        */\n        ConversationalForm.prototype.updateDictionaryValue = function (id, type, value) {\n            cf_1.Dictionary.set(id, type, value);\n            // if([\"robot-image\", \"user-image\"].indexOf(id) != -1){\n            // \tthis.chatList.updateThumbnail(id == \"robot-image\", value);\n            // }\n        };\n        ConversationalForm.prototype.getFormData = function (serialized) {\n            if (serialized === void 0) { serialized = false; }\n            if (serialized) {\n                var serialized_1 = {};\n                for (var i = 0; i < this.tags.length; i++) {\n                    var element = this.tags[i];\n                    if (element.value)\n                        serialized_1[element.name || \"tag-\" + i.toString()] = element.value;\n                }\n                return serialized_1;\n            }\n            else {\n                var formData = new FormData(this.formEl);\n                return formData;\n            }\n        };\n        ConversationalForm.prototype.addRobotChatResponse = function (response) {\n            this.chatList.createResponse(true, null, response);\n        };\n        ConversationalForm.prototype.addUserChatResponse = function (response) {\n            // add a \"fake\" user response..\n            this.chatList.createResponse(false, null, response);\n        };\n        ConversationalForm.prototype.stop = function (optionalStoppingMessage) {\n            if (optionalStoppingMessage === void 0) { optionalStoppingMessage = \"\"; }\n            this.flowManager.stop();\n            if (optionalStoppingMessage != \"\")\n                this.chatList.createResponse(true, null, optionalStoppingMessage);\n            this.userInput.onFlowStopped();\n        };\n        ConversationalForm.prototype.start = function () {\n            this.userInput.disabled = false;\n            if (!ConversationalForm.suppressLog)\n                console.log('option, disabled 3');\n            this.userInput.visible = true;\n            this.flowManager.start();\n        };\n        ConversationalForm.prototype.getTag = function (nameOrIndex) {\n            if (typeof nameOrIndex == \"number\") {\n                return this.tags[nameOrIndex];\n            }\n            else {\n                // TODO: fix so you can get a tag by its name attribute\n                return null;\n            }\n        };\n        ConversationalForm.prototype.setupTagGroups = function (tags) {\n            // make groups, from input tag[type=radio | type=checkbox]\n            // groups are used to bind logic like radio-button or checkbox dependencies\n            var groups = [];\n            for (var i = 0; i < tags.length; i++) {\n                var tag = tags[i];\n                if (tag.type == \"radio\" || tag.type == \"checkbox\") {\n                    if (!groups[tag.name])\n                        groups[tag.name] = [];\n                    groups[tag.name].push(tag);\n                }\n            }\n            if (Object.keys(groups).length > 0) {\n                for (var group in groups) {\n                    if (groups[group].length > 0) {\n                        // always build groupd when radio or checkbox\n                        // find the fieldset, if any..\n                        var isFieldsetValidForCF = function (tag) { return tag && tag.tagName.toLowerCase() !== \"fieldset\" && !tag.hasAttribute(\"cf-questions\"); };\n                        var fieldset = groups[group][0].domElement.parentNode;\n                        if (fieldset && fieldset.tagName.toLowerCase() !== \"fieldset\") {\n                            fieldset = fieldset.parentNode;\n                            if (isFieldsetValidForCF(fieldset)) {\n                                // not a valid fieldset, we only accept fieldsets that contain cf attr\n                                fieldset = null;\n                            }\n                        }\n                        var tagGroup = new cf_1.TagGroup({\n                            fieldset: fieldset,\n                            elements: groups[group]\n                        });\n                        // remove the tags as they are now apart of a group\n                        for (var i = 0; i < groups[group].length; i++) {\n                            var tagToBeRemoved = groups[group][i];\n                            if (i == 0) // add the group at same index as the the first tag to be removed\n                                tags.splice(tags.indexOf(tagToBeRemoved), 1, tagGroup);\n                            else\n                                tags.splice(tags.indexOf(tagToBeRemoved), 1);\n                        }\n                    }\n                }\n            }\n            return tags;\n        };\n        ConversationalForm.prototype.setupUI = function () {\n            // start the flow\n            this.flowManager = new cf_1.FlowManager({\n                cfReference: this,\n                flowStepCallback: this.flowStepCallback,\n                eventTarget: this.eventTarget,\n                tags: this.tags\n            });\n            this.el = document.createElement(\"div\");\n            this.el.id = \"conversational-form\";\n            this.el.className = \"conversational-form\";\n            this.addBrowserTypes(this.el);\n            if (ConversationalForm.animationsEnabled)\n                this.el.classList.add(\"conversational-form--enable-animation\");\n            // add conversational form to context\n            if (!this.preventAutoAppend)\n                this.context.appendChild(this.el);\n            //hide until stylesheet is rendered\n            this.el.style.visibility = \"hidden\";\n            var innerWrap = document.createElement(\"div\");\n            innerWrap.className = \"conversational-form-inner\";\n            this.el.appendChild(innerWrap);\n            // Conversational Form UI\n            this.chatList = new cf_1.ChatList({\n                eventTarget: this.eventTarget,\n                cfReference: this\n            });\n            innerWrap.appendChild(this.chatList.el);\n            this.userInput = new cf_1.UserTextInput({\n                microphoneInputObj: this.microphoneInputObj,\n                eventTarget: this.eventTarget,\n                cfReference: this\n            });\n            if (ConversationalForm.showProgressBar) {\n                var progressBar = new cf_1.ProgressBar(this);\n                innerWrap.appendChild(progressBar.el);\n            }\n            this.chatList.addInput(this.userInput);\n            innerWrap.appendChild(this.userInput.el);\n            this.onUserAnswerClickedCallback = this.onUserAnswerClicked.bind(this);\n            this.eventTarget.addEventListener(cf_1.ChatResponseEvents.USER_ANSWER_CLICKED, this.onUserAnswerClickedCallback, false);\n            this.el.classList.add(\"conversational-form--show\");\n            if (!this.preventAutoStart)\n                this.flowManager.start();\n            if (!this.tags || this.tags.length == 0) {\n                // no tags, so just show the input\n                this.userInput.visible = true;\n            }\n        };\n        /**\n        * @name onUserAnswerClicked\n        * on user ChatReponse clicked\n        */\n        ConversationalForm.prototype.onUserAnswerClicked = function (event) {\n            var tag = event.detail;\n            this.flowManager.editTag(tag);\n        };\n        ConversationalForm.prototype.addBrowserTypes = function (el) {\n            if (navigator.userAgent.indexOf('Firefox') > -1)\n                el.classList.add('browser-firefox');\n            if (/Edge/.test(navigator.userAgent))\n                el.classList.add('browser-edge');\n        };\n        /**\n        * @name addTag\n        * Add a tag to the conversation. This can be used to add tags at runtime\n        * see examples/formless.html\n        */\n        ConversationalForm.prototype.addTags = function (tagsData, addAfterCurrentStep, atIndex) {\n            if (addAfterCurrentStep === void 0) { addAfterCurrentStep = true; }\n            if (atIndex === void 0) { atIndex = -1; }\n            var tags = [];\n            for (var i = 0; i < tagsData.length; i++) {\n                var tagData = tagsData[i];\n                if (tagData.tag === \"fieldset\") {\n                    // group ..\n                    // const fieldSetChildren: Array<DataTag> = tagData.children;\n                    // parse group tag\n                    var groupTag = cf_1.TagsParser.parseGroupTag(tagData);\n                    for (var j = 0; j < groupTag.children.length; j++) {\n                        var tag = groupTag.children[j];\n                        if (cf_1.Tag.isTagValid(tag)) {\n                            var tagElement = cf_1.Tag.createTag(tag);\n                            // add ref for group creation\n                            if (!tagElement.name) {\n                                tagElement.name = \"tag-ref-\" + j.toString();\n                            }\n                            tags.push(tagElement);\n                        }\n                    }\n                }\n                else {\n                    var tag = tagData.tag === \"select\" ? cf_1.TagsParser.parseGroupTag(tagData) : cf_1.TagsParser.parseTag(tagData);\n                    if (cf_1.Tag.isTagValid(tag)) {\n                        var tagElement = cf_1.Tag.createTag(tag);\n                        tags.push(tagElement);\n                    }\n                }\n            }\n            // map free roaming checkbox and radio tags into groups\n            tags = this.setupTagGroups(tags);\n            // add new tags to the flow\n            this.tags = this.flowManager.addTags(tags, addAfterCurrentStep ? this.flowManager.getStep() + 1 : atIndex);\n            //this.flowManager.startFrom ?\n        };\n        /**\n        * @name remapTagsAndStartFrom\n        * index: number, what index to start from\n        * setCurrentTagValue: boolean, usually this method is called when wanting to loop or skip over questions, therefore it might be usefull to set the value of the current tag before changing index.\n        * ignoreExistingTags: boolean, possible to ignore existing tags, to allow for the flow to just \"happen\"\n        */\n        ConversationalForm.prototype.remapTagsAndStartFrom = function (index, setCurrentTagValue, ignoreExistingTags) {\n            if (index === void 0) { index = 0; }\n            if (setCurrentTagValue === void 0) { setCurrentTagValue = false; }\n            if (ignoreExistingTags === void 0) { ignoreExistingTags = false; }\n            if (setCurrentTagValue) {\n                this.chatList.setCurrentUserResponse(this.userInput.getFlowDTO());\n            }\n            // possibility to start the form flow over from {index}\n            for (var i = 0; i < this.tags.length; i++) {\n                var tag = this.tags[i];\n                tag.refresh();\n            }\n            this.flowManager.startFrom(index, ignoreExistingTags);\n        };\n        /**\n        * @name focus\n        * Sets focus on Conversational Form\n        */\n        ConversationalForm.prototype.focus = function () {\n            if (this.userInput)\n                this.userInput.setFocusOnInput();\n        };\n        ConversationalForm.prototype.doSubmitForm = function () {\n            this.el.classList.add(\"done\");\n            this.userInput.reset();\n            if (this.submitCallback) {\n                // remove should be called in the submitCallback\n                this.submitCallback(this);\n            }\n            else {\n                // this.formEl.submit();\n                // doing classic .submit wont trigger onsubmit if that is present on form element\n                // as described here: http://wayback.archive.org/web/20090323062817/http://blogs.vertigosoftware.com/snyholm/archive/2006/09/27/3788.aspx\n                // so we mimic a click.\n                var button = this.formEl.ownerDocument.createElement('button');\n                button.style.display = 'none';\n                button.type = 'submit';\n                this.formEl.appendChild(button);\n                button.click();\n                this.formEl.removeChild(button);\n                // remove conversational\n                this.remove();\n            }\n        };\n        ConversationalForm.prototype.remove = function () {\n            if (this.microphoneInputObj) {\n                this.microphoneInputObj = null;\n            }\n            if (this.onUserAnswerClickedCallback) {\n                this.eventTarget.removeEventListener(cf_1.ChatResponseEvents.USER_ANSWER_CLICKED, this.onUserAnswerClickedCallback, false);\n                this.onUserAnswerClickedCallback = null;\n            }\n            if (this.flowManager)\n                this.flowManager.dealloc();\n            if (this.userInput)\n                this.userInput.dealloc();\n            if (this.chatList)\n                this.chatList.dealloc();\n            this.dictionary = null;\n            this.flowManager = null;\n            this.userInput = null;\n            this.chatList = null;\n            this.context = null;\n            this.formEl = null;\n            this.tags = null;\n            this.submitCallback = null;\n            this.el.parentNode.removeChild(this.el);\n            this.el = null;\n            window.ConversationalForm[this.createId] = null;\n        };\n        // to illustrate the event flow of the app\n        ConversationalForm.illustrateFlow = function (classRef, type, eventType, detail) {\n            // ConversationalForm.illustrateFlow(this, \"dispatch\", FlowEvents.USER_INPUT_INVALID, event.detail);\n            // ConversationalForm.illustrateFlow(this, \"receive\", event.type, event.detail);\n            if (detail === void 0) { detail = null; }\n            if (ConversationalForm.illustrateAppFlow) {\n                var highlight = \"font-weight: 900; background: \" + (type == \"receive\" ? \"#e6f3fe\" : \"pink\") + \"; color: black; padding: 0px 5px;\";\n                if (!ConversationalForm.suppressLog)\n                    console.log(\"%c** event flow: %c\" + eventType + \"%c flow type: %c\" + type + \"%c from: %c\" + classRef.constructor.name, \"font-weight: 900;\", highlight, \"font-weight: 400;\", highlight, \"font-weight: 400;\", highlight);\n                if (detail)\n                    if (!ConversationalForm.suppressLog)\n                        console.log(\"** event flow detail:\", detail);\n            }\n        };\n        ConversationalForm.startTheConversation = function (data) {\n            var isFormless = !!data.formEl === false;\n            var formlessTags;\n            var constructorOptions;\n            if (isFormless) {\n                if (typeof data === \"string\") {\n                    // Formless init w. string\n                    isFormless = true;\n                    var json = JSON.parse(data);\n                    constructorOptions = json.options;\n                    formlessTags = json.tags;\n                }\n                else {\n                    // Formless init w. JSON object\n                    constructorOptions = data.options;\n                    formlessTags = data.tags;\n                }\n                // formless, so generate the pseudo tags\n                var formEl = cf.TagsParser.parseJSONIntoElements(formlessTags);\n                constructorOptions.formEl = formEl;\n            }\n            else {\n                // keep it standard\n                constructorOptions = data;\n            }\n            return new cf.ConversationalForm(constructorOptions);\n        };\n        ConversationalForm.autoStartTheConversation = function () {\n            if (cf.ConversationalForm.hasAutoInstantiated)\n                return;\n            // auto start the conversation\n            var formElements = document.querySelectorAll(\"form[cf-form]\");\n            // no form elements found, look for the old init attribute\n            if (formElements.length === 0) {\n                formElements = document.querySelectorAll(\"form[cf-form-element]\");\n            }\n            var formContexts = document.querySelectorAll(\"*[cf-context]\");\n            if (formElements && formElements.length > 0) {\n                for (var i = 0; i < formElements.length; i++) {\n                    var form = formElements[i];\n                    var context = formContexts[i];\n                    cf.ConversationalForm.startTheConversation({\n                        formEl: form,\n                        context: context\n                    });\n                }\n                cf.ConversationalForm.hasAutoInstantiated = true;\n            }\n        };\n        ConversationalForm.animationsEnabled = true;\n        ConversationalForm.illustrateAppFlow = true;\n        ConversationalForm.suppressLog = true;\n        ConversationalForm.showProgressBar = false;\n        ConversationalForm.preventSubmitOnEnter = false;\n        ConversationalForm.hasAutoInstantiated = false;\n        return ConversationalForm;\n    }());\n    cf_1.ConversationalForm = ConversationalForm;\n})(cf || (cf = {}));\nif (document.readyState == \"complete\") {\n    // if document alread instantiated, usually this happens if Conversational Form is injected through JS\n    setTimeout(function () { return cf.ConversationalForm.autoStartTheConversation(); }, 0);\n}\nelse {\n    // await for when document is ready\n    window.addEventListener(\"load\", function () {\n        cf.ConversationalForm.autoStartTheConversation();\n    }, false);\n}\n\n// jquery plugin\n(function (factory) {\n\ttry{\n\t\tfactory(jQuery);\n\t}catch(e){\n\t\t// whoops no jquery..\n\t}\n}(function ($) {\n\t$.fn.conversationalForm = function (options /* ConversationalFormOptions, see README */) {\n\t\toptions = options || {};\n\t\tif(!options.formEl){\n\t\t\toptions.formEl = this[0];\n\t\t}\n\n\t\tif(!options.context){\n\t\t\tvar formContexts = document.querySelectorAll(\"*[cf-context]\");\n\t\t\tif(formContexts[0]){\n\t\t\t\toptions.context = formContexts[0];\n\t\t\t}\n\t\t}\n\n\t\treturn new cf.ConversationalForm(options);\n\t};\n}));\n\n// requirejs/amd plugin\n(function (root, factory) {\n\t// from http://ifandelse.com/its-not-hard-making-your-library-support-amd-and-commonjs/#update\n\tif(typeof define === \"function\" && define.amd) {\n\t\tdefine([\"conversational-form\"], function(conversationalform){\n\t\t\treturn (root.conversationalform = factory(conversationalform));\n\t\t});\n\t} else if(typeof module === \"object\" && module.exports) {\n\t\tmodule.exports = (root.conversationalform = factory(require(\"conversational-form\")));\n\t} else {\n\t\troot.conversationalform = factory(cf.ConversationalForm);\n\t}\n\t}(window, function(conversationalform) {\n\t\t// module code here....\n\t\treturn cf;\n\t}\n));","import { ConversationalForm } from \"conversational-form\";\n\n/** Every time the user submits an answer */\nfunction answerSubmittedHandler(dto, success, error) {\n  const conversation = dto.input.cfReference;\n  if (\n    dto.tag.name === \"firstName\" &&\n    dto.text.toLowerCase().indexOf(\"charles\") >= 0\n  ) {\n    // conversation.addRobotChatResponse('GET OUT OF HERE CHARLES')\n    // return error('NO CHARLES ALLOWED')\n  }\n\n  console.log(conversation, \"Form data so far\", conversation.getFormData(true));\n  success();\n}\n\n/** After the last question has been answered */\nfunction conversationFinishedHandler(conversation) {\n  const formData = conversation.getFormData(true);\n  console.log(\"Form data: \", formData);\n  conversation.addRobotChatResponse(\"You are done, here is the data collected\");\n  conversation.addRobotChatResponse(JSON.stringify(formData, null, 2));\n  // Do something actually useful with the data\n}\n\nnew ConversationalForm({\n  formEl: document.getElementById(\"sample-conversation\"),\n  flowStepCallback: answerSubmittedHandler,\n  submitCallback: conversationFinishedHandler,\n  theme: \"dark\",\n  showProgressBar: true\n});\n"]}